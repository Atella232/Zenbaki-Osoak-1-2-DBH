(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function Rv(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var um={exports:{}},Go={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function $w(){if(Ib)return Go;Ib=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:a,type:i,key:d,ref:l!==void 0?l:null,props:u}}return Go.Fragment=e,Go.jsx=n,Go.jsxs=n,Go}var Db;function Yw(){return Db||(Db=1,um.exports=$w()),um.exports}var m=Yw(),cm={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function Zw(){if(jb)return Ce;jb=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function D(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,U={};function ne(O,J,le){this.props=O,this.context=J,this.refs=U,this.updater=le||F}ne.prototype.isReactComponent={},ne.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},ne.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ae(){}ae.prototype=ne.prototype;function te(O,J,le){this.props=O,this.context=J,this.refs=U,this.updater=le||F}var me=te.prototype=new ae;me.constructor=te,$(me,ne.prototype),me.isPureReactComponent=!0;var Ne=Array.isArray;function Se(){}var k={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(O,J,le){var de=le.ref;return{$$typeof:a,type:O,key:J,ref:de!==void 0?de:null,props:le}}function j(O,J){return N(O.type,J,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===a}function V(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(le){return J[le]})}var R=/\/+/g;function it(O,J){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):J.toString(36)}function ze(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Se,Se):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function X(O,J,le,de,ce){var ke=typeof O;(ke==="undefined"||ke==="boolean")&&(O=null);var He=!1;if(O===null)He=!0;else switch(ke){case"bigint":case"string":case"number":He=!0;break;case"object":switch(O.$$typeof){case a:case e:He=!0;break;case x:return He=O._init,X(He(O._payload),J,le,de,ce)}}if(He)return ce=ce(O),He=de===""?"."+it(O,0):de,Ne(ce)?(le="",He!=null&&(le=He.replace(R,"$&/")+"/"),X(ce,J,le,"",function(Ar){return Ar})):ce!=null&&(I(ce)&&(ce=j(ce,le+(ce.key==null||O&&O.key===ce.key?"":(""+ce.key).replace(R,"$&/")+"/")+He)),J.push(ce)),1;He=0;var Ot=de===""?".":de+":";if(Ne(O))for(var ft=0;ft<O.length;ft++)de=O[ft],ke=Ot+it(de,ft),He+=X(de,J,le,ke,ce);else if(ft=D(O),typeof ft=="function")for(O=ft.call(O),ft=0;!(de=O.next()).done;)de=de.value,ke=Ot+it(de,ft++),He+=X(de,J,le,ke,ce);else if(ke==="object"){if(typeof O.then=="function")return X(ze(O),J,le,de,ce);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return He}function ie(O,J,le){if(O==null)return O;var de=[],ce=0;return X(O,de,"","",function(ke){return J.call(le,ke,ce++)}),de}function pe(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(le){(O._status===0||O._status===-1)&&(O._status=1,O._result=le)},function(le){(O._status===0||O._status===-1)&&(O._status=2,O._result=le)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var Pe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},qe={map:ie,forEach:function(O,J,le){ie(O,function(){J.apply(this,arguments)},le)},count:function(O){var J=0;return ie(O,function(){J++}),J},toArray:function(O){return ie(O,function(J){return J})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ce.Activity=E,Ce.Children=qe,Ce.Component=ne,Ce.Fragment=n,Ce.Profiler=l,Ce.PureComponent=te,Ce.StrictMode=i,Ce.Suspense=y,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},Ce.cache=function(O){return function(){return O.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(O,J,le){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var de=$({},O.props),ce=O.key;if(J!=null)for(ke in J.key!==void 0&&(ce=""+J.key),J)!S.call(J,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&J.ref===void 0||(de[ke]=J[ke]);var ke=arguments.length-2;if(ke===1)de.children=le;else if(1<ke){for(var He=Array(ke),Ot=0;Ot<ke;Ot++)He[Ot]=arguments[Ot+2];de.children=He}return N(O.type,ce,de)},Ce.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ce.createElement=function(O,J,le){var de,ce={},ke=null;if(J!=null)for(de in J.key!==void 0&&(ke=""+J.key),J)S.call(J,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ce[de]=J[de]);var He=arguments.length-2;if(He===1)ce.children=le;else if(1<He){for(var Ot=Array(He),ft=0;ft<He;ft++)Ot[ft]=arguments[ft+2];ce.children=Ot}if(O&&O.defaultProps)for(de in He=O.defaultProps,He)ce[de]===void 0&&(ce[de]=He[de]);return N(O,ke,ce)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(O){return{$$typeof:p,render:O}},Ce.isValidElement=I,Ce.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:pe}},Ce.memo=function(O,J){return{$$typeof:g,type:O,compare:J===void 0?null:J}},Ce.startTransition=function(O){var J=k.T,le={};k.T=le;try{var de=O(),ce=k.S;ce!==null&&ce(le,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Se,Pe)}catch(ke){Pe(ke)}finally{J!==null&&le.types!==null&&(J.types=le.types),k.T=J}},Ce.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ce.use=function(O){return k.H.use(O)},Ce.useActionState=function(O,J,le){return k.H.useActionState(O,J,le)},Ce.useCallback=function(O,J){return k.H.useCallback(O,J)},Ce.useContext=function(O){return k.H.useContext(O)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(O,J){return k.H.useDeferredValue(O,J)},Ce.useEffect=function(O,J){return k.H.useEffect(O,J)},Ce.useEffectEvent=function(O){return k.H.useEffectEvent(O)},Ce.useId=function(){return k.H.useId()},Ce.useImperativeHandle=function(O,J,le){return k.H.useImperativeHandle(O,J,le)},Ce.useInsertionEffect=function(O,J){return k.H.useInsertionEffect(O,J)},Ce.useLayoutEffect=function(O,J){return k.H.useLayoutEffect(O,J)},Ce.useMemo=function(O,J){return k.H.useMemo(O,J)},Ce.useOptimistic=function(O,J){return k.H.useOptimistic(O,J)},Ce.useReducer=function(O,J,le){return k.H.useReducer(O,J,le)},Ce.useRef=function(O){return k.H.useRef(O)},Ce.useState=function(O){return k.H.useState(O)},Ce.useSyncExternalStore=function(O,J,le){return k.H.useSyncExternalStore(O,J,le)},Ce.useTransition=function(){return k.H.useTransition()},Ce.version="19.2.3",Ce}var Ob;function sp(){return Ob||(Ob=1,cm.exports=Zw()),cm.exports}var L=sp();const Jw=Rv(L);var dm={exports:{}},Ko={},hm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mb;function Ww(){return Mb||(Mb=1,(function(a){function e(X,ie){var pe=X.length;X.push(ie);e:for(;0<pe;){var Pe=pe-1>>>1,qe=X[Pe];if(0<l(qe,ie))X[Pe]=ie,X[pe]=qe,pe=Pe;else break e}}function n(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ie=X[0],pe=X.pop();if(pe!==ie){X[0]=pe;e:for(var Pe=0,qe=X.length,O=qe>>>1;Pe<O;){var J=2*(Pe+1)-1,le=X[J],de=J+1,ce=X[de];if(0>l(le,pe))de<qe&&0>l(ce,le)?(X[Pe]=ce,X[de]=pe,Pe=de):(X[Pe]=le,X[J]=pe,Pe=J);else if(de<qe&&0>l(ce,pe))X[Pe]=ce,X[de]=pe,Pe=de;else break e}}return ie}function l(X,ie){var pe=X.sortIndex-ie.sortIndex;return pe!==0?pe:X.id-ie.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();a.unstable_now=function(){return d.now()-p}}var y=[],g=[],x=1,E=null,A=3,D=!1,F=!1,$=!1,U=!1,ne=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function me(X){for(var ie=n(g);ie!==null;){if(ie.callback===null)i(g);else if(ie.startTime<=X)i(g),ie.sortIndex=ie.expirationTime,e(y,ie);else break;ie=n(g)}}function Ne(X){if($=!1,me(X),!F)if(n(y)!==null)F=!0,Se||(Se=!0,V());else{var ie=n(g);ie!==null&&ze(Ne,ie.startTime-X)}}var Se=!1,k=-1,S=5,N=-1;function j(){return U?!0:!(a.unstable_now()-N<S)}function I(){if(U=!1,Se){var X=a.unstable_now();N=X;var ie=!0;try{e:{F=!1,$&&($=!1,ae(k),k=-1),D=!0;var pe=A;try{t:{for(me(X),E=n(y);E!==null&&!(E.expirationTime>X&&j());){var Pe=E.callback;if(typeof Pe=="function"){E.callback=null,A=E.priorityLevel;var qe=Pe(E.expirationTime<=X);if(X=a.unstable_now(),typeof qe=="function"){E.callback=qe,me(X),ie=!0;break t}E===n(y)&&i(y),me(X)}else i(y);E=n(y)}if(E!==null)ie=!0;else{var O=n(g);O!==null&&ze(Ne,O.startTime-X),ie=!1}}break e}finally{E=null,A=pe,D=!1}ie=void 0}}finally{ie?V():Se=!1}}}var V;if(typeof te=="function")V=function(){te(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,it=R.port2;R.port1.onmessage=I,V=function(){it.postMessage(null)}}else V=function(){ne(I,0)};function ze(X,ie){k=ne(function(){X(a.unstable_now())},ie)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(X){X.callback=null},a.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},a.unstable_getCurrentPriorityLevel=function(){return A},a.unstable_next=function(X){switch(A){case 1:case 2:case 3:var ie=3;break;default:ie=A}var pe=A;A=ie;try{return X()}finally{A=pe}},a.unstable_requestPaint=function(){U=!0},a.unstable_runWithPriority=function(X,ie){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var pe=A;A=X;try{return ie()}finally{A=pe}},a.unstable_scheduleCallback=function(X,ie,pe){var Pe=a.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Pe+pe:Pe):pe=Pe,X){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=pe+qe,X={id:x++,callback:ie,priorityLevel:X,startTime:pe,expirationTime:qe,sortIndex:-1},pe>Pe?(X.sortIndex=pe,e(g,X),n(y)===null&&X===n(g)&&($?(ae(k),k=-1):$=!0,ze(Ne,pe-Pe))):(X.sortIndex=qe,e(y,X),F||D||(F=!0,Se||(Se=!0,V()))),X},a.unstable_shouldYield=j,a.unstable_wrapCallback=function(X){var ie=A;return function(){var pe=A;A=ie;try{return X.apply(this,arguments)}finally{A=pe}}}})(fm)),fm}var Vb;function eT(){return Vb||(Vb=1,hm.exports=Ww()),hm.exports}var mm={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pb;function tT(){if(Pb)return pn;Pb=1;var a=sp();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(y,g,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:y,containerInfo:g,implementation:x}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,pn.createPortal=function(y,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(y,g,null,x)},pn.flushSync=function(y){var g=d.T,x=i.p;try{if(d.T=null,i.p=2,y)return y()}finally{d.T=g,i.p=x,i.d.f()}},pn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(y,g))},pn.prefetchDNS=function(y){typeof y=="string"&&i.d.D(y)},pn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var x=g.as,E=p(x,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,D=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?i.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:D}):x==="script"&&i.d.X(y,{crossOrigin:E,integrity:A,fetchPriority:D,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},pn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=p(g.as,g.crossOrigin);i.d.M(y,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(y)},pn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,E=p(x,g.crossOrigin);i.d.L(y,x,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},pn.preloadModule=function(y,g){if(typeof y=="string")if(g){var x=p(g.as,g.crossOrigin);i.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(y)},pn.requestFormReset=function(y){i.d.r(y)},pn.unstable_batchedUpdates=function(y,g){return y(g)},pn.useFormState=function(y,g,x){return d.H.useFormState(y,g,x)},pn.useFormStatus=function(){return d.H.useHostTransitionStatus()},pn.version="19.2.3",pn}var Lb;function nT(){if(Lb)return mm.exports;Lb=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),mm.exports=tT(),mm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb;function rT(){if(zb)return Ko;zb=1;var a=eT(),e=sp(),n=nT();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)r+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,s=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(s=r.return),t=r.return;while(t)}return r.tag===3?s:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function y(t){if(u(t)!==t)throw Error(i(188))}function g(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var s=t,o=r;;){var h=s.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){s=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===s)return y(h),t;if(f===o)return y(h),r;f=f.sibling}throw Error(i(188))}if(s.return!==o.return)s=h,o=f;else{for(var _=!1,w=h.child;w;){if(w===s){_=!0,s=h,o=f;break}if(w===o){_=!0,o=h,s=f;break}w=w.sibling}if(!_){for(w=f.child;w;){if(w===s){_=!0,s=f,o=h;break}if(w===o){_=!0,o=f,s=h;break}w=w.sibling}if(!_)throw Error(i(189))}}if(s.alternate!==o)throw Error(i(190))}if(s.tag!==3)throw Error(i(188));return s.stateNode.current===s?t:r}function x(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=x(t),r!==null)return r;t=t.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),te=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function it(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $:return"Fragment";case ne:return"Profiler";case U:return"StrictMode";case Ne:return"Suspense";case Se:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case te:return t.displayName||"Context";case ae:return(t._context.displayName||"Context")+".Consumer";case me:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return r=t.displayName||null,r!==null?r:it(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return it(t(r))}catch{}}return null}var ze=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Pe=[],qe=-1;function O(t){return{current:t}}function J(t){0>qe||(t.current=Pe[qe],Pe[qe]=null,qe--)}function le(t,r){qe++,Pe[qe]=t.current,t.current=r}var de=O(null),ce=O(null),ke=O(null),He=O(null);function Ot(t,r){switch(le(ke,r),le(ce,t),le(de,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?eb(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=eb(r),t=tb(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(de),le(de,t)}function ft(){J(de),J(ce),J(ke)}function Ar(t){t.memoizedState!==null&&le(He,t);var r=de.current,s=tb(r,t.type);r!==s&&(le(ce,t),le(de,s))}function lr(t){ce.current===t&&(J(de),J(ce)),He.current===t&&(J(He),Bo._currentValue=pe)}var Sr,or;function wn(t){if(Sr===void 0)try{throw Error()}catch(s){var r=s.stack.trim().match(/\n( *(at )?)/);Sr=r&&r[1]||"",or=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sr+t+or}var Pi=!1;function ia(t,r){if(!t||Pi)return"";Pi=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(r){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(K){var H=K}Reflect.construct(t,[],W)}else{try{W.call()}catch(K){H=K}t.call(W.prototype)}}else{try{throw Error()}catch(K){H=K}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(K){if(K&&H&&typeof K.stack=="string")return[K.stack,H.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),_=f[0],w=f[1];if(_&&w){var C=_.split(`
`),q=w.split(`
`);for(h=o=0;o<C.length&&!C[o].includes("DetermineComponentFrameRoot");)o++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(o===C.length||h===q.length)for(o=C.length-1,h=q.length-1;1<=o&&0<=h&&C[o]!==q[h];)h--;for(;1<=o&&0<=h;o--,h--)if(C[o]!==q[h]){if(o!==1||h!==1)do if(o--,h--,0>h||C[o]!==q[h]){var Q=`
`+C[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=h);break}}}finally{Pi=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?wn(s):""}function sa(t,r){switch(t.tag){case 26:case 27:case 5:return wn(t.type);case 16:return wn("Lazy");case 13:return t.child!==r&&r!==null?wn("Suspense Fallback"):wn("Suspense");case 19:return wn("SuspenseList");case 0:case 15:return ia(t.type,!1);case 11:return ia(t.type.render,!1);case 1:return ia(t.type,!0);case 31:return wn("Activity");default:return""}}function Li(t){try{var r="",s=null;do r+=sa(t,s),s=t,t=t.return;while(t);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ct=Object.prototype.hasOwnProperty,St=a.unstable_scheduleCallback,Gn=a.unstable_cancelCallback,Ss=a.unstable_shouldYield,re=a.unstable_requestPaint,ue=a.unstable_now,Te=a.unstable_getCurrentPriorityLevel,De=a.unstable_ImmediatePriority,je=a.unstable_UserBlockingPriority,Ae=a.unstable_NormalPriority,nt=a.unstable_LowPriority,vt=a.unstable_IdlePriority,an=a.log,xt=a.unstable_setDisableYieldValue,vn=null,ve=null;function Oe(t){if(typeof an=="function"&&xt(t),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(vn,t)}catch{}}var ge=Math.clz32?Math.clz32:Yt,pt=Math.log,Nt=Math.LN2;function Yt(t){return t>>>=0,t===0?32:31-(pt(t)/Nt|0)|0}var kt=256,sn=262144,It=4194304;function Nr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function kr(t,r,s){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var w=o&134217727;return w!==0?(o=w&~f,o!==0?h=Nr(o):(_&=w,_!==0?h=Nr(_):s||(s=w&~t,s!==0&&(h=Nr(s))))):(w=o&~f,w!==0?h=Nr(w):_!==0?h=Nr(_):s||(s=o&~t,s!==0&&(h=Nr(s)))),h===0?0:r!==0&&r!==h&&(r&f)===0&&(f=h&-h,s=r&-r,f>=s||f===32&&(s&4194048)!==0)?r:h}function ur(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function hh(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ou(){var t=It;return It<<=1,(It&62914560)===0&&(It=4194304),t}function Rr(t){for(var r=[],s=0;31>s;s++)r.push(t);return r}function zi(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function fh(t,r,s,o,h,f){var _=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var w=t.entanglements,C=t.expirationTimes,q=t.hiddenUpdates;for(s=_&~s;0<s;){var Q=31-ge(s),W=1<<Q;w[Q]=0,C[Q]=-1;var H=q[Q];if(H!==null)for(q[Q]=null,Q=0;Q<H.length;Q++){var K=H[Q];K!==null&&(K.lane&=-536870913)}s&=~W}o!==0&&Ui(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~r))}function Ui(t,r,s){t.pendingLanes|=r,t.suspendedLanes&=~r;var o=31-ge(r);t.entangledLanes|=r,t.entanglements[o]=t.entanglements[o]|1073741824|s&261930}function Gl(t,r){var s=t.entangledLanes|=r;for(t=t.entanglements;s;){var o=31-ge(s),h=1<<o;h&r|t[o]&r&&(t[o]|=r),s&=~h}}function Kl(t,r){var s=r&-r;return s=(s&42)!==0?1:Bi(s),(s&(t.suspendedLanes|r))!==0?0:s}function Bi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function la(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Mu(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:Tb(t.type))}function cr(t,r){var s=ie.p;try{return ie.p=t,r()}finally{ie.p=s}}var dr=Math.random().toString(36).slice(2),Ut="__reactFiber$"+dr,Wt="__reactProps$"+dr,Cr="__reactContainer$"+dr,Ns="__reactEvents$"+dr,mh="__reactListeners$"+dr,Vu="__reactHandles$"+dr,Pu="__reactResources$"+dr,Ir="__reactMarker$"+dr;function ks(t){delete t[Ut],delete t[Wt],delete t[Ns],delete t[mh],delete t[Vu]}function Dr(t){var r=t[Ut];if(r)return r;for(var s=t.parentNode;s;){if(r=s[Cr]||s[Ut]){if(s=r.alternate,r.child!==null||s!==null&&s.child!==null)for(t=ob(t);t!==null;){if(s=t[Ut])return s;t=ob(t)}return r}t=s,s=t.parentNode}return null}function Kn(t){if(t=t[Ut]||t[Cr]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function On(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function jr(t){var r=t[Pu];return r||(r=t[Pu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Bt(t){t[Ir]=!0}var Xl=new Set,Ql={};function Or(t,r){Mr(t,r),Mr(t+"Capture",r)}function Mr(t,r){for(Ql[t]=r,t=0;t<r.length;t++)Xl.add(r[t])}var $l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yl={},Zl={};function Lu(t){return Ct.call(Zl,t)?!0:Ct.call(Yl,t)?!1:$l.test(t)?Zl[t]=!0:(Yl[t]=!0,!1)}function Rs(t,r,s){if(Lu(r))if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var o=r.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+s)}}function Mn(t,r,s){if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+s)}}function qt(t,r,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(r,s,""+o)}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pa(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Jl(t,r,s){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){s=""+_,f.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(_){s=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function st(t){if(!t._valueTracker){var r=Pa(t)?"checked":"value";t._valueTracker=Jl(t,r,""+t[r])}}function qi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var s=r.getValue(),o="";return t&&(o=Pa(t)?t.checked?"true":"false":t.value),t=o,t!==s?(r.setValue(t),!0):!1}function Vr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Hi=/[\n"\\]/g;function Tn(t){return t.replace(Hi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Cs(t,r,s,o,h,f,_,w){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),r!=null?_==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+en(r)):t.value!==""+en(r)&&(t.value=""+en(r)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),r!=null?Wl(t,_,en(r)):s!=null?Wl(t,_,en(s)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.name=""+en(w):t.removeAttribute("name")}function zu(t,r,s,o,h,f,_,w){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||s!=null){if(!(f!=="submit"&&f!=="reset"||r!=null)){st(t);return}s=s!=null?""+en(s):"",r=r!=null?""+en(r):s,w||r===t.value||(t.value=r),t.defaultValue=r}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=w?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),st(t)}function Wl(t,r,s){r==="number"&&Vr(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function La(t,r,s,o){if(t=t.options,r){r={};for(var h=0;h<s.length;h++)r["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=r.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&o&&(t[s].defaultSelected=!0)}else{for(s=""+en(s),r=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function Uu(t,r,s){if(r!=null&&(r=""+en(r),r!==t.value&&(t.value=r),s==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=s!=null?""+en(s):""}function za(t,r,s,o){if(r==null){if(o!=null){if(s!=null)throw Error(i(92));if(ze(o)){if(1<o.length)throw Error(i(93));o=o[0]}s=o}s==null&&(s=""),r=s}s=en(r),t.defaultValue=s,o=t.textContent,o===s&&o!==""&&o!==null&&(t.value=o),st(t)}function An(t,r){if(r){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=r;return}}t.textContent=r}var Bu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eo(t,r,s){var o=r.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":o?t.setProperty(r,s):typeof s!="number"||s===0||Bu.has(r)?r==="float"?t.cssFloat=s:t[r]=(""+s).trim():t[r]=s+"px"}function to(t,r,s){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||r!=null&&r.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in r)o=r[h],r.hasOwnProperty(h)&&s[h]!==o&&eo(t,h,o)}else for(var f in r)r.hasOwnProperty(f)&&eo(t,f,r[f])}function Is(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ua=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ds(t){return Ua.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function hr(){}var no=null;function Xn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ba=null,Pr=null;function Fi(t){var r=Kn(t);if(r&&(t=r.stateNode)){var s=t[Wt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Cs(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),r=s.name,s.type==="radio"&&r!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Tn(""+r)+'"][type="radio"]'),r=0;r<s.length;r++){var o=s[r];if(o!==t&&o.form===t.form){var h=o[Wt]||null;if(!h)throw Error(i(90));Cs(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(r=0;r<s.length;r++)o=s[r],o.form===t.form&&qi(o)}break e;case"textarea":Uu(t,s.value,s.defaultValue);break e;case"select":r=s.value,r!=null&&La(t,!!s.multiple,r,!1)}}}var js=!1;function qa(t,r,s){if(js)return t(r,s);js=!0;try{var o=t(r);return o}finally{if(js=!1,(Ba!==null||Pr!==null)&&(Mc(),Ba&&(r=Ba,t=Pr,Pr=Ba=null,Fi(r),t)))for(r=0;r<t.length;r++)Fi(t[r])}}function fr(t,r){var s=t.stateNode;if(s===null)return null;var o=s[Wt]||null;if(o===null)return null;s=o[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(i(231,r,typeof s));return s}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gi=!1;if(Qn)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{Gi=!1}var Lr=null,ro=null,Ki=null;function ao(){if(Ki)return Ki;var t,r=ro,s=r.length,o,h="value"in Lr?Lr.value:Lr.textContent,f=h.length;for(t=0;t<s&&r[t]===h[t];t++);var _=s-t;for(o=1;o<=_&&r[s-o]===h[f-o];o++);return Ki=h.slice(t,1<o?1-o:void 0)}function Xi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function oa(){return!0}function mr(){return!1}function ln(t){function r(s,o,h,f,_){this._reactName=s,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(s=t[w],this[w]=s?s(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?oa:mr,this.isPropagationStopped=mr,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=oa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=oa)},persist:function(){},isPersistent:oa}),r}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zr=ln(ua),Ha=E({},ua,{view:0,detail:0}),io=ln(Ha),Fa,Os,Ur,Ms=E({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ur&&(Ur&&t.type==="mousemove"?(Fa=t.screenX-Ur.screenX,Os=t.screenY-Ur.screenY):Os=Fa=0,Ur=t),Fa)},movementY:function(t){return"movementY"in t?t.movementY:Os}}),so=ln(Ms),Qi=E({},Ms,{dataTransfer:0}),Hu=ln(Qi),Fu=E({},Ha,{relatedTarget:0}),$i=ln(Fu),lo=E({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),Gu=ln(lo),Vs=E({},ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ku=ln(Vs),Xu=E({},ua,{data:0}),Br=ln(Xu),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Yu[t])?!!r[t]:!1}function Ga(){return Zu}var xn=E({},Ha,{key:function(t){if(t.key){var r=Qu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$u[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(t){return t.type==="keypress"?Xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ju=ln(xn),Wu=E({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ca=ln(Wu),c=E({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),b=ln(c),v=E({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=ln(v),z=E({},Ms,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G=ln(z),se=E({},ua,{newState:0,oldState:0}),Me=ln(se),Mt=[9,13,27,32],et=Qn&&"CompositionEvent"in window,Et=null;Qn&&"documentMode"in document&&(Et=document.documentMode);var $n=Qn&&"TextEvent"in window&&!Et,qr=Qn&&(!et||Et&&8<Et&&11>=Et),pr=" ",gr=!1;function Yi(t,r){switch(t){case"keyup":return Mt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ps(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function _1(t,r){switch(t){case"compositionend":return Ps(r);case"keypress":return r.which!==32?null:(gr=!0,pr);case"textInput":return t=r.data,t===pr&&gr?null:t;default:return null}}function v1(t,r){if(Ls)return t==="compositionend"||!et&&Yi(t,r)?(t=ao(),Ki=ro=Lr=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return qr&&r.locale!=="ko"?null:r.data;default:return null}}var x1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!x1[t.type]:r==="textarea"}function hg(t,r,s,o){Ba?Pr?Pr.push(o):Pr=[o]:Ba=o,r=qc(r,"onChange"),0<r.length&&(s=new zr("onChange","change",null,s,o),t.push({event:s,listeners:r}))}var oo=null,uo=null;function E1(t){Qy(t,0)}function ec(t){var r=On(t);if(qi(r))return t}function fg(t,r){if(t==="change")return r}var mg=!1;if(Qn){var ph;if(Qn){var gh="oninput"in document;if(!gh){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),gh=typeof pg.oninput=="function"}ph=gh}else ph=!1;mg=ph&&(!document.documentMode||9<document.documentMode)}function gg(){oo&&(oo.detachEvent("onpropertychange",yg),uo=oo=null)}function yg(t){if(t.propertyName==="value"&&ec(uo)){var r=[];hg(r,uo,t,Xn(t)),qa(E1,r)}}function w1(t,r,s){t==="focusin"?(gg(),oo=r,uo=s,oo.attachEvent("onpropertychange",yg)):t==="focusout"&&gg()}function T1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ec(uo)}function A1(t,r){if(t==="click")return ec(r)}function S1(t,r){if(t==="input"||t==="change")return ec(r)}function N1(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Vn=typeof Object.is=="function"?Object.is:N1;function co(t,r){if(Vn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var s=Object.keys(t),o=Object.keys(r);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var h=s[o];if(!Ct.call(r,h)||!Vn(t[h],r[h]))return!1}return!0}function bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _g(t,r){var s=bg(t);t=0;for(var o;s;){if(s.nodeType===3){if(o=t+s.textContent.length,t<=r&&o>=r)return{node:s,offset:r-t};t=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=bg(s)}}function vg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?vg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function xg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Vr(t.document);r instanceof t.HTMLIFrameElement;){try{var s=typeof r.contentWindow.location.href=="string"}catch{s=!1}if(s)t=r.contentWindow;else break;r=Vr(t.document)}return r}function yh(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var k1=Qn&&"documentMode"in document&&11>=document.documentMode,zs=null,bh=null,ho=null,_h=!1;function Eg(t,r,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;_h||zs==null||zs!==Vr(o)||(o=zs,"selectionStart"in o&&yh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ho&&co(ho,o)||(ho=o,o=qc(bh,"onSelect"),0<o.length&&(r=new zr("onSelect","select",null,r,s),t.push({event:r,listeners:o}),r.target=zs)))}function Zi(t,r){var s={};return s[t.toLowerCase()]=r.toLowerCase(),s["Webkit"+t]="webkit"+r,s["Moz"+t]="moz"+r,s}var Us={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},vh={},wg={};Qn&&(wg=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Ji(t){if(vh[t])return vh[t];if(!Us[t])return t;var r=Us[t],s;for(s in r)if(r.hasOwnProperty(s)&&s in wg)return vh[t]=r[s];return t}var Tg=Ji("animationend"),Ag=Ji("animationiteration"),Sg=Ji("animationstart"),R1=Ji("transitionrun"),C1=Ji("transitionstart"),I1=Ji("transitioncancel"),Ng=Ji("transitionend"),kg=new Map,xh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xh.push("scrollEnd");function yr(t,r){kg.set(t,r),Or(r,[t])}var tc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Yn=[],Bs=0,Eh=0;function nc(){for(var t=Bs,r=Eh=Bs=0;r<t;){var s=Yn[r];Yn[r++]=null;var o=Yn[r];Yn[r++]=null;var h=Yn[r];Yn[r++]=null;var f=Yn[r];if(Yn[r++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}f!==0&&Rg(s,h,f)}}function rc(t,r,s,o){Yn[Bs++]=t,Yn[Bs++]=r,Yn[Bs++]=s,Yn[Bs++]=o,Eh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function wh(t,r,s,o){return rc(t,r,s,o),ac(t)}function Wi(t,r){return rc(t,null,null,r),ac(t)}function Rg(t,r,s){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s);for(var h=!1,f=t.return;f!==null;)f.childLanes|=s,o=f.alternate,o!==null&&(o.childLanes|=s),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&r!==null&&(h=31-ge(s),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[r]:o.push(r),r.lane=s|536870912),f):null}function ac(t){if(50<Oo)throw Oo=0,jf=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var qs={};function D1(t,r,s,o){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,r,s,o){return new D1(t,r,s,o)}function Th(t){return t=t.prototype,!(!t||!t.isReactComponent)}function da(t,r){var s=t.alternate;return s===null?(s=Pn(t.tag,r,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=r,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,r=t.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Cg(t,r){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,r=s.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function ic(t,r,s,o,h,f){var _=0;if(o=t,typeof t=="function")Th(t)&&(_=1);else if(typeof t=="string")_=Pw(t,s,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=Pn(31,s,r,h),t.elementType=N,t.lanes=f,t;case $:return es(s.children,h,f,r);case U:_=8,h|=24;break;case ne:return t=Pn(12,s,r,h|2),t.elementType=ne,t.lanes=f,t;case Ne:return t=Pn(13,s,r,h),t.elementType=Ne,t.lanes=f,t;case Se:return t=Pn(19,s,r,h),t.elementType=Se,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:_=10;break e;case ae:_=9;break e;case me:_=11;break e;case k:_=14;break e;case S:_=16,o=null;break e}_=29,s=Error(i(130,t===null?"null":typeof t,"")),o=null}return r=Pn(_,s,r,h),r.elementType=t,r.type=o,r.lanes=f,r}function es(t,r,s,o){return t=Pn(7,t,o,r),t.lanes=s,t}function Ah(t,r,s){return t=Pn(6,t,null,r),t.lanes=s,t}function Ig(t){var r=Pn(18,null,null,0);return r.stateNode=t,r}function Sh(t,r,s){return r=Pn(4,t.children!==null?t.children:[],t.key,r),r.lanes=s,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Dg=new WeakMap;function Zn(t,r){if(typeof t=="object"&&t!==null){var s=Dg.get(t);return s!==void 0?s:(r={value:t,source:r,stack:Li(r)},Dg.set(t,r),r)}return{value:t,source:r,stack:Li(r)}}var Hs=[],Fs=0,sc=null,fo=0,Jn=[],Wn=0,Ka=null,Hr=1,Fr="";function ha(t,r){Hs[Fs++]=fo,Hs[Fs++]=sc,sc=t,fo=r}function jg(t,r,s){Jn[Wn++]=Hr,Jn[Wn++]=Fr,Jn[Wn++]=Ka,Ka=t;var o=Hr;t=Fr;var h=32-ge(o)-1;o&=~(1<<h),s+=1;var f=32-ge(r)+h;if(30<f){var _=h-h%5;f=(o&(1<<_)-1).toString(32),o>>=_,h-=_,Hr=1<<32-ge(r)+h|s<<h|o,Fr=f+t}else Hr=1<<f|s<<h|o,Fr=t}function Nh(t){t.return!==null&&(ha(t,1),jg(t,1,0))}function kh(t){for(;t===sc;)sc=Hs[--Fs],Hs[Fs]=null,fo=Hs[--Fs],Hs[Fs]=null;for(;t===Ka;)Ka=Jn[--Wn],Jn[Wn]=null,Fr=Jn[--Wn],Jn[Wn]=null,Hr=Jn[--Wn],Jn[Wn]=null}function Og(t,r){Jn[Wn++]=Hr,Jn[Wn++]=Fr,Jn[Wn++]=Ka,Hr=r.id,Fr=r.overflow,Ka=t}var on=null,yt=null,$e=!1,Xa=null,er=!1,Rh=Error(i(519));function Qa(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mo(Zn(r,t)),Rh}function Mg(t){var r=t.stateNode,s=t.type,o=t.memoizedProps;switch(r[Ut]=t,r[Wt]=o,s){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(s=0;s<Vo.length;s++)Be(Vo[s],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Be("invalid",r),zu(r,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Be("invalid",r);break;case"textarea":Be("invalid",r),za(r,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||r.textContent===""+s||o.suppressHydrationWarning===!0||Jy(r.textContent,s)?(o.popover!=null&&(Be("beforetoggle",r),Be("toggle",r)),o.onScroll!=null&&Be("scroll",r),o.onScrollEnd!=null&&Be("scrollend",r),o.onClick!=null&&(r.onclick=hr),r=!0):r=!1,r||Qa(t,!0)}function Vg(t){for(on=t.return;on;)switch(on.tag){case 5:case 31:case 13:er=!1;return;case 27:case 3:er=!0;return;default:on=on.return}}function Gs(t){if(t!==on)return!1;if(!$e)return Vg(t),$e=!0,!1;var r=t.tag,s;if((s=r!==3&&r!==27)&&((s=r===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Qf(t.type,t.memoizedProps)),s=!s),s&&yt&&Qa(t),Vg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));yt=lb(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));yt=lb(t)}else r===27?(r=yt,oi(t.type)?(t=Wf,Wf=null,yt=t):yt=r):yt=on?nr(t.stateNode.nextSibling):null;return!0}function ts(){yt=on=null,$e=!1}function Ch(){var t=Xa;return t!==null&&(Rn===null?Rn=t:Rn.push.apply(Rn,t),Xa=null),t}function mo(t){Xa===null?Xa=[t]:Xa.push(t)}var Ih=O(null),ns=null,fa=null;function $a(t,r,s){le(Ih,r._currentValue),r._currentValue=s}function ma(t){t._currentValue=Ih.current,J(Ih)}function Dh(t,r,s){for(;t!==null;){var o=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),t===s)break;t=t.return}}function jh(t,r,s,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var w=f;f=h;for(var C=0;C<r.length;C++)if(w.context===r[C]){f.lanes|=s,w=f.alternate,w!==null&&(w.lanes|=s),Dh(f.return,s,t),o||(_=null);break e}f=w.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(i(341));_.lanes|=s,f=_.alternate,f!==null&&(f.lanes|=s),Dh(_,s,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Ks(t,r,s,o){t=null;for(var h=r,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var w=h.type;Vn(h.pendingProps.value,_.value)||(t!==null?t.push(w):t=[w])}}else if(h===He.current){if(_=h.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Bo):t=[Bo])}h=h.return}t!==null&&jh(r,t,s,o),r.flags|=262144}function lc(t){for(t=t.firstContext;t!==null;){if(!Vn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function rs(t){ns=t,fa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function un(t){return Pg(ns,t)}function oc(t,r){return ns===null&&rs(t),Pg(t,r)}function Pg(t,r){var s=r._currentValue;if(r={context:r,memoizedValue:s,next:null},fa===null){if(t===null)throw Error(i(308));fa=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else fa=fa.next=r;return s}var j1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(s,o){t.push(o)}};this.abort=function(){r.aborted=!0,t.forEach(function(s){return s()})}},O1=a.unstable_scheduleCallback,M1=a.unstable_NormalPriority,Ht={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oh(){return{controller:new j1,data:new Map,refCount:0}}function po(t){t.refCount--,t.refCount===0&&O1(M1,function(){t.controller.abort()})}var go=null,Mh=0,Xs=0,Qs=null;function V1(t,r){if(go===null){var s=go=[];Mh=0,Xs=zf(),Qs={status:"pending",value:void 0,then:function(o){s.push(o)}}}return Mh++,r.then(Lg,Lg),r}function Lg(){if(--Mh===0&&go!==null){Qs!==null&&(Qs.status="fulfilled");var t=go;go=null,Xs=0,Qs=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function P1(t,r){var s=[],o={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return t.then(function(){o.status="fulfilled",o.value=r;for(var h=0;h<s.length;h++)(0,s[h])(r)},function(h){for(o.status="rejected",o.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),o}var zg=X.S;X.S=function(t,r){Ey=ue(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&V1(t,r),zg!==null&&zg(t,r)};var as=O(null);function Vh(){var t=as.current;return t!==null?t:mt.pooledCache}function uc(t,r){r===null?le(as,as.current):le(as,r.pool)}function Ug(){var t=Vh();return t===null?null:{parent:Ht._currentValue,pool:t}}var $s=Error(i(460)),Ph=Error(i(474)),cc=Error(i(542)),dc={then:function(){}};function Bg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qg(t,r,s){switch(s=t[s],s===void 0?t.push(r):s!==r&&(r.then(hr,hr),r=s),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Fg(t),t;default:if(typeof r.status=="string")r.then(hr,hr);else{if(t=mt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(o){if(r.status==="pending"){var h=r;h.status="fulfilled",h.value=o}},function(o){if(r.status==="pending"){var h=r;h.status="rejected",h.reason=o}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Fg(t),t}throw ss=r,$s}}function is(t){try{var r=t._init;return r(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ss=s,$s):s}}var ss=null;function Hg(){if(ss===null)throw Error(i(459));var t=ss;return ss=null,t}function Fg(t){if(t===$s||t===cc)throw Error(i(483))}var Ys=null,yo=0;function hc(t){var r=yo;return yo+=1,Ys===null&&(Ys=[]),qg(Ys,t,r)}function bo(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function fc(t,r){throw r.$$typeof===A?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Gg(t){function r(P,M){if(t){var B=P.deletions;B===null?(P.deletions=[M],P.flags|=16):B.push(M)}}function s(P,M){if(!t)return null;for(;M!==null;)r(P,M),M=M.sibling;return null}function o(P){for(var M=new Map;P!==null;)P.key!==null?M.set(P.key,P):M.set(P.index,P),P=P.sibling;return M}function h(P,M){return P=da(P,M),P.index=0,P.sibling=null,P}function f(P,M,B){return P.index=B,t?(B=P.alternate,B!==null?(B=B.index,B<M?(P.flags|=67108866,M):B):(P.flags|=67108866,M)):(P.flags|=1048576,M)}function _(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function w(P,M,B,Y){return M===null||M.tag!==6?(M=Ah(B,P.mode,Y),M.return=P,M):(M=h(M,B),M.return=P,M)}function C(P,M,B,Y){var be=B.type;return be===$?Q(P,M,B.props.children,Y,B.key):M!==null&&(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===S&&is(be)===M.type)?(M=h(M,B.props),bo(M,B),M.return=P,M):(M=ic(B.type,B.key,B.props,null,P.mode,Y),bo(M,B),M.return=P,M)}function q(P,M,B,Y){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=Sh(B,P.mode,Y),M.return=P,M):(M=h(M,B.children||[]),M.return=P,M)}function Q(P,M,B,Y,be){return M===null||M.tag!==7?(M=es(B,P.mode,Y,be),M.return=P,M):(M=h(M,B),M.return=P,M)}function W(P,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Ah(""+M,P.mode,B),M.return=P,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case D:return B=ic(M.type,M.key,M.props,null,P.mode,B),bo(B,M),B.return=P,B;case F:return M=Sh(M,P.mode,B),M.return=P,M;case S:return M=is(M),W(P,M,B)}if(ze(M)||V(M))return M=es(M,P.mode,B,null),M.return=P,M;if(typeof M.then=="function")return W(P,hc(M),B);if(M.$$typeof===te)return W(P,oc(P,M),B);fc(P,M)}return null}function H(P,M,B,Y){var be=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return be!==null?null:w(P,M,""+B,Y);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case D:return B.key===be?C(P,M,B,Y):null;case F:return B.key===be?q(P,M,B,Y):null;case S:return B=is(B),H(P,M,B,Y)}if(ze(B)||V(B))return be!==null?null:Q(P,M,B,Y,null);if(typeof B.then=="function")return H(P,M,hc(B),Y);if(B.$$typeof===te)return H(P,M,oc(P,B),Y);fc(P,B)}return null}function K(P,M,B,Y,be){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return P=P.get(B)||null,w(M,P,""+Y,be);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case D:return P=P.get(Y.key===null?B:Y.key)||null,C(M,P,Y,be);case F:return P=P.get(Y.key===null?B:Y.key)||null,q(M,P,Y,be);case S:return Y=is(Y),K(P,M,B,Y,be)}if(ze(Y)||V(Y))return P=P.get(B)||null,Q(M,P,Y,be,null);if(typeof Y.then=="function")return K(P,M,B,hc(Y),be);if(Y.$$typeof===te)return K(P,M,B,oc(M,Y),be);fc(M,Y)}return null}function fe(P,M,B,Y){for(var be=null,Je=null,ye=M,Le=M=0,Ge=null;ye!==null&&Le<B.length;Le++){ye.index>Le?(Ge=ye,ye=null):Ge=ye.sibling;var We=H(P,ye,B[Le],Y);if(We===null){ye===null&&(ye=Ge);break}t&&ye&&We.alternate===null&&r(P,ye),M=f(We,M,Le),Je===null?be=We:Je.sibling=We,Je=We,ye=Ge}if(Le===B.length)return s(P,ye),$e&&ha(P,Le),be;if(ye===null){for(;Le<B.length;Le++)ye=W(P,B[Le],Y),ye!==null&&(M=f(ye,M,Le),Je===null?be=ye:Je.sibling=ye,Je=ye);return $e&&ha(P,Le),be}for(ye=o(ye);Le<B.length;Le++)Ge=K(ye,P,Le,B[Le],Y),Ge!==null&&(t&&Ge.alternate!==null&&ye.delete(Ge.key===null?Le:Ge.key),M=f(Ge,M,Le),Je===null?be=Ge:Je.sibling=Ge,Je=Ge);return t&&ye.forEach(function(fi){return r(P,fi)}),$e&&ha(P,Le),be}function xe(P,M,B,Y){if(B==null)throw Error(i(151));for(var be=null,Je=null,ye=M,Le=M=0,Ge=null,We=B.next();ye!==null&&!We.done;Le++,We=B.next()){ye.index>Le?(Ge=ye,ye=null):Ge=ye.sibling;var fi=H(P,ye,We.value,Y);if(fi===null){ye===null&&(ye=Ge);break}t&&ye&&fi.alternate===null&&r(P,ye),M=f(fi,M,Le),Je===null?be=fi:Je.sibling=fi,Je=fi,ye=Ge}if(We.done)return s(P,ye),$e&&ha(P,Le),be;if(ye===null){for(;!We.done;Le++,We=B.next())We=W(P,We.value,Y),We!==null&&(M=f(We,M,Le),Je===null?be=We:Je.sibling=We,Je=We);return $e&&ha(P,Le),be}for(ye=o(ye);!We.done;Le++,We=B.next())We=K(ye,P,Le,We.value,Y),We!==null&&(t&&We.alternate!==null&&ye.delete(We.key===null?Le:We.key),M=f(We,M,Le),Je===null?be=We:Je.sibling=We,Je=We);return t&&ye.forEach(function(Qw){return r(P,Qw)}),$e&&ha(P,Le),be}function ht(P,M,B,Y){if(typeof B=="object"&&B!==null&&B.type===$&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case D:e:{for(var be=B.key;M!==null;){if(M.key===be){if(be=B.type,be===$){if(M.tag===7){s(P,M.sibling),Y=h(M,B.props.children),Y.return=P,P=Y;break e}}else if(M.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===S&&is(be)===M.type){s(P,M.sibling),Y=h(M,B.props),bo(Y,B),Y.return=P,P=Y;break e}s(P,M);break}else r(P,M);M=M.sibling}B.type===$?(Y=es(B.props.children,P.mode,Y,B.key),Y.return=P,P=Y):(Y=ic(B.type,B.key,B.props,null,P.mode,Y),bo(Y,B),Y.return=P,P=Y)}return _(P);case F:e:{for(be=B.key;M!==null;){if(M.key===be)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){s(P,M.sibling),Y=h(M,B.children||[]),Y.return=P,P=Y;break e}else{s(P,M);break}else r(P,M);M=M.sibling}Y=Sh(B,P.mode,Y),Y.return=P,P=Y}return _(P);case S:return B=is(B),ht(P,M,B,Y)}if(ze(B))return fe(P,M,B,Y);if(V(B)){if(be=V(B),typeof be!="function")throw Error(i(150));return B=be.call(B),xe(P,M,B,Y)}if(typeof B.then=="function")return ht(P,M,hc(B),Y);if(B.$$typeof===te)return ht(P,M,oc(P,B),Y);fc(P,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(s(P,M.sibling),Y=h(M,B),Y.return=P,P=Y):(s(P,M),Y=Ah(B,P.mode,Y),Y.return=P,P=Y),_(P)):s(P,M)}return function(P,M,B,Y){try{yo=0;var be=ht(P,M,B,Y);return Ys=null,be}catch(ye){if(ye===$s||ye===cc)throw ye;var Je=Pn(29,ye,null,P.mode);return Je.lanes=Y,Je.return=P,Je}finally{}}}var ls=Gg(!0),Kg=Gg(!1),Ya=!1;function Lh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zh(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Za(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ja(t,r,s){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(tt&2)!==0){var h=o.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),o.pending=r,r=ac(t),Rg(t,null,s),r}return rc(t,o,r,s),ac(t)}function _o(t,r,s){if(r=r.updateQueue,r!==null&&(r=r.shared,(s&4194048)!==0)){var o=r.lanes;o&=t.pendingLanes,s|=o,r.lanes=s,Gl(t,s)}}function Uh(t,r){var s=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var h=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var _={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,s=s.next}while(s!==null);f===null?h=f=r:f=f.next=r}else h=f=r;s={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=r:t.next=r,s.lastBaseUpdate=r}var Bh=!1;function vo(){if(Bh){var t=Qs;if(t!==null)throw t}}function xo(t,r,s,o){Bh=!1;var h=t.updateQueue;Ya=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var C=w,q=C.next;C.next=null,_===null?f=q:_.next=q,_=C;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,w=Q.lastBaseUpdate,w!==_&&(w===null?Q.firstBaseUpdate=q:w.next=q,Q.lastBaseUpdate=C))}if(f!==null){var W=h.baseState;_=0,Q=q=C=null,w=f;do{var H=w.lane&-536870913,K=H!==w.lane;if(K?(Fe&H)===H:(o&H)===H){H!==0&&H===Xs&&(Bh=!0),Q!==null&&(Q=Q.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var fe=t,xe=w;H=r;var ht=s;switch(xe.tag){case 1:if(fe=xe.payload,typeof fe=="function"){W=fe.call(ht,W,H);break e}W=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=xe.payload,H=typeof fe=="function"?fe.call(ht,W,H):fe,H==null)break e;W=E({},W,H);break e;case 2:Ya=!0}}H=w.callback,H!==null&&(t.flags|=64,K&&(t.flags|=8192),K=h.callbacks,K===null?h.callbacks=[H]:K.push(H))}else K={lane:H,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Q===null?(q=Q=K,C=W):Q=Q.next=K,_|=H;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;K=w,w=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);Q===null&&(C=W),h.baseState=C,h.firstBaseUpdate=q,h.lastBaseUpdate=Q,f===null&&(h.shared.lanes=0),ri|=_,t.lanes=_,t.memoizedState=W}}function Xg(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Qg(t,r){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Xg(s[t],r)}var Zs=O(null),mc=O(0);function $g(t,r){t=wa,le(mc,t),le(Zs,r),wa=t|r.baseLanes}function qh(){le(mc,wa),le(Zs,Zs.current)}function Hh(){wa=mc.current,J(Zs),J(mc)}var Ln=O(null),tr=null;function Wa(t){var r=t.alternate;le(Vt,Vt.current&1),le(Ln,t),tr===null&&(r===null||Zs.current!==null||r.memoizedState!==null)&&(tr=t)}function Fh(t){le(Vt,Vt.current),le(Ln,t),tr===null&&(tr=t)}function Yg(t){t.tag===22?(le(Vt,Vt.current),le(Ln,t),tr===null&&(tr=t)):ei()}function ei(){le(Vt,Vt.current),le(Ln,Ln.current)}function zn(t){J(Ln),tr===t&&(tr=null),J(Vt)}var Vt=O(0);function pc(t){for(var r=t;r!==null;){if(r.tag===13){var s=r.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Zf(s)||Jf(s)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var pa=0,Ve=null,ct=null,Ft=null,gc=!1,Js=!1,os=!1,yc=0,Eo=0,Ws=null,L1=0;function Dt(){throw Error(i(321))}function Gh(t,r){if(r===null)return!1;for(var s=0;s<r.length&&s<t.length;s++)if(!Vn(t[s],r[s]))return!1;return!0}function Kh(t,r,s,o,h,f){return pa=f,Ve=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=t===null||t.memoizedState===null?j0:of,os=!1,f=s(o,h),os=!1,Js&&(f=Jg(r,s,o,h)),Zg(t),f}function Zg(t){X.H=Ao;var r=ct!==null&&ct.next!==null;if(pa=0,Ft=ct=Ve=null,gc=!1,Eo=0,Ws=null,r)throw Error(i(300));t===null||Gt||(t=t.dependencies,t!==null&&lc(t)&&(Gt=!0))}function Jg(t,r,s,o){Ve=t;var h=0;do{if(Js&&(Ws=null),Eo=0,Js=!1,25<=h)throw Error(i(301));if(h+=1,Ft=ct=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}X.H=O0,f=r(s,o)}while(Js);return f}function z1(){var t=X.H,r=t.useState()[0];return r=typeof r.then=="function"?wo(r):r,t=t.useState()[0],(ct!==null?ct.memoizedState:null)!==t&&(Ve.flags|=1024),r}function Xh(){var t=yc!==0;return yc=0,t}function Qh(t,r,s){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~s}function $h(t){if(gc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}gc=!1}pa=0,Ft=ct=Ve=null,Js=!1,Eo=yc=0,Ws=null}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Ve.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function Pt(){if(ct===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var r=Ft===null?Ve.memoizedState:Ft.next;if(r!==null)Ft=r,ct=t;else{if(t===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Ft===null?Ve.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function bc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wo(t){var r=Eo;return Eo+=1,Ws===null&&(Ws=[]),t=qg(Ws,t,r),r=Ve,(Ft===null?r.memoizedState:Ft.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?j0:of),t}function _c(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wo(t);if(t.$$typeof===te)return un(t)}throw Error(i(438,String(t)))}function Yh(t){var r=null,s=Ve.updateQueue;if(s!==null&&(r=s.memoCache),r==null){var o=Ve.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(r={data:o.data.map(function(h){return h.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),s===null&&(s=bc(),Ve.updateQueue=s),s.memoCache=r,s=r.data[r.index],s===void 0)for(s=r.data[r.index]=Array(t),o=0;o<t;o++)s[o]=j;return r.index++,s}function ga(t,r){return typeof r=="function"?r(t):r}function vc(t){var r=Pt();return Zh(r,ct,t)}function Zh(t,r,s){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}r.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{r=h.next;var w=_=null,C=null,q=r,Q=!1;do{var W=q.lane&-536870913;if(W!==q.lane?(Fe&W)===W:(pa&W)===W){var H=q.revertLane;if(H===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),W===Xs&&(Q=!0);else if((pa&H)===H){q=q.next,H===Xs&&(Q=!0);continue}else W={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},C===null?(w=C=W,_=f):C=C.next=W,Ve.lanes|=H,ri|=H;W=q.action,os&&s(f,W),f=q.hasEagerState?q.eagerState:s(f,W)}else H={lane:W,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},C===null?(w=C=H,_=f):C=C.next=H,Ve.lanes|=W,ri|=W;q=q.next}while(q!==null&&q!==r);if(C===null?_=f:C.next=w,!Vn(f,t.memoizedState)&&(Gt=!0,Q&&(s=Qs,s!==null)))throw s;t.memoizedState=f,t.baseState=_,t.baseQueue=C,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Jh(t){var r=Pt(),s=r.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=t;var o=s.dispatch,h=s.pending,f=r.memoizedState;if(h!==null){s.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);Vn(f,r.memoizedState)||(Gt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),s.lastRenderedState=f}return[f,o]}function Wg(t,r,s){var o=Ve,h=Pt(),f=$e;if(f){if(s===void 0)throw Error(i(407));s=s()}else s=r();var _=!Vn((ct||h).memoizedState,s);if(_&&(h.memoizedState=s,Gt=!0),h=h.queue,tf(n0.bind(null,o,h,t),[t]),h.getSnapshot!==r||_||Ft!==null&&Ft.memoizedState.tag&1){if(o.flags|=2048,el(9,{destroy:void 0},t0.bind(null,o,h,s,r),null),mt===null)throw Error(i(349));f||(pa&127)!==0||e0(o,r,s)}return s}function e0(t,r,s){t.flags|=16384,t={getSnapshot:r,value:s},r=Ve.updateQueue,r===null?(r=bc(),Ve.updateQueue=r,r.stores=[t]):(s=r.stores,s===null?r.stores=[t]:s.push(t))}function t0(t,r,s,o){r.value=s,r.getSnapshot=o,r0(r)&&a0(t)}function n0(t,r,s){return s(function(){r0(r)&&a0(t)})}function r0(t){var r=t.getSnapshot;t=t.value;try{var s=r();return!Vn(t,s)}catch{return!0}}function a0(t){var r=Wi(t,2);r!==null&&Cn(r,t,2)}function Wh(t){var r=En();if(typeof t=="function"){var s=t;if(t=s(),os){Oe(!0);try{s()}finally{Oe(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},r}function i0(t,r,s,o){return t.baseState=s,Zh(t,ct,typeof o=="function"?o:ga)}function U1(t,r,s,o,h){if(wc(t))throw Error(i(485));if(t=r.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};X.T!==null?s(!0):f.isTransition=!1,o(f),s=r.pending,s===null?(f.next=r.pending=f,s0(r,f)):(f.next=s.next,r.pending=s.next=f)}}function s0(t,r){var s=r.action,o=r.payload,h=t.state;if(r.isTransition){var f=X.T,_={};X.T=_;try{var w=s(h,o),C=X.S;C!==null&&C(_,w),l0(t,r,w)}catch(q){ef(t,r,q)}finally{f!==null&&_.types!==null&&(f.types=_.types),X.T=f}}else try{f=s(h,o),l0(t,r,f)}catch(q){ef(t,r,q)}}function l0(t,r,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){o0(t,r,o)},function(o){return ef(t,r,o)}):o0(t,r,s)}function o0(t,r,s){r.status="fulfilled",r.value=s,u0(r),t.state=s,r=t.pending,r!==null&&(s=r.next,s===r?t.pending=null:(s=s.next,r.next=s,s0(t,s)))}function ef(t,r,s){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do r.status="rejected",r.reason=s,u0(r),r=r.next;while(r!==o)}t.action=null}function u0(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function c0(t,r){return r}function d0(t,r){if($e){var s=mt.formState;if(s!==null){e:{var o=Ve;if($e){if(yt){t:{for(var h=yt,f=er;h.nodeType!==8;){if(!f){h=null;break t}if(h=nr(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){yt=nr(h.nextSibling),o=h.data==="F!";break e}}Qa(o)}o=!1}o&&(r=s[0])}}return s=En(),s.memoizedState=s.baseState=r,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c0,lastRenderedState:r},s.queue=o,s=C0.bind(null,Ve,o),o.dispatch=s,o=Wh(!1),f=lf.bind(null,Ve,!1,o.queue),o=En(),h={state:r,dispatch:null,action:t,pending:null},o.queue=h,s=U1.bind(null,Ve,h,f,s),h.dispatch=s,o.memoizedState=t,[r,s,!1]}function h0(t){var r=Pt();return f0(r,ct,t)}function f0(t,r,s){if(r=Zh(t,r,c0)[0],t=vc(ga)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var o=wo(r)}catch(_){throw _===$s?cc:_}else o=r;r=Pt();var h=r.queue,f=h.dispatch;return s!==r.memoizedState&&(Ve.flags|=2048,el(9,{destroy:void 0},B1.bind(null,h,s),null)),[o,f,t]}function B1(t,r){t.action=r}function m0(t){var r=Pt(),s=ct;if(s!==null)return f0(r,s,t);Pt(),r=r.memoizedState,s=Pt();var o=s.queue.dispatch;return s.memoizedState=t,[r,o,!1]}function el(t,r,s,o){return t={tag:t,create:s,deps:o,inst:r,next:null},r=Ve.updateQueue,r===null&&(r=bc(),Ve.updateQueue=r),s=r.lastEffect,s===null?r.lastEffect=t.next=t:(o=s.next,s.next=t,t.next=o,r.lastEffect=t),t}function p0(){return Pt().memoizedState}function xc(t,r,s,o){var h=En();Ve.flags|=t,h.memoizedState=el(1|r,{destroy:void 0},s,o===void 0?null:o)}function Ec(t,r,s,o){var h=Pt();o=o===void 0?null:o;var f=h.memoizedState.inst;ct!==null&&o!==null&&Gh(o,ct.memoizedState.deps)?h.memoizedState=el(r,f,s,o):(Ve.flags|=t,h.memoizedState=el(1|r,f,s,o))}function g0(t,r){xc(8390656,8,t,r)}function tf(t,r){Ec(2048,8,t,r)}function q1(t){Ve.flags|=4;var r=Ve.updateQueue;if(r===null)r=bc(),Ve.updateQueue=r,r.events=[t];else{var s=r.events;s===null?r.events=[t]:s.push(t)}}function y0(t){var r=Pt().memoizedState;return q1({ref:r,nextImpl:t}),function(){if((tt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function b0(t,r){return Ec(4,2,t,r)}function _0(t,r){return Ec(4,4,t,r)}function v0(t,r){if(typeof r=="function"){t=t();var s=r(t);return function(){typeof s=="function"?s():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function x0(t,r,s){s=s!=null?s.concat([t]):null,Ec(4,4,v0.bind(null,r,t),s)}function nf(){}function E0(t,r){var s=Pt();r=r===void 0?null:r;var o=s.memoizedState;return r!==null&&Gh(r,o[1])?o[0]:(s.memoizedState=[t,r],t)}function w0(t,r){var s=Pt();r=r===void 0?null:r;var o=s.memoizedState;if(r!==null&&Gh(r,o[1]))return o[0];if(o=t(),os){Oe(!0);try{t()}finally{Oe(!1)}}return s.memoizedState=[o,r],o}function rf(t,r,s){return s===void 0||(pa&1073741824)!==0&&(Fe&261930)===0?t.memoizedState=r:(t.memoizedState=s,t=Ty(),Ve.lanes|=t,ri|=t,s)}function T0(t,r,s,o){return Vn(s,r)?s:Zs.current!==null?(t=rf(t,s,o),Vn(t,r)||(Gt=!0),t):(pa&42)===0||(pa&1073741824)!==0&&(Fe&261930)===0?(Gt=!0,t.memoizedState=s):(t=Ty(),Ve.lanes|=t,ri|=t,r)}function A0(t,r,s,o,h){var f=ie.p;ie.p=f!==0&&8>f?f:8;var _=X.T,w={};X.T=w,lf(t,!1,r,s);try{var C=h(),q=X.S;if(q!==null&&q(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Q=P1(C,o);To(t,r,Q,qn(t))}else To(t,r,o,qn(t))}catch(W){To(t,r,{then:function(){},status:"rejected",reason:W},qn())}finally{ie.p=f,_!==null&&w.types!==null&&(_.types=w.types),X.T=_}}function H1(){}function af(t,r,s,o){if(t.tag!==5)throw Error(i(476));var h=S0(t).queue;A0(t,h,r,pe,s===null?H1:function(){return N0(t),s(o)})}function S0(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:pe},next:null};var s={};return r.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:s},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function N0(t){var r=S0(t);r.next===null&&(r=t.alternate.memoizedState),To(t,r.next.queue,{},qn())}function sf(){return un(Bo)}function k0(){return Pt().memoizedState}function R0(){return Pt().memoizedState}function F1(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var s=qn();t=Za(s);var o=Ja(r,t,s);o!==null&&(Cn(o,r,s),_o(o,r,s)),r={cache:Oh()},t.payload=r;return}r=r.return}}function G1(t,r,s){var o=qn();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},wc(t)?I0(r,s):(s=wh(t,r,s,o),s!==null&&(Cn(s,t,o),D0(s,r,o)))}function C0(t,r,s){var o=qn();To(t,r,s,o)}function To(t,r,s,o){var h={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(wc(t))I0(r,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var _=r.lastRenderedState,w=f(_,s);if(h.hasEagerState=!0,h.eagerState=w,Vn(w,_))return rc(t,r,h,0),mt===null&&nc(),!1}catch{}finally{}if(s=wh(t,r,h,o),s!==null)return Cn(s,t,o),D0(s,r,o),!0}return!1}function lf(t,r,s,o){if(o={lane:2,revertLane:zf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},wc(t)){if(r)throw Error(i(479))}else r=wh(t,s,o,2),r!==null&&Cn(r,t,2)}function wc(t){var r=t.alternate;return t===Ve||r!==null&&r===Ve}function I0(t,r){Js=gc=!0;var s=t.pending;s===null?r.next=r:(r.next=s.next,s.next=r),t.pending=r}function D0(t,r,s){if((s&4194048)!==0){var o=r.lanes;o&=t.pendingLanes,s|=o,r.lanes=s,Gl(t,s)}}var Ao={readContext:un,use:_c,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt};Ao.useEffectEvent=Dt;var j0={readContext:un,use:_c,useCallback:function(t,r){return En().memoizedState=[t,r===void 0?null:r],t},useContext:un,useEffect:g0,useImperativeHandle:function(t,r,s){s=s!=null?s.concat([t]):null,xc(4194308,4,v0.bind(null,r,t),s)},useLayoutEffect:function(t,r){return xc(4194308,4,t,r)},useInsertionEffect:function(t,r){xc(4,2,t,r)},useMemo:function(t,r){var s=En();r=r===void 0?null:r;var o=t();if(os){Oe(!0);try{t()}finally{Oe(!1)}}return s.memoizedState=[o,r],o},useReducer:function(t,r,s){var o=En();if(s!==void 0){var h=s(r);if(os){Oe(!0);try{s(r)}finally{Oe(!1)}}}else h=r;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=G1.bind(null,Ve,t),[o.memoizedState,t]},useRef:function(t){var r=En();return t={current:t},r.memoizedState=t},useState:function(t){t=Wh(t);var r=t.queue,s=C0.bind(null,Ve,r);return r.dispatch=s,[t.memoizedState,s]},useDebugValue:nf,useDeferredValue:function(t,r){var s=En();return rf(s,t,r)},useTransition:function(){var t=Wh(!1);return t=A0.bind(null,Ve,t.queue,!0,!1),En().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,s){var o=Ve,h=En();if($e){if(s===void 0)throw Error(i(407));s=s()}else{if(s=r(),mt===null)throw Error(i(349));(Fe&127)!==0||e0(o,r,s)}h.memoizedState=s;var f={value:s,getSnapshot:r};return h.queue=f,g0(n0.bind(null,o,f,t),[t]),o.flags|=2048,el(9,{destroy:void 0},t0.bind(null,o,f,s,r),null),s},useId:function(){var t=En(),r=mt.identifierPrefix;if($e){var s=Fr,o=Hr;s=(o&~(1<<32-ge(o)-1)).toString(32)+s,r="_"+r+"R_"+s,s=yc++,0<s&&(r+="H"+s.toString(32)),r+="_"}else s=L1++,r="_"+r+"r_"+s.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:sf,useFormState:d0,useActionState:d0,useOptimistic:function(t){var r=En();r.memoizedState=r.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=s,r=lf.bind(null,Ve,!0,s),s.dispatch=r,[t,r]},useMemoCache:Yh,useCacheRefresh:function(){return En().memoizedState=F1.bind(null,Ve)},useEffectEvent:function(t){var r=En(),s={impl:t};return r.memoizedState=s,function(){if((tt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}},of={readContext:un,use:_c,useCallback:E0,useContext:un,useEffect:tf,useImperativeHandle:x0,useInsertionEffect:b0,useLayoutEffect:_0,useMemo:w0,useReducer:vc,useRef:p0,useState:function(){return vc(ga)},useDebugValue:nf,useDeferredValue:function(t,r){var s=Pt();return T0(s,ct.memoizedState,t,r)},useTransition:function(){var t=vc(ga)[0],r=Pt().memoizedState;return[typeof t=="boolean"?t:wo(t),r]},useSyncExternalStore:Wg,useId:k0,useHostTransitionStatus:sf,useFormState:h0,useActionState:h0,useOptimistic:function(t,r){var s=Pt();return i0(s,ct,t,r)},useMemoCache:Yh,useCacheRefresh:R0};of.useEffectEvent=y0;var O0={readContext:un,use:_c,useCallback:E0,useContext:un,useEffect:tf,useImperativeHandle:x0,useInsertionEffect:b0,useLayoutEffect:_0,useMemo:w0,useReducer:Jh,useRef:p0,useState:function(){return Jh(ga)},useDebugValue:nf,useDeferredValue:function(t,r){var s=Pt();return ct===null?rf(s,t,r):T0(s,ct.memoizedState,t,r)},useTransition:function(){var t=Jh(ga)[0],r=Pt().memoizedState;return[typeof t=="boolean"?t:wo(t),r]},useSyncExternalStore:Wg,useId:k0,useHostTransitionStatus:sf,useFormState:m0,useActionState:m0,useOptimistic:function(t,r){var s=Pt();return ct!==null?i0(s,ct,t,r):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Yh,useCacheRefresh:R0};O0.useEffectEvent=y0;function uf(t,r,s,o){r=t.memoizedState,s=s(o,r),s=s==null?r:E({},r,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var cf={enqueueSetState:function(t,r,s){t=t._reactInternals;var o=qn(),h=Za(o);h.payload=r,s!=null&&(h.callback=s),r=Ja(t,h,o),r!==null&&(Cn(r,t,o),_o(r,t,o))},enqueueReplaceState:function(t,r,s){t=t._reactInternals;var o=qn(),h=Za(o);h.tag=1,h.payload=r,s!=null&&(h.callback=s),r=Ja(t,h,o),r!==null&&(Cn(r,t,o),_o(r,t,o))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var s=qn(),o=Za(s);o.tag=2,r!=null&&(o.callback=r),r=Ja(t,o,s),r!==null&&(Cn(r,t,s),_o(r,t,s))}};function M0(t,r,s,o,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,_):r.prototype&&r.prototype.isPureReactComponent?!co(s,o)||!co(h,f):!0}function V0(t,r,s,o){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(s,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(s,o),r.state!==t&&cf.enqueueReplaceState(r,r.state,null)}function us(t,r){var s=r;if("ref"in r){s={};for(var o in r)o!=="ref"&&(s[o]=r[o])}if(t=t.defaultProps){s===r&&(s=E({},s));for(var h in t)s[h]===void 0&&(s[h]=t[h])}return s}function P0(t){tc(t)}function L0(t){console.error(t)}function z0(t){tc(t)}function Tc(t,r){try{var s=t.onUncaughtError;s(r.value,{componentStack:r.stack})}catch(o){setTimeout(function(){throw o})}}function U0(t,r,s){try{var o=t.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function df(t,r,s){return s=Za(s),s.tag=3,s.payload={element:null},s.callback=function(){Tc(t,r)},s}function B0(t){return t=Za(t),t.tag=3,t}function q0(t,r,s,o){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){U0(r,s,o)}}var _=s.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){U0(r,s,o),typeof h!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})})}function K1(t,r,s,o,h){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(r=s.alternate,r!==null&&Ks(r,s,h,!0),s=Ln.current,s!==null){switch(s.tag){case 31:case 13:return tr===null?Vc():s.alternate===null&&jt===0&&(jt=3),s.flags&=-257,s.flags|=65536,s.lanes=h,o===dc?s.flags|=16384:(r=s.updateQueue,r===null?s.updateQueue=new Set([o]):r.add(o),Vf(t,o,h)),!1;case 22:return s.flags|=65536,o===dc?s.flags|=16384:(r=s.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=r):(s=r.retryQueue,s===null?r.retryQueue=new Set([o]):s.add(o)),Vf(t,o,h)),!1}throw Error(i(435,s.tag))}return Vf(t,o,h),Vc(),!1}if($e)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=h,o!==Rh&&(t=Error(i(422),{cause:o}),mo(Zn(t,s)))):(o!==Rh&&(r=Error(i(423),{cause:o}),mo(Zn(r,s))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Zn(o,s),h=df(t.stateNode,o,h),Uh(t,h),jt!==4&&(jt=2)),!1;var f=Error(i(520),{cause:o});if(f=Zn(f,s),jo===null?jo=[f]:jo.push(f),jt!==4&&(jt=2),r===null)return!0;o=Zn(o,s),s=r;do{switch(s.tag){case 3:return s.flags|=65536,t=h&-h,s.lanes|=t,t=df(s.stateNode,o,t),Uh(s,t),!1;case 1:if(r=s.type,f=s.stateNode,(s.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ai===null||!ai.has(f))))return s.flags|=65536,h&=-h,s.lanes|=h,h=B0(h),q0(h,t,s,o),Uh(s,h),!1}s=s.return}while(s!==null);return!1}var hf=Error(i(461)),Gt=!1;function cn(t,r,s,o){r.child=t===null?Kg(r,null,s,o):ls(r,t.child,s,o)}function H0(t,r,s,o,h){s=s.render;var f=r.ref;if("ref"in o){var _={};for(var w in o)w!=="ref"&&(_[w]=o[w])}else _=o;return rs(r),o=Kh(t,r,s,_,f,h),w=Xh(),t!==null&&!Gt?(Qh(t,r,h),ya(t,r,h)):($e&&w&&Nh(r),r.flags|=1,cn(t,r,o,h),r.child)}function F0(t,r,s,o,h){if(t===null){var f=s.type;return typeof f=="function"&&!Th(f)&&f.defaultProps===void 0&&s.compare===null?(r.tag=15,r.type=f,G0(t,r,f,o,h)):(t=ic(s.type,null,o,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!vf(t,h)){var _=f.memoizedProps;if(s=s.compare,s=s!==null?s:co,s(_,o)&&t.ref===r.ref)return ya(t,r,h)}return r.flags|=1,t=da(f,o),t.ref=r.ref,t.return=r,r.child=t}function G0(t,r,s,o,h){if(t!==null){var f=t.memoizedProps;if(co(f,o)&&t.ref===r.ref)if(Gt=!1,r.pendingProps=o=f,vf(t,h))(t.flags&131072)!==0&&(Gt=!0);else return r.lanes=t.lanes,ya(t,r,h)}return ff(t,r,s,o,h)}function K0(t,r,s,o){var h=o.children,f=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((r.flags&128)!==0){if(f=f!==null?f.baseLanes|s:s,t!==null){for(o=r.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,r.child=null;return X0(t,r,f,s,o)}if((s&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&uc(r,f!==null?f.cachePool:null),f!==null?$g(r,f):qh(),Yg(r);else return o=r.lanes=536870912,X0(t,r,f!==null?f.baseLanes|s:s,s,o)}else f!==null?(uc(r,f.cachePool),$g(r,f),ei(),r.memoizedState=null):(t!==null&&uc(r,null),qh(),ei());return cn(t,r,h,s),r.child}function So(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function X0(t,r,s,o,h){var f=Vh();return f=f===null?null:{parent:Ht._currentValue,pool:f},r.memoizedState={baseLanes:s,cachePool:f},t!==null&&uc(r,null),qh(),Yg(r),t!==null&&Ks(t,r,o,!0),r.childLanes=h,null}function Ac(t,r){return r=Nc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Q0(t,r,s){return ls(r,t.child,null,s),t=Ac(r,r.pendingProps),t.flags|=2,zn(r),r.memoizedState=null,t}function X1(t,r,s){var o=r.pendingProps,h=(r.flags&128)!==0;if(r.flags&=-129,t===null){if($e){if(o.mode==="hidden")return t=Ac(r,o),r.lanes=536870912,So(null,t);if(Fh(r),(t=yt)?(t=sb(t,er),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ka!==null?{id:Hr,overflow:Fr}:null,retryLane:536870912,hydrationErrors:null},s=Ig(t),s.return=r,r.child=s,on=r,yt=null)):t=null,t===null)throw Qa(r);return r.lanes=536870912,null}return Ac(r,o)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(Fh(r),h)if(r.flags&256)r.flags&=-257,r=Q0(t,r,s);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(Gt||Ks(t,r,s,!1),h=(s&t.childLanes)!==0,Gt||h){if(o=mt,o!==null&&(_=Kl(o,s),_!==0&&_!==f.retryLane))throw f.retryLane=_,Wi(t,_),Cn(o,t,_),hf;Vc(),r=Q0(t,r,s)}else t=f.treeContext,yt=nr(_.nextSibling),on=r,$e=!0,Xa=null,er=!1,t!==null&&Og(r,t),r=Ac(r,o),r.flags|=4096;return r}return t=da(t.child,{mode:o.mode,children:o.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Sc(t,r){var s=r.ref;if(s===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(i(284));(t===null||t.ref!==s)&&(r.flags|=4194816)}}function ff(t,r,s,o,h){return rs(r),s=Kh(t,r,s,o,void 0,h),o=Xh(),t!==null&&!Gt?(Qh(t,r,h),ya(t,r,h)):($e&&o&&Nh(r),r.flags|=1,cn(t,r,s,h),r.child)}function $0(t,r,s,o,h,f){return rs(r),r.updateQueue=null,s=Jg(r,o,s,h),Zg(t),o=Xh(),t!==null&&!Gt?(Qh(t,r,f),ya(t,r,f)):($e&&o&&Nh(r),r.flags|=1,cn(t,r,s,f),r.child)}function Y0(t,r,s,o,h){if(rs(r),r.stateNode===null){var f=qs,_=s.contextType;typeof _=="object"&&_!==null&&(f=un(_)),f=new s(o,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=cf,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=o,f.state=r.memoizedState,f.refs={},Lh(r),_=s.contextType,f.context=typeof _=="object"&&_!==null?un(_):qs,f.state=r.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(uf(r,s,_,o),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&cf.enqueueReplaceState(f,f.state,null),xo(r,o,f,h),vo(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),o=!0}else if(t===null){f=r.stateNode;var w=r.memoizedProps,C=us(s,w);f.props=C;var q=f.context,Q=s.contextType;_=qs,typeof Q=="object"&&Q!==null&&(_=un(Q));var W=s.getDerivedStateFromProps;Q=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,Q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(w||q!==_)&&V0(r,f,o,_),Ya=!1;var H=r.memoizedState;f.state=H,xo(r,o,f,h),vo(),q=r.memoizedState,w||H!==q||Ya?(typeof W=="function"&&(uf(r,s,W,o),q=r.memoizedState),(C=Ya||M0(r,s,C,o,H,q,_))?(Q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=q),f.props=o,f.state=q,f.context=_,o=C):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{f=r.stateNode,zh(t,r),_=r.memoizedProps,Q=us(s,_),f.props=Q,W=r.pendingProps,H=f.context,q=s.contextType,C=qs,typeof q=="object"&&q!==null&&(C=un(q)),w=s.getDerivedStateFromProps,(q=typeof w=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==W||H!==C)&&V0(r,f,o,C),Ya=!1,H=r.memoizedState,f.state=H,xo(r,o,f,h),vo();var K=r.memoizedState;_!==W||H!==K||Ya||t!==null&&t.dependencies!==null&&lc(t.dependencies)?(typeof w=="function"&&(uf(r,s,w,o),K=r.memoizedState),(Q=Ya||M0(r,s,Q,o,H,K,C)||t!==null&&t.dependencies!==null&&lc(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,K,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,K,C)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=K),f.props=o,f.state=K,f.context=C,o=Q):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(r.flags|=1024),o=!1)}return f=o,Sc(t,r),o=(r.flags&128)!==0,f||o?(f=r.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&o?(r.child=ls(r,t.child,null,h),r.child=ls(r,null,s,h)):cn(t,r,s,h),r.memoizedState=f.state,t=r.child):t=ya(t,r,h),t}function Z0(t,r,s,o){return ts(),r.flags|=256,cn(t,r,s,o),r.child}var mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pf(t){return{baseLanes:t,cachePool:Ug()}}function gf(t,r,s){return t=t!==null?t.childLanes&~s:0,r&&(t|=Bn),t}function J0(t,r,s){var o=r.pendingProps,h=!1,f=(r.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Vt.current&2)!==0),_&&(h=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,t===null){if($e){if(h?Wa(r):ei(),(t=yt)?(t=sb(t,er),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Ka!==null?{id:Hr,overflow:Fr}:null,retryLane:536870912,hydrationErrors:null},s=Ig(t),s.return=r,r.child=s,on=r,yt=null)):t=null,t===null)throw Qa(r);return Jf(t)?r.lanes=32:r.lanes=536870912,null}var w=o.children;return o=o.fallback,h?(ei(),h=r.mode,w=Nc({mode:"hidden",children:w},h),o=es(o,h,s,null),w.return=r,o.return=r,w.sibling=o,r.child=w,o=r.child,o.memoizedState=pf(s),o.childLanes=gf(t,_,s),r.memoizedState=mf,So(null,o)):(Wa(r),yf(r,w))}var C=t.memoizedState;if(C!==null&&(w=C.dehydrated,w!==null)){if(f)r.flags&256?(Wa(r),r.flags&=-257,r=bf(t,r,s)):r.memoizedState!==null?(ei(),r.child=t.child,r.flags|=128,r=null):(ei(),w=o.fallback,h=r.mode,o=Nc({mode:"visible",children:o.children},h),w=es(w,h,s,null),w.flags|=2,o.return=r,w.return=r,o.sibling=w,r.child=o,ls(r,t.child,null,s),o=r.child,o.memoizedState=pf(s),o.childLanes=gf(t,_,s),r.memoizedState=mf,r=So(null,o));else if(Wa(r),Jf(w)){if(_=w.nextSibling&&w.nextSibling.dataset,_)var q=_.dgst;_=q,o=Error(i(419)),o.stack="",o.digest=_,mo({value:o,source:null,stack:null}),r=bf(t,r,s)}else if(Gt||Ks(t,r,s,!1),_=(s&t.childLanes)!==0,Gt||_){if(_=mt,_!==null&&(o=Kl(_,s),o!==0&&o!==C.retryLane))throw C.retryLane=o,Wi(t,o),Cn(_,t,o),hf;Zf(w)||Vc(),r=bf(t,r,s)}else Zf(w)?(r.flags|=192,r.child=t.child,r=null):(t=C.treeContext,yt=nr(w.nextSibling),on=r,$e=!0,Xa=null,er=!1,t!==null&&Og(r,t),r=yf(r,o.children),r.flags|=4096);return r}return h?(ei(),w=o.fallback,h=r.mode,C=t.child,q=C.sibling,o=da(C,{mode:"hidden",children:o.children}),o.subtreeFlags=C.subtreeFlags&65011712,q!==null?w=da(q,w):(w=es(w,h,s,null),w.flags|=2),w.return=r,o.return=r,o.sibling=w,r.child=o,So(null,o),o=r.child,w=t.child.memoizedState,w===null?w=pf(s):(h=w.cachePool,h!==null?(C=Ht._currentValue,h=h.parent!==C?{parent:C,pool:C}:h):h=Ug(),w={baseLanes:w.baseLanes|s,cachePool:h}),o.memoizedState=w,o.childLanes=gf(t,_,s),r.memoizedState=mf,So(t.child,o)):(Wa(r),s=t.child,t=s.sibling,s=da(s,{mode:"visible",children:o.children}),s.return=r,s.sibling=null,t!==null&&(_=r.deletions,_===null?(r.deletions=[t],r.flags|=16):_.push(t)),r.child=s,r.memoizedState=null,s)}function yf(t,r){return r=Nc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Nc(t,r){return t=Pn(22,t,null,r),t.lanes=0,t}function bf(t,r,s){return ls(r,t.child,null,s),t=yf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function W0(t,r,s){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r),Dh(t.return,r,s)}function _f(t,r,s,o,h,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:h,treeForkCount:f}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=s,_.tailMode=h,_.treeForkCount=f)}function ey(t,r,s){var o=r.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var _=Vt.current,w=(_&2)!==0;if(w?(_=_&1|2,r.flags|=128):_&=1,le(Vt,_),cn(t,r,o,s),o=$e?fo:0,!w&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&W0(t,s,r);else if(t.tag===19)W0(t,s,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(s=r.child,h=null;s!==null;)t=s.alternate,t!==null&&pc(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=r.child,r.child=null):(h=s.sibling,s.sibling=null),_f(r,!1,h,s,f,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&pc(t)===null){r.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}_f(r,!0,s,null,f,o);break;case"together":_f(r,!1,null,null,void 0,o);break;default:r.memoizedState=null}return r.child}function ya(t,r,s){if(t!==null&&(r.dependencies=t.dependencies),ri|=r.lanes,(s&r.childLanes)===0)if(t!==null){if(Ks(t,r,s,!1),(s&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,s=da(t,t.pendingProps),r.child=s,s.return=r;t.sibling!==null;)t=t.sibling,s=s.sibling=da(t,t.pendingProps),s.return=r;s.sibling=null}return r.child}function vf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&lc(t)))}function Q1(t,r,s){switch(r.tag){case 3:Ot(r,r.stateNode.containerInfo),$a(r,Ht,t.memoizedState.cache),ts();break;case 27:case 5:Ar(r);break;case 4:Ot(r,r.stateNode.containerInfo);break;case 10:$a(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Fh(r),null;break;case 13:var o=r.memoizedState;if(o!==null)return o.dehydrated!==null?(Wa(r),r.flags|=128,null):(s&r.child.childLanes)!==0?J0(t,r,s):(Wa(r),t=ya(t,r,s),t!==null?t.sibling:null);Wa(r);break;case 19:var h=(t.flags&128)!==0;if(o=(s&r.childLanes)!==0,o||(Ks(t,r,s,!1),o=(s&r.childLanes)!==0),h){if(o)return ey(t,r,s);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(Vt,Vt.current),o)break;return null;case 22:return r.lanes=0,K0(t,r,s,r.pendingProps);case 24:$a(r,Ht,t.memoizedState.cache)}return ya(t,r,s)}function ty(t,r,s){if(t!==null)if(t.memoizedProps!==r.pendingProps)Gt=!0;else{if(!vf(t,s)&&(r.flags&128)===0)return Gt=!1,Q1(t,r,s);Gt=(t.flags&131072)!==0}else Gt=!1,$e&&(r.flags&1048576)!==0&&jg(r,fo,r.index);switch(r.lanes=0,r.tag){case 16:e:{var o=r.pendingProps;if(t=is(r.elementType),r.type=t,typeof t=="function")Th(t)?(o=us(t,o),r.tag=1,r=Y0(null,r,t,o,s)):(r.tag=0,r=ff(null,r,t,o,s));else{if(t!=null){var h=t.$$typeof;if(h===me){r.tag=11,r=H0(null,r,t,o,s);break e}else if(h===k){r.tag=14,r=F0(null,r,t,o,s);break e}}throw r=it(t)||t,Error(i(306,r,""))}}return r;case 0:return ff(t,r,r.type,r.pendingProps,s);case 1:return o=r.type,h=us(o,r.pendingProps),Y0(t,r,o,h,s);case 3:e:{if(Ot(r,r.stateNode.containerInfo),t===null)throw Error(i(387));o=r.pendingProps;var f=r.memoizedState;h=f.element,zh(t,r),xo(r,o,null,s);var _=r.memoizedState;if(o=_.cache,$a(r,Ht,o),o!==f.cache&&jh(r,[Ht],s,!0),vo(),o=_.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=Z0(t,r,o,s);break e}else if(o!==h){h=Zn(Error(i(424)),r),mo(h),r=Z0(t,r,o,s);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(yt=nr(t.firstChild),on=r,$e=!0,Xa=null,er=!0,s=Kg(r,null,o,s),r.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ts(),o===h){r=ya(t,r,s);break e}cn(t,r,o,s)}r=r.child}return r;case 26:return Sc(t,r),t===null?(s=hb(r.type,null,r.pendingProps,null))?r.memoizedState=s:$e||(s=r.type,t=r.pendingProps,o=Hc(ke.current).createElement(s),o[Ut]=r,o[Wt]=t,dn(o,s,t),Bt(o),r.stateNode=o):r.memoizedState=hb(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ar(r),t===null&&$e&&(o=r.stateNode=ub(r.type,r.pendingProps,ke.current),on=r,er=!0,h=yt,oi(r.type)?(Wf=h,yt=nr(o.firstChild)):yt=h),cn(t,r,r.pendingProps.children,s),Sc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&$e&&((h=o=yt)&&(o=Tw(o,r.type,r.pendingProps,er),o!==null?(r.stateNode=o,on=r,yt=nr(o.firstChild),er=!1,h=!0):h=!1),h||Qa(r)),Ar(r),h=r.type,f=r.pendingProps,_=t!==null?t.memoizedProps:null,o=f.children,Qf(h,f)?o=null:_!==null&&Qf(h,_)&&(r.flags|=32),r.memoizedState!==null&&(h=Kh(t,r,z1,null,null,s),Bo._currentValue=h),Sc(t,r),cn(t,r,o,s),r.child;case 6:return t===null&&$e&&((t=s=yt)&&(s=Aw(s,r.pendingProps,er),s!==null?(r.stateNode=s,on=r,yt=null,t=!0):t=!1),t||Qa(r)),null;case 13:return J0(t,r,s);case 4:return Ot(r,r.stateNode.containerInfo),o=r.pendingProps,t===null?r.child=ls(r,null,o,s):cn(t,r,o,s),r.child;case 11:return H0(t,r,r.type,r.pendingProps,s);case 7:return cn(t,r,r.pendingProps,s),r.child;case 8:return cn(t,r,r.pendingProps.children,s),r.child;case 12:return cn(t,r,r.pendingProps.children,s),r.child;case 10:return o=r.pendingProps,$a(r,r.type,o.value),cn(t,r,o.children,s),r.child;case 9:return h=r.type._context,o=r.pendingProps.children,rs(r),h=un(h),o=o(h),r.flags|=1,cn(t,r,o,s),r.child;case 14:return F0(t,r,r.type,r.pendingProps,s);case 15:return G0(t,r,r.type,r.pendingProps,s);case 19:return ey(t,r,s);case 31:return X1(t,r,s);case 22:return K0(t,r,s,r.pendingProps);case 24:return rs(r),o=un(Ht),t===null?(h=Vh(),h===null&&(h=mt,f=Oh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=s),h=f),r.memoizedState={parent:o,cache:h},Lh(r),$a(r,Ht,h)):((t.lanes&s)!==0&&(zh(t,r),xo(r,null,null,s),vo()),h=t.memoizedState,f=r.memoizedState,h.parent!==o?(h={parent:o,cache:o},r.memoizedState=h,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=h),$a(r,Ht,o)):(o=f.cache,$a(r,Ht,o),o!==h.cache&&jh(r,[Ht],s,!0))),cn(t,r,r.pendingProps.children,s),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ba(t){t.flags|=4}function xf(t,r,s,o,h){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(ky())t.flags|=8192;else throw ss=dc,Ph}else t.flags&=-16777217}function ny(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yb(r))if(ky())t.flags|=8192;else throw ss=dc,Ph}function kc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ou():536870912,t.lanes|=r,al|=r)}function No(t,r){if(!$e)switch(t.tailMode){case"hidden":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function bt(t){var r=t.alternate!==null&&t.alternate.child===t.child,s=0,o=0;if(r)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=s,r}function $1(t,r,s){var o=r.pendingProps;switch(kh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(r),null;case 1:return bt(r),null;case 3:return s=r.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),ma(Ht),ft(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Gs(r)?ba(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ch())),bt(r),null;case 26:var h=r.type,f=r.memoizedState;return t===null?(ba(r),f!==null?(bt(r),ny(r,f)):(bt(r),xf(r,h,null,o,s))):f?f!==t.memoizedState?(ba(r),bt(r),ny(r,f)):(bt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==o&&ba(r),bt(r),xf(r,h,t,o,s)),null;case 27:if(lr(r),s=ke.current,h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==o&&ba(r);else{if(!o){if(r.stateNode===null)throw Error(i(166));return bt(r),null}t=de.current,Gs(r)?Mg(r):(t=ub(h,o,s),r.stateNode=t,ba(r))}return bt(r),null;case 5:if(lr(r),h=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==o&&ba(r);else{if(!o){if(r.stateNode===null)throw Error(i(166));return bt(r),null}if(f=de.current,Gs(r))Mg(r);else{var _=Hc(ke.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}f[Ut]=r,f[Wt]=o;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=f;e:switch(dn(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ba(r)}}return bt(r),xf(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,s),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==o&&ba(r);else{if(typeof o!="string"&&r.stateNode===null)throw Error(i(166));if(t=ke.current,Gs(r)){if(t=r.stateNode,s=r.memoizedProps,o=null,h=on,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Ut]=r,t=!!(t.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||Jy(t.nodeValue,s)),t||Qa(r,!0)}else t=Hc(t).createTextNode(o),t[Ut]=r,r.stateNode=t}return bt(r),null;case 31:if(s=r.memoizedState,t===null||t.memoizedState!==null){if(o=Gs(r),s!==null){if(t===null){if(!o)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Ut]=r}else ts(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;bt(r),t=!1}else s=Ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return r.flags&256?(zn(r),r):(zn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return bt(r),null;case 13:if(o=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Gs(r),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=r.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Ut]=r}else ts(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;bt(r),h=!1}else h=Ch(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return r.flags&256?(zn(r),r):(zn(r),null)}return zn(r),(r.flags&128)!==0?(r.lanes=s,r):(s=o!==null,t=t!==null&&t.memoizedState!==null,s&&(o=r.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),s!==t&&s&&(r.child.flags|=8192),kc(r,r.updateQueue),bt(r),null);case 4:return ft(),t===null&&Hf(r.stateNode.containerInfo),bt(r),null;case 10:return ma(r.type),bt(r),null;case 19:if(J(Vt),o=r.memoizedState,o===null)return bt(r),null;if(h=(r.flags&128)!==0,f=o.rendering,f===null)if(h)No(o,!1);else{if(jt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=pc(t),f!==null){for(r.flags|=128,No(o,!1),t=f.updateQueue,r.updateQueue=t,kc(r,t),r.subtreeFlags=0,t=s,s=r.child;s!==null;)Cg(s,t),s=s.sibling;return le(Vt,Vt.current&1|2),$e&&ha(r,o.treeForkCount),r.child}t=t.sibling}o.tail!==null&&ue()>jc&&(r.flags|=128,h=!0,No(o,!1),r.lanes=4194304)}else{if(!h)if(t=pc(f),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,kc(r,t),No(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!$e)return bt(r),null}else 2*ue()-o.renderingStartTime>jc&&s!==536870912&&(r.flags|=128,h=!0,No(o,!1),r.lanes=4194304);o.isBackwards?(f.sibling=r.child,r.child=f):(t=o.last,t!==null?t.sibling=f:r.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ue(),t.sibling=null,s=Vt.current,le(Vt,h?s&1|2:s&1),$e&&ha(r,o.treeForkCount),t):(bt(r),null);case 22:case 23:return zn(r),Hh(),o=r.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(r.flags|=8192):o&&(r.flags|=8192),o?(s&536870912)!==0&&(r.flags&128)===0&&(bt(r),r.subtreeFlags&6&&(r.flags|=8192)):bt(r),s=r.updateQueue,s!==null&&kc(r,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==s&&(r.flags|=2048),t!==null&&J(as),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),r.memoizedState.cache!==s&&(r.flags|=2048),ma(Ht),bt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Y1(t,r){switch(kh(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ma(Ht),ft(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return lr(r),null;case 31:if(r.memoizedState!==null){if(zn(r),r.alternate===null)throw Error(i(340));ts()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(zn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));ts()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return J(Vt),null;case 4:return ft(),null;case 10:return ma(r.type),null;case 22:case 23:return zn(r),Hh(),t!==null&&J(as),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ma(Ht),null;case 25:return null;default:return null}}function ry(t,r){switch(kh(r),r.tag){case 3:ma(Ht),ft();break;case 26:case 27:case 5:lr(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&zn(r);break;case 13:zn(r);break;case 19:J(Vt);break;case 10:ma(r.type);break;case 22:case 23:zn(r),Hh(),t!==null&&J(as);break;case 24:ma(Ht)}}function ko(t,r){try{var s=r.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var h=o.next;s=h;do{if((s.tag&t)===t){o=void 0;var f=s.create,_=s.inst;o=f(),_.destroy=o}s=s.next}while(s!==h)}}catch(w){ot(r,r.return,w)}}function ti(t,r,s){try{var o=r.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var _=o.inst,w=_.destroy;if(w!==void 0){_.destroy=void 0,h=r;var C=s,q=w;try{q()}catch(Q){ot(h,C,Q)}}}o=o.next}while(o!==f)}}catch(Q){ot(r,r.return,Q)}}function ay(t){var r=t.updateQueue;if(r!==null){var s=t.stateNode;try{Qg(r,s)}catch(o){ot(t,t.return,o)}}}function iy(t,r,s){s.props=us(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(o){ot(t,r,o)}}function Ro(t,r){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof s=="function"?t.refCleanup=s(o):s.current=o}}catch(h){ot(t,r,h)}}function Gr(t,r){var s=t.ref,o=t.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(h){ot(t,r,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){ot(t,r,h)}else s.current=null}function sy(t){var r=t.type,s=t.memoizedProps,o=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(h){ot(t,t.return,h)}}function Ef(t,r,s){try{var o=t.stateNode;bw(o,t.type,s,r),o[Wt]=r}catch(h){ot(t,t.return,h)}}function ly(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&oi(t.type)||t.tag===4}function wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&oi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tf(t,r,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,r):(r=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,r.appendChild(t),s=s._reactRootContainer,s!=null||r.onclick!==null||(r.onclick=hr));else if(o!==4&&(o===27&&oi(t.type)&&(s=t.stateNode,r=null),t=t.child,t!==null))for(Tf(t,r,s),t=t.sibling;t!==null;)Tf(t,r,s),t=t.sibling}function Rc(t,r,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?s.insertBefore(t,r):s.appendChild(t);else if(o!==4&&(o===27&&oi(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Rc(t,r,s),t=t.sibling;t!==null;)Rc(t,r,s),t=t.sibling}function oy(t){var r=t.stateNode,s=t.memoizedProps;try{for(var o=t.type,h=r.attributes;h.length;)r.removeAttributeNode(h[0]);dn(r,o,s),r[Ut]=t,r[Wt]=s}catch(f){ot(t,t.return,f)}}var _a=!1,Kt=!1,Af=!1,uy=typeof WeakSet=="function"?WeakSet:Set,tn=null;function Z1(t,r){if(t=t.containerInfo,Kf=Yc,t=xg(t),yh(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var _=0,w=-1,C=-1,q=0,Q=0,W=t,H=null;t:for(;;){for(var K;W!==s||h!==0&&W.nodeType!==3||(w=_+h),W!==f||o!==0&&W.nodeType!==3||(C=_+o),W.nodeType===3&&(_+=W.nodeValue.length),(K=W.firstChild)!==null;)H=W,W=K;for(;;){if(W===t)break t;if(H===s&&++q===h&&(w=_),H===f&&++Q===o&&(C=_),(K=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=K}s=w===-1||C===-1?null:{start:w,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(Xf={focusedElem:t,selectionRange:s},Yc=!1,tn=r;tn!==null;)if(r=tn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,tn=t;else for(;tn!==null;){switch(r=tn,f=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)h=t[s],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,s=r,h=f.memoizedProps,f=f.memoizedState,o=s.stateNode;try{var fe=us(s.type,h);t=o.getSnapshotBeforeUpdate(fe,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(xe){ot(s,s.return,xe)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,s=t.nodeType,s===9)Yf(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,tn=t;break}tn=r.return}}function cy(t,r,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:xa(t,s),o&4&&ko(5,s);break;case 1:if(xa(t,s),o&4)if(t=s.stateNode,r===null)try{t.componentDidMount()}catch(_){ot(s,s.return,_)}else{var h=us(s.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(h,r,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ot(s,s.return,_)}}o&64&&ay(s),o&512&&Ro(s,s.return);break;case 3:if(xa(t,s),o&64&&(t=s.updateQueue,t!==null)){if(r=null,s.child!==null)switch(s.child.tag){case 27:case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}try{Qg(t,r)}catch(_){ot(s,s.return,_)}}break;case 27:r===null&&o&4&&oy(s);case 26:case 5:xa(t,s),r===null&&o&4&&sy(s),o&512&&Ro(s,s.return);break;case 12:xa(t,s);break;case 31:xa(t,s),o&4&&fy(t,s);break;case 13:xa(t,s),o&4&&my(t,s),o&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=sw.bind(null,s),Sw(t,s))));break;case 22:if(o=s.memoizedState!==null||_a,!o){r=r!==null&&r.memoizedState!==null||Kt,h=_a;var f=Kt;_a=o,(Kt=r)&&!f?Ea(t,s,(s.subtreeFlags&8772)!==0):xa(t,s),_a=h,Kt=f}break;case 30:break;default:xa(t,s)}}function dy(t){var r=t.alternate;r!==null&&(t.alternate=null,dy(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ks(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var wt=null,Sn=!1;function va(t,r,s){for(s=s.child;s!==null;)hy(t,r,s),s=s.sibling}function hy(t,r,s){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(vn,s)}catch{}switch(s.tag){case 26:Kt||Gr(s,r),va(t,r,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Kt||Gr(s,r);var o=wt,h=Sn;oi(s.type)&&(wt=s.stateNode,Sn=!1),va(t,r,s),Lo(s.stateNode),wt=o,Sn=h;break;case 5:Kt||Gr(s,r);case 6:if(o=wt,h=Sn,wt=null,va(t,r,s),wt=o,Sn=h,wt!==null)if(Sn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(s.stateNode)}catch(f){ot(s,r,f)}else try{wt.removeChild(s.stateNode)}catch(f){ot(s,r,f)}break;case 18:wt!==null&&(Sn?(t=wt,ab(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),hl(t)):ab(wt,s.stateNode));break;case 4:o=wt,h=Sn,wt=s.stateNode.containerInfo,Sn=!0,va(t,r,s),wt=o,Sn=h;break;case 0:case 11:case 14:case 15:ti(2,s,r),Kt||ti(4,s,r),va(t,r,s);break;case 1:Kt||(Gr(s,r),o=s.stateNode,typeof o.componentWillUnmount=="function"&&iy(s,r,o)),va(t,r,s);break;case 21:va(t,r,s);break;case 22:Kt=(o=Kt)||s.memoizedState!==null,va(t,r,s),Kt=o;break;default:va(t,r,s)}}function fy(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{hl(t)}catch(s){ot(r,r.return,s)}}}function my(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{hl(t)}catch(s){ot(r,r.return,s)}}function J1(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new uy),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new uy),r;default:throw Error(i(435,t.tag))}}function Cc(t,r){var s=J1(t);r.forEach(function(o){if(!s.has(o)){s.add(o);var h=lw.bind(null,t,o);o.then(h,h)}})}function Nn(t,r){var s=r.deletions;if(s!==null)for(var o=0;o<s.length;o++){var h=s[o],f=t,_=r,w=_;e:for(;w!==null;){switch(w.tag){case 27:if(oi(w.type)){wt=w.stateNode,Sn=!1;break e}break;case 5:wt=w.stateNode,Sn=!1;break e;case 3:case 4:wt=w.stateNode.containerInfo,Sn=!0;break e}w=w.return}if(wt===null)throw Error(i(160));hy(f,_,h),wt=null,Sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)py(r,t),r=r.sibling}var br=null;function py(t,r){var s=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nn(r,t),kn(t),o&4&&(ti(3,t,t.return),ko(3,t),ti(5,t,t.return));break;case 1:Nn(r,t),kn(t),o&512&&(Kt||s===null||Gr(s,s.return)),o&64&&_a&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var h=br;if(Nn(r,t),kn(t),o&512&&(Kt||s===null||Gr(s,s.return)),o&4){var f=s!==null?s.memoizedState:null;if(o=t.memoizedState,s===null)if(o===null)if(t.stateNode===null){e:{o=t.type,s=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ir]||f[Ut]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),dn(f,o,s),f[Ut]=t,Bt(f),o=f;break e;case"link":var _=pb("link","href",h).get(o+(s.href||""));if(_){for(var w=0;w<_.length;w++)if(f=_[w],f.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&f.getAttribute("rel")===(s.rel==null?null:s.rel)&&f.getAttribute("title")===(s.title==null?null:s.title)&&f.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){_.splice(w,1);break t}}f=h.createElement(o),dn(f,o,s),h.head.appendChild(f);break;case"meta":if(_=pb("meta","content",h).get(o+(s.content||""))){for(w=0;w<_.length;w++)if(f=_[w],f.getAttribute("content")===(s.content==null?null:""+s.content)&&f.getAttribute("name")===(s.name==null?null:s.name)&&f.getAttribute("property")===(s.property==null?null:s.property)&&f.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&f.getAttribute("charset")===(s.charSet==null?null:s.charSet)){_.splice(w,1);break t}}f=h.createElement(o),dn(f,o,s),h.head.appendChild(f);break;default:throw Error(i(468,o))}f[Ut]=t,Bt(f),o=f}t.stateNode=o}else gb(h,t.type,t.stateNode);else t.stateNode=mb(h,o,t.memoizedProps);else f!==o?(f===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):f.count--,o===null?gb(h,t.type,t.stateNode):mb(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Ef(t,t.memoizedProps,s.memoizedProps)}break;case 27:Nn(r,t),kn(t),o&512&&(Kt||s===null||Gr(s,s.return)),s!==null&&o&4&&Ef(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Nn(r,t),kn(t),o&512&&(Kt||s===null||Gr(s,s.return)),t.flags&32){h=t.stateNode;try{An(h,"")}catch(fe){ot(t,t.return,fe)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Ef(t,h,s!==null?s.memoizedProps:h)),o&1024&&(Af=!0);break;case 6:if(Nn(r,t),kn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,s=t.stateNode;try{s.nodeValue=o}catch(fe){ot(t,t.return,fe)}}break;case 3:if(Kc=null,h=br,br=Fc(r.containerInfo),Nn(r,t),br=h,kn(t),o&4&&s!==null&&s.memoizedState.isDehydrated)try{hl(r.containerInfo)}catch(fe){ot(t,t.return,fe)}Af&&(Af=!1,gy(t));break;case 4:o=br,br=Fc(t.stateNode.containerInfo),Nn(r,t),kn(t),br=o;break;case 12:Nn(r,t),kn(t);break;case 31:Nn(r,t),kn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Cc(t,o)));break;case 13:Nn(r,t),kn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Dc=ue()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Cc(t,o)));break;case 22:h=t.memoizedState!==null;var C=s!==null&&s.memoizedState!==null,q=_a,Q=Kt;if(_a=q||h,Kt=Q||C,Nn(r,t),Kt=Q,_a=q,kn(t),o&8192)e:for(r=t.stateNode,r._visibility=h?r._visibility&-2:r._visibility|1,h&&(s===null||C||_a||Kt||cs(t)),s=null,r=t;;){if(r.tag===5||r.tag===26){if(s===null){C=s=r;try{if(f=C.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{w=C.stateNode;var W=C.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;w.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(fe){ot(C,C.return,fe)}}}else if(r.tag===6){if(s===null){C=r;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(fe){ot(C,C.return,fe)}}}else if(r.tag===18){if(s===null){C=r;try{var K=C.stateNode;h?ib(K,!0):ib(C.stateNode,!1)}catch(fe){ot(C,C.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;s===r&&(s=null),r=r.return}s===r&&(s=null),r.sibling.return=r.return,r=r.sibling}o&4&&(o=t.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Cc(t,s))));break;case 19:Nn(r,t),kn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Cc(t,o)));break;case 30:break;case 21:break;default:Nn(r,t),kn(t)}}function kn(t){var r=t.flags;if(r&2){try{for(var s,o=t.return;o!==null;){if(ly(o)){s=o;break}o=o.return}if(s==null)throw Error(i(160));switch(s.tag){case 27:var h=s.stateNode,f=wf(t);Rc(t,f,h);break;case 5:var _=s.stateNode;s.flags&32&&(An(_,""),s.flags&=-33);var w=wf(t);Rc(t,w,_);break;case 3:case 4:var C=s.stateNode.containerInfo,q=wf(t);Tf(t,q,C);break;default:throw Error(i(161))}}catch(Q){ot(t,t.return,Q)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function gy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;gy(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function xa(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)cy(t,r.alternate,r),r=r.sibling}function cs(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ti(4,r,r.return),cs(r);break;case 1:Gr(r,r.return);var s=r.stateNode;typeof s.componentWillUnmount=="function"&&iy(r,r.return,s),cs(r);break;case 27:Lo(r.stateNode);case 26:case 5:Gr(r,r.return),cs(r);break;case 22:r.memoizedState===null&&cs(r);break;case 30:cs(r);break;default:cs(r)}t=t.sibling}}function Ea(t,r,s){for(s=s&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var o=r.alternate,h=t,f=r,_=f.flags;switch(f.tag){case 0:case 11:case 15:Ea(h,f,s),ko(4,f);break;case 1:if(Ea(h,f,s),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){ot(o,o.return,q)}if(o=f,h=o.updateQueue,h!==null){var w=o.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Xg(C[h],w)}catch(q){ot(o,o.return,q)}}s&&_&64&&ay(f),Ro(f,f.return);break;case 27:oy(f);case 26:case 5:Ea(h,f,s),s&&o===null&&_&4&&sy(f),Ro(f,f.return);break;case 12:Ea(h,f,s);break;case 31:Ea(h,f,s),s&&_&4&&fy(h,f);break;case 13:Ea(h,f,s),s&&_&4&&my(h,f);break;case 22:f.memoizedState===null&&Ea(h,f,s),Ro(f,f.return);break;case 30:break;default:Ea(h,f,s)}r=r.sibling}}function Sf(t,r){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&po(s))}function Nf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&po(t))}function _r(t,r,s,o){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yy(t,r,s,o),r=r.sibling}function yy(t,r,s,o){var h=r.flags;switch(r.tag){case 0:case 11:case 15:_r(t,r,s,o),h&2048&&ko(9,r);break;case 1:_r(t,r,s,o);break;case 3:_r(t,r,s,o),h&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&po(t)));break;case 12:if(h&2048){_r(t,r,s,o),t=r.stateNode;try{var f=r.memoizedProps,_=f.id,w=f.onPostCommit;typeof w=="function"&&w(_,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){ot(r,r.return,C)}}else _r(t,r,s,o);break;case 31:_r(t,r,s,o);break;case 13:_r(t,r,s,o);break;case 23:break;case 22:f=r.stateNode,_=r.alternate,r.memoizedState!==null?f._visibility&2?_r(t,r,s,o):Co(t,r):f._visibility&2?_r(t,r,s,o):(f._visibility|=2,tl(t,r,s,o,(r.subtreeFlags&10256)!==0||!1)),h&2048&&Sf(_,r);break;case 24:_r(t,r,s,o),h&2048&&Nf(r.alternate,r);break;default:_r(t,r,s,o)}}function tl(t,r,s,o,h){for(h=h&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var f=t,_=r,w=s,C=o,q=_.flags;switch(_.tag){case 0:case 11:case 15:tl(f,_,w,C,h),ko(8,_);break;case 23:break;case 22:var Q=_.stateNode;_.memoizedState!==null?Q._visibility&2?tl(f,_,w,C,h):Co(f,_):(Q._visibility|=2,tl(f,_,w,C,h)),h&&q&2048&&Sf(_.alternate,_);break;case 24:tl(f,_,w,C,h),h&&q&2048&&Nf(_.alternate,_);break;default:tl(f,_,w,C,h)}r=r.sibling}}function Co(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var s=t,o=r,h=o.flags;switch(o.tag){case 22:Co(s,o),h&2048&&Sf(o.alternate,o);break;case 24:Co(s,o),h&2048&&Nf(o.alternate,o);break;default:Co(s,o)}r=r.sibling}}var Io=8192;function nl(t,r,s){if(t.subtreeFlags&Io)for(t=t.child;t!==null;)by(t,r,s),t=t.sibling}function by(t,r,s){switch(t.tag){case 26:nl(t,r,s),t.flags&Io&&t.memoizedState!==null&&Lw(s,br,t.memoizedState,t.memoizedProps);break;case 5:nl(t,r,s);break;case 3:case 4:var o=br;br=Fc(t.stateNode.containerInfo),nl(t,r,s),br=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Io,Io=16777216,nl(t,r,s),Io=o):nl(t,r,s));break;default:nl(t,r,s)}}function _y(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Do(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var o=r[s];tn=o,xy(o,t)}_y(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vy(t),t=t.sibling}function vy(t){switch(t.tag){case 0:case 11:case 15:Do(t),t.flags&2048&&ti(9,t,t.return);break;case 3:Do(t);break;case 12:Do(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Ic(t)):Do(t);break;default:Do(t)}}function Ic(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var s=0;s<r.length;s++){var o=r[s];tn=o,xy(o,t)}_y(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ti(8,r,r.return),Ic(r);break;case 22:s=r.stateNode,s._visibility&2&&(s._visibility&=-3,Ic(r));break;default:Ic(r)}t=t.sibling}}function xy(t,r){for(;tn!==null;){var s=tn;switch(s.tag){case 0:case 11:case 15:ti(8,s,r);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:po(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,tn=o;else e:for(s=t;tn!==null;){o=tn;var h=o.sibling,f=o.return;if(dy(o),o===s){tn=null;break e}if(h!==null){h.return=f,tn=h;break e}tn=f}}}var W1={getCacheForType:function(t){var r=un(Ht),s=r.data.get(t);return s===void 0&&(s=t(),r.data.set(t,s)),s},cacheSignal:function(){return un(Ht).controller.signal}},ew=typeof WeakMap=="function"?WeakMap:Map,tt=0,mt=null,Ue=null,Fe=0,lt=0,Un=null,ni=!1,rl=!1,kf=!1,wa=0,jt=0,ri=0,ds=0,Rf=0,Bn=0,al=0,jo=null,Rn=null,Cf=!1,Dc=0,Ey=0,jc=1/0,Oc=null,ai=null,Zt=0,ii=null,il=null,Ta=0,If=0,Df=null,wy=null,Oo=0,jf=null;function qn(){return(tt&2)!==0&&Fe!==0?Fe&-Fe:X.T!==null?zf():Mu()}function Ty(){if(Bn===0)if((Fe&536870912)===0||$e){var t=sn;sn<<=1,(sn&3932160)===0&&(sn=262144),Bn=t}else Bn=536870912;return t=Ln.current,t!==null&&(t.flags|=32),Bn}function Cn(t,r,s){(t===mt&&(lt===2||lt===9)||t.cancelPendingCommit!==null)&&(sl(t,0),si(t,Fe,Bn,!1)),zi(t,s),((tt&2)===0||t!==mt)&&(t===mt&&((tt&2)===0&&(ds|=s),jt===4&&si(t,Fe,Bn,!1)),Kr(t))}function Ay(t,r,s){if((tt&6)!==0)throw Error(i(327));var o=!s&&(r&127)===0&&(r&t.expiredLanes)===0||ur(t,r),h=o?rw(t,r):Mf(t,r,!0),f=o;do{if(h===0){rl&&!o&&si(t,r,0,!1);break}else{if(s=t.current.alternate,f&&!tw(s)){h=Mf(t,r,!1),f=!1;continue}if(h===2){if(f=r,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var w=t;h=jo;var C=w.current.memoizedState.isDehydrated;if(C&&(sl(w,_).flags|=256),_=Mf(w,_,!1),_!==2){if(kf&&!C){w.errorRecoveryDisabledLanes|=f,ds|=f,h=4;break e}f=Rn,Rn=h,f!==null&&(Rn===null?Rn=f:Rn.push.apply(Rn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){sl(t,0),si(t,r,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:si(o,r,Bn,!ni);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(h=Dc+300-ue(),10<h)){if(si(o,r,Bn,!ni),kr(o,0,!0)!==0)break e;Ta=r,o.timeoutHandle=nb(Sy.bind(null,o,s,Rn,Oc,Cf,r,Bn,ds,al,ni,f,"Throttled",-0,0),h);break e}Sy(o,s,Rn,Oc,Cf,r,Bn,ds,al,ni,f,null,-0,0)}}break}while(!0);Kr(t)}function Sy(t,r,s,o,h,f,_,w,C,q,Q,W,H,K){if(t.timeoutHandle=-1,W=r.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hr},by(r,f,W);var fe=(f&62914560)===f?Dc-ue():(f&4194048)===f?Ey-ue():0;if(fe=zw(W,fe),fe!==null){Ta=f,t.cancelPendingCommit=fe(Oy.bind(null,t,r,f,s,o,h,_,w,C,Q,W,null,H,K)),si(t,f,_,!q);return}}Oy(t,r,f,s,o,h,_,w,C)}function tw(t){for(var r=t;;){var s=r.tag;if((s===0||s===11||s===15)&&r.flags&16384&&(s=r.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var h=s[o],f=h.getSnapshot;h=h.value;try{if(!Vn(f(),h))return!1}catch{return!1}}if(s=r.child,r.subtreeFlags&16384&&s!==null)s.return=r,r=s;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function si(t,r,s,o){r&=~Rf,r&=~ds,t.suspendedLanes|=r,t.pingedLanes&=~r,o&&(t.warmLanes|=r),o=t.expirationTimes;for(var h=r;0<h;){var f=31-ge(h),_=1<<f;o[f]=-1,h&=~_}s!==0&&Ui(t,s,r)}function Mc(){return(tt&6)===0?(Mo(0),!1):!0}function Of(){if(Ue!==null){if(lt===0)var t=Ue.return;else t=Ue,fa=ns=null,$h(t),Ys=null,yo=0,t=Ue;for(;t!==null;)ry(t.alternate,t),t=t.return;Ue=null}}function sl(t,r){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,xw(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Ta=0,Of(),mt=t,Ue=s=da(t.current,null),Fe=r,lt=0,Un=null,ni=!1,rl=ur(t,r),kf=!1,al=Bn=Rf=ds=ri=jt=0,Rn=jo=null,Cf=!1,(r&8)!==0&&(r|=r&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=r;0<o;){var h=31-ge(o),f=1<<h;r|=t[h],o&=~f}return wa=r,nc(),s}function Ny(t,r){Ve=null,X.H=Ao,r===$s||r===cc?(r=Hg(),lt=3):r===Ph?(r=Hg(),lt=4):lt=r===hf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,Ue===null&&(jt=1,Tc(t,Zn(r,t.current)))}function ky(){var t=Ln.current;return t===null?!0:(Fe&4194048)===Fe?tr===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?t===tr:!1}function Ry(){var t=X.H;return X.H=Ao,t===null?Ao:t}function Cy(){var t=X.A;return X.A=W1,t}function Vc(){jt=4,ni||(Fe&4194048)!==Fe&&Ln.current!==null||(rl=!0),(ri&134217727)===0&&(ds&134217727)===0||mt===null||si(mt,Fe,Bn,!1)}function Mf(t,r,s){var o=tt;tt|=2;var h=Ry(),f=Cy();(mt!==t||Fe!==r)&&(Oc=null,sl(t,r)),r=!1;var _=jt;e:do try{if(lt!==0&&Ue!==null){var w=Ue,C=Un;switch(lt){case 8:Of(),_=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var q=lt;if(lt=0,Un=null,ll(t,w,C,q),s&&rl){_=0;break e}break;default:q=lt,lt=0,Un=null,ll(t,w,C,q)}}nw(),_=jt;break}catch(Q){Ny(t,Q)}while(!0);return r&&t.shellSuspendCounter++,fa=ns=null,tt=o,X.H=h,X.A=f,Ue===null&&(mt=null,Fe=0,nc()),_}function nw(){for(;Ue!==null;)Iy(Ue)}function rw(t,r){var s=tt;tt|=2;var o=Ry(),h=Cy();mt!==t||Fe!==r?(Oc=null,jc=ue()+500,sl(t,r)):rl=ur(t,r);e:do try{if(lt!==0&&Ue!==null){r=Ue;var f=Un;t:switch(lt){case 1:lt=0,Un=null,ll(t,r,f,1);break;case 2:case 9:if(Bg(f)){lt=0,Un=null,Dy(r);break}r=function(){lt!==2&&lt!==9||mt!==t||(lt=7),Kr(t)},f.then(r,r);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:Bg(f)?(lt=0,Un=null,Dy(r)):(lt=0,Un=null,ll(t,r,f,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var w=Ue;if(_?yb(_):w.stateNode.complete){lt=0,Un=null;var C=w.sibling;if(C!==null)Ue=C;else{var q=w.return;q!==null?(Ue=q,Pc(q)):Ue=null}break t}}lt=0,Un=null,ll(t,r,f,5);break;case 6:lt=0,Un=null,ll(t,r,f,6);break;case 8:Of(),jt=6;break e;default:throw Error(i(462))}}aw();break}catch(Q){Ny(t,Q)}while(!0);return fa=ns=null,X.H=o,X.A=h,tt=s,Ue!==null?0:(mt=null,Fe=0,nc(),jt)}function aw(){for(;Ue!==null&&!Ss();)Iy(Ue)}function Iy(t){var r=ty(t.alternate,t,wa);t.memoizedProps=t.pendingProps,r===null?Pc(t):Ue=r}function Dy(t){var r=t,s=r.alternate;switch(r.tag){case 15:case 0:r=$0(s,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=$0(s,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:$h(r);default:ry(s,r),r=Ue=Cg(r,wa),r=ty(s,r,wa)}t.memoizedProps=t.pendingProps,r===null?Pc(t):Ue=r}function ll(t,r,s,o){fa=ns=null,$h(r),Ys=null,yo=0;var h=r.return;try{if(K1(t,h,r,s,Fe)){jt=1,Tc(t,Zn(s,t.current)),Ue=null;return}}catch(f){if(h!==null)throw Ue=h,f;jt=1,Tc(t,Zn(s,t.current)),Ue=null;return}r.flags&32768?($e||o===1?t=!0:rl||(Fe&536870912)!==0?t=!1:(ni=t=!0,(o===2||o===9||o===3||o===6)&&(o=Ln.current,o!==null&&o.tag===13&&(o.flags|=16384))),jy(r,t)):Pc(r)}function Pc(t){var r=t;do{if((r.flags&32768)!==0){jy(r,ni);return}t=r.return;var s=$1(r.alternate,r,wa);if(s!==null){Ue=s;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=t}while(r!==null);jt===0&&(jt=5)}function jy(t,r){do{var s=Y1(t.alternate,t);if(s!==null){s.flags&=32767,Ue=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!r&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=s}while(t!==null);jt=6,Ue=null}function Oy(t,r,s,o,h,f,_,w,C){t.cancelPendingCommit=null;do Lc();while(Zt!==0);if((tt&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(f=r.lanes|r.childLanes,f|=Eh,fh(t,s,f,_,w,C),t===mt&&(Ue=mt=null,Fe=0),il=r,ii=t,Ta=s,If=f,Df=h,wy=o,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ow(Ae,function(){return zy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||o){o=X.T,X.T=null,h=ie.p,ie.p=2,_=tt,tt|=4;try{Z1(t,r,s)}finally{tt=_,ie.p=h,X.T=o}}Zt=1,My(),Vy(),Py()}}function My(){if(Zt===1){Zt=0;var t=ii,r=il,s=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||s){s=X.T,X.T=null;var o=ie.p;ie.p=2;var h=tt;tt|=4;try{py(r,t);var f=Xf,_=xg(t.containerInfo),w=f.focusedElem,C=f.selectionRange;if(_!==w&&w&&w.ownerDocument&&vg(w.ownerDocument.documentElement,w)){if(C!==null&&yh(w)){var q=C.start,Q=C.end;if(Q===void 0&&(Q=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(Q,w.value.length);else{var W=w.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var K=H.getSelection(),fe=w.textContent.length,xe=Math.min(C.start,fe),ht=C.end===void 0?xe:Math.min(C.end,fe);!K.extend&&xe>ht&&(_=ht,ht=xe,xe=_);var P=_g(w,xe),M=_g(w,ht);if(P&&M&&(K.rangeCount!==1||K.anchorNode!==P.node||K.anchorOffset!==P.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var B=W.createRange();B.setStart(P.node,P.offset),K.removeAllRanges(),xe>ht?(K.addRange(B),K.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),K.addRange(B))}}}}for(W=[],K=w;K=K.parentNode;)K.nodeType===1&&W.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<W.length;w++){var Y=W[w];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Yc=!!Kf,Xf=Kf=null}finally{tt=h,ie.p=o,X.T=s}}t.current=r,Zt=2}}function Vy(){if(Zt===2){Zt=0;var t=ii,r=il,s=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||s){s=X.T,X.T=null;var o=ie.p;ie.p=2;var h=tt;tt|=4;try{cy(t,r.alternate,r)}finally{tt=h,ie.p=o,X.T=s}}Zt=3}}function Py(){if(Zt===4||Zt===3){Zt=0,re();var t=ii,r=il,s=Ta,o=wy;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Zt=5:(Zt=0,il=ii=null,Ly(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ai=null),la(s),r=r.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(vn,r,void 0,(r.current.flags&128)===128)}catch{}if(o!==null){r=X.T,h=ie.p,ie.p=2,X.T=null;try{for(var f=t.onRecoverableError,_=0;_<o.length;_++){var w=o[_];f(w.value,{componentStack:w.stack})}}finally{X.T=r,ie.p=h}}(Ta&3)!==0&&Lc(),Kr(t),h=t.pendingLanes,(s&261930)!==0&&(h&42)!==0?t===jf?Oo++:(Oo=0,jf=t):Oo=0,Mo(0)}}function Ly(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,po(r)))}function Lc(){return My(),Vy(),Py(),zy()}function zy(){if(Zt!==5)return!1;var t=ii,r=If;If=0;var s=la(Ta),o=X.T,h=ie.p;try{ie.p=32>s?32:s,X.T=null,s=Df,Df=null;var f=ii,_=Ta;if(Zt=0,il=ii=null,Ta=0,(tt&6)!==0)throw Error(i(331));var w=tt;if(tt|=4,vy(f.current),yy(f,f.current,_,s),tt=w,Mo(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(vn,f)}catch{}return!0}finally{ie.p=h,X.T=o,Ly(t,r)}}function Uy(t,r,s){r=Zn(s,r),r=df(t.stateNode,r,2),t=Ja(t,r,2),t!==null&&(zi(t,2),Kr(t))}function ot(t,r,s){if(t.tag===3)Uy(t,t,s);else for(;r!==null;){if(r.tag===3){Uy(r,t,s);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ai===null||!ai.has(o))){t=Zn(s,t),s=B0(2),o=Ja(r,s,2),o!==null&&(q0(s,o,r,t),zi(o,2),Kr(o));break}}r=r.return}}function Vf(t,r,s){var o=t.pingCache;if(o===null){o=t.pingCache=new ew;var h=new Set;o.set(r,h)}else h=o.get(r),h===void 0&&(h=new Set,o.set(r,h));h.has(s)||(kf=!0,h.add(s),t=iw.bind(null,t,r,s),r.then(t,t))}function iw(t,r,s){var o=t.pingCache;o!==null&&o.delete(r),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,mt===t&&(Fe&s)===s&&(jt===4||jt===3&&(Fe&62914560)===Fe&&300>ue()-Dc?(tt&2)===0&&sl(t,0):Rf|=s,al===Fe&&(al=0)),Kr(t)}function By(t,r){r===0&&(r=Ou()),t=Wi(t,r),t!==null&&(zi(t,r),Kr(t))}function sw(t){var r=t.memoizedState,s=0;r!==null&&(s=r.retryLane),By(t,s)}function lw(t,r){var s=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(r),By(t,s)}function ow(t,r){return St(t,r)}var zc=null,ol=null,Pf=!1,Uc=!1,Lf=!1,li=0;function Kr(t){t!==ol&&t.next===null&&(ol===null?zc=ol=t:ol=ol.next=t),Uc=!0,Pf||(Pf=!0,cw())}function Mo(t,r){if(!Lf&&Uc){Lf=!0;do for(var s=!1,o=zc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var _=o.suspendedLanes,w=o.pingedLanes;f=(1<<31-ge(42|t)+1)-1,f&=h&~(_&~w),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(s=!0,Gy(o,f))}else f=Fe,f=kr(o,o===mt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||ur(o,f)||(s=!0,Gy(o,f));o=o.next}while(s);Lf=!1}}function uw(){qy()}function qy(){Uc=Pf=!1;var t=0;li!==0&&vw()&&(t=li);for(var r=ue(),s=null,o=zc;o!==null;){var h=o.next,f=Hy(o,r);f===0?(o.next=null,s===null?zc=h:s.next=h,h===null&&(ol=s)):(s=o,(t!==0||(f&3)!==0)&&(Uc=!0)),o=h}Zt!==0&&Zt!==5||Mo(t),li!==0&&(li=0)}function Hy(t,r){for(var s=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-ge(f),w=1<<_,C=h[_];C===-1?((w&s)===0||(w&o)!==0)&&(h[_]=hh(w,r)):C<=r&&(t.expiredLanes|=w),f&=~w}if(r=mt,s=Fe,s=kr(t,t===r?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,s===0||t===r&&(lt===2||lt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Gn(o),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||ur(t,s)){if(r=s&-s,r===t.callbackPriority)return r;switch(o!==null&&Gn(o),la(s)){case 2:case 8:s=je;break;case 32:s=Ae;break;case 268435456:s=vt;break;default:s=Ae}return o=Fy.bind(null,t),s=St(s,o),t.callbackPriority=r,t.callbackNode=s,r}return o!==null&&o!==null&&Gn(o),t.callbackPriority=2,t.callbackNode=null,2}function Fy(t,r){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Lc()&&t.callbackNode!==s)return null;var o=Fe;return o=kr(t,t===mt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Ay(t,o,r),Hy(t,ue()),t.callbackNode!=null&&t.callbackNode===s?Fy.bind(null,t):null)}function Gy(t,r){if(Lc())return null;Ay(t,r,!0)}function cw(){Ew(function(){(tt&6)!==0?St(De,uw):qy()})}function zf(){if(li===0){var t=Xs;t===0&&(t=kt,kt<<=1,(kt&261888)===0&&(kt=256)),li=t}return li}function Ky(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ds(""+t)}function Xy(t,r){var s=r.ownerDocument.createElement("input");return s.name=r.name,s.value=r.value,t.id&&s.setAttribute("form",t.id),r.parentNode.insertBefore(s,r),t=new FormData(t),s.parentNode.removeChild(s),t}function dw(t,r,s,o,h){if(r==="submit"&&s&&s.stateNode===h){var f=Ky((h[Wt]||null).action),_=o.submitter;_&&(r=(r=_[Wt]||null)?Ky(r.formAction):_.getAttribute("formAction"),r!==null&&(f=r,_=null));var w=new zr("action","action",null,o,h);t.push({event:w,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(li!==0){var C=_?Xy(h,_):new FormData(h);af(s,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(w.preventDefault(),C=_?Xy(h,_):new FormData(h),af(s,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var Uf=0;Uf<xh.length;Uf++){var Bf=xh[Uf],hw=Bf.toLowerCase(),fw=Bf[0].toUpperCase()+Bf.slice(1);yr(hw,"on"+fw)}yr(Tg,"onAnimationEnd"),yr(Ag,"onAnimationIteration"),yr(Sg,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(R1,"onTransitionRun"),yr(C1,"onTransitionStart"),yr(I1,"onTransitionCancel"),yr(Ng,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Or("onBeforeInput",["compositionend","keypress","textInput","paste"]),Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vo));function Qy(t,r){r=(r&4)!==0;for(var s=0;s<t.length;s++){var o=t[s],h=o.event;o=o.listeners;e:{var f=void 0;if(r)for(var _=o.length-1;0<=_;_--){var w=o[_],C=w.instance,q=w.currentTarget;if(w=w.listener,C!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=q;try{f(h)}catch(Q){tc(Q)}h.currentTarget=null,f=C}else for(_=0;_<o.length;_++){if(w=o[_],C=w.instance,q=w.currentTarget,w=w.listener,C!==f&&h.isPropagationStopped())break e;f=w,h.currentTarget=q;try{f(h)}catch(Q){tc(Q)}h.currentTarget=null,f=C}}}}function Be(t,r){var s=r[Ns];s===void 0&&(s=r[Ns]=new Set);var o=t+"__bubble";s.has(o)||($y(r,t,2,!1),s.add(o))}function qf(t,r,s){var o=0;r&&(o|=4),$y(s,t,o,r)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Hf(t){if(!t[Bc]){t[Bc]=!0,Xl.forEach(function(s){s!=="selectionchange"&&(mw.has(s)||qf(s,!1,t),qf(s,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Bc]||(r[Bc]=!0,qf("selectionchange",!1,r))}}function $y(t,r,s,o){switch(Tb(r)){case 2:var h=qw;break;case 8:h=Hw;break;default:h=am}s=h.bind(null,r,s,t),h=void 0,!Gi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(r,s,{capture:!0,passive:h}):t.addEventListener(r,s,!0):h!==void 0?t.addEventListener(r,s,{passive:h}):t.addEventListener(r,s,!1)}function Ff(t,r,s,o,h){var f=o;if((r&1)===0&&(r&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var w=o.stateNode.containerInfo;if(w===h)break;if(_===4)for(_=o.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;w!==null;){if(_=Dr(w),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){o=f=_;continue e}w=w.parentNode}}o=o.return}qa(function(){var q=f,Q=Xn(s),W=[];e:{var H=kg.get(t);if(H!==void 0){var K=zr,fe=t;switch(t){case"keypress":if(Xi(s)===0)break e;case"keydown":case"keyup":K=Ju;break;case"focusin":fe="focus",K=$i;break;case"focusout":fe="blur",K=$i;break;case"beforeblur":case"afterblur":K=$i;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=so;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=b;break;case Tg:case Ag:case Sg:K=Gu;break;case Ng:K=T;break;case"scroll":case"scrollend":K=io;break;case"wheel":K=G;break;case"copy":case"cut":case"paste":K=Ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ca;break;case"toggle":case"beforetoggle":K=Me}var xe=(r&4)!==0,ht=!xe&&(t==="scroll"||t==="scrollend"),P=xe?H!==null?H+"Capture":null:H;xe=[];for(var M=q,B;M!==null;){var Y=M;if(B=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||B===null||P===null||(Y=fr(M,P),Y!=null&&xe.push(Po(M,Y,B))),ht)break;M=M.return}0<xe.length&&(H=new K(H,fe,null,s,Q),W.push({event:H,listeners:xe}))}}if((r&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",H&&s!==no&&(fe=s.relatedTarget||s.fromElement)&&(Dr(fe)||fe[Cr]))break e;if((K||H)&&(H=Q.window===Q?Q:(H=Q.ownerDocument)?H.defaultView||H.parentWindow:window,K?(fe=s.relatedTarget||s.toElement,K=q,fe=fe?Dr(fe):null,fe!==null&&(ht=u(fe),xe=fe.tag,fe!==ht||xe!==5&&xe!==27&&xe!==6)&&(fe=null)):(K=null,fe=q),K!==fe)){if(xe=so,Y="onMouseLeave",P="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(xe=ca,Y="onPointerLeave",P="onPointerEnter",M="pointer"),ht=K==null?H:On(K),B=fe==null?H:On(fe),H=new xe(Y,M+"leave",K,s,Q),H.target=ht,H.relatedTarget=B,Y=null,Dr(Q)===q&&(xe=new xe(P,M+"enter",fe,s,Q),xe.target=B,xe.relatedTarget=ht,Y=xe),ht=Y,K&&fe)t:{for(xe=pw,P=K,M=fe,B=0,Y=P;Y;Y=xe(Y))B++;Y=0;for(var be=M;be;be=xe(be))Y++;for(;0<B-Y;)P=xe(P),B--;for(;0<Y-B;)M=xe(M),Y--;for(;B--;){if(P===M||M!==null&&P===M.alternate){xe=P;break t}P=xe(P),M=xe(M)}xe=null}else xe=null;K!==null&&Yy(W,H,K,xe,!1),fe!==null&&ht!==null&&Yy(W,ht,fe,xe,!0)}}e:{if(H=q?On(q):window,K=H.nodeName&&H.nodeName.toLowerCase(),K==="select"||K==="input"&&H.type==="file")var Je=fg;else if(dg(H))if(mg)Je=S1;else{Je=T1;var ye=w1}else K=H.nodeName,!K||K.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&Is(q.elementType)&&(Je=fg):Je=A1;if(Je&&(Je=Je(t,q))){hg(W,Je,s,Q);break e}ye&&ye(t,H,q),t==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&Wl(H,"number",H.value)}switch(ye=q?On(q):window,t){case"focusin":(dg(ye)||ye.contentEditable==="true")&&(zs=ye,bh=q,ho=null);break;case"focusout":ho=bh=zs=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,Eg(W,s,Q);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":Eg(W,s,Q)}var Le;if(et)e:{switch(t){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Ls?Yi(t,s)&&(Ge="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Ge="onCompositionStart");Ge&&(qr&&s.locale!=="ko"&&(Ls||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Ls&&(Le=ao()):(Lr=Q,ro="value"in Lr?Lr.value:Lr.textContent,Ls=!0)),ye=qc(q,Ge),0<ye.length&&(Ge=new Br(Ge,t,null,s,Q),W.push({event:Ge,listeners:ye}),Le?Ge.data=Le:(Le=Ps(s),Le!==null&&(Ge.data=Le)))),(Le=$n?_1(t,s):v1(t,s))&&(Ge=qc(q,"onBeforeInput"),0<Ge.length&&(ye=new Br("onBeforeInput","beforeinput",null,s,Q),W.push({event:ye,listeners:Ge}),ye.data=Le)),dw(W,t,q,s,Q)}Qy(W,r)})}function Po(t,r,s){return{instance:t,listener:r,currentTarget:s}}function qc(t,r){for(var s=r+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=fr(t,s),h!=null&&o.unshift(Po(t,h,f)),h=fr(t,r),h!=null&&o.push(Po(t,h,f))),t.tag===3)return o;t=t.return}return[]}function pw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yy(t,r,s,o,h){for(var f=r._reactName,_=[];s!==null&&s!==o;){var w=s,C=w.alternate,q=w.stateNode;if(w=w.tag,C!==null&&C===o)break;w!==5&&w!==26&&w!==27||q===null||(C=q,h?(q=fr(s,f),q!=null&&_.unshift(Po(s,q,C))):h||(q=fr(s,f),q!=null&&_.push(Po(s,q,C)))),s=s.return}_.length!==0&&t.push({event:r,listeners:_})}var gw=/\r\n?/g,yw=/\u0000|\uFFFD/g;function Zy(t){return(typeof t=="string"?t:""+t).replace(gw,`
`).replace(yw,"")}function Jy(t,r){return r=Zy(r),Zy(t)===r}function dt(t,r,s,o,h,f){switch(s){case"children":typeof o=="string"?r==="body"||r==="textarea"&&o===""||An(t,o):(typeof o=="number"||typeof o=="bigint")&&r!=="body"&&An(t,""+o);break;case"className":Mn(t,"class",o);break;case"tabIndex":Mn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Mn(t,s,o);break;case"style":to(t,o,f);break;case"data":if(r!=="object"){Mn(t,"data",o);break}case"src":case"href":if(o===""&&(r!=="a"||s!=="href")){t.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=Ds(""+o),t.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(s==="formAction"?(r!=="input"&&dt(t,r,"name",h.name,h,null),dt(t,r,"formEncType",h.formEncType,h,null),dt(t,r,"formMethod",h.formMethod,h,null),dt(t,r,"formTarget",h.formTarget,h,null)):(dt(t,r,"encType",h.encType,h,null),dt(t,r,"method",h.method,h,null),dt(t,r,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=Ds(""+o),t.setAttribute(s,o);break;case"onClick":o!=null&&(t.onclick=hr);break;case"onScroll":o!=null&&Be("scroll",t);break;case"onScrollEnd":o!=null&&Be("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}s=Ds(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""+o):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":o===!0?t.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,o):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(s,o):t.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(s):t.setAttribute(s,o);break;case"popover":Be("beforetoggle",t),Be("toggle",t),Rs(t,"popover",o);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Rs(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=qu.get(s)||s,Rs(t,s,o))}}function Gf(t,r,s,o,h,f){switch(s){case"style":to(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(s=o.__html,s!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=s}}break;case"children":typeof o=="string"?An(t,o):(typeof o=="number"||typeof o=="bigint")&&An(t,""+o);break;case"onScroll":o!=null&&Be("scroll",t);break;case"onScrollEnd":o!=null&&Be("scrollend",t);break;case"onClick":o!=null&&(t.onclick=hr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ql.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),r=s.slice(2,h?s.length-7:void 0),f=t[Wt]||null,f=f!=null?f[s]:null,typeof f=="function"&&t.removeEventListener(r,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(r,o,h);break e}s in t?t[s]=o:o===!0?t.setAttribute(s,""):Rs(t,s,o)}}}function dn(t,r,s){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",t),Be("load",t);var o=!1,h=!1,f;for(f in s)if(s.hasOwnProperty(f)){var _=s[f];if(_!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dt(t,r,f,_,s,null)}}h&&dt(t,r,"srcSet",s.srcSet,s,null),o&&dt(t,r,"src",s.src,s,null);return;case"input":Be("invalid",t);var w=f=_=h=null,C=null,q=null;for(o in s)if(s.hasOwnProperty(o)){var Q=s[o];if(Q!=null)switch(o){case"name":h=Q;break;case"type":_=Q;break;case"checked":C=Q;break;case"defaultChecked":q=Q;break;case"value":f=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:dt(t,r,o,Q,s,null)}}zu(t,f,w,C,q,_,h,!1);return;case"select":Be("invalid",t),o=_=f=null;for(h in s)if(s.hasOwnProperty(h)&&(w=s[h],w!=null))switch(h){case"value":f=w;break;case"defaultValue":_=w;break;case"multiple":o=w;default:dt(t,r,h,w,s,null)}r=f,s=_,t.multiple=!!o,r!=null?La(t,!!o,r,!1):s!=null&&La(t,!!o,s,!0);return;case"textarea":Be("invalid",t),f=h=o=null;for(_ in s)if(s.hasOwnProperty(_)&&(w=s[_],w!=null))switch(_){case"value":o=w;break;case"defaultValue":h=w;break;case"children":f=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:dt(t,r,_,w,s,null)}za(t,o,h,f);return;case"option":for(C in s)if(s.hasOwnProperty(C)&&(o=s[C],o!=null))switch(C){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:dt(t,r,C,o,s,null)}return;case"dialog":Be("beforetoggle",t),Be("toggle",t),Be("cancel",t),Be("close",t);break;case"iframe":case"object":Be("load",t);break;case"video":case"audio":for(o=0;o<Vo.length;o++)Be(Vo[o],t);break;case"image":Be("error",t),Be("load",t);break;case"details":Be("toggle",t);break;case"embed":case"source":case"link":Be("error",t),Be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in s)if(s.hasOwnProperty(q)&&(o=s[q],o!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:dt(t,r,q,o,s,null)}return;default:if(Is(r)){for(Q in s)s.hasOwnProperty(Q)&&(o=s[Q],o!==void 0&&Gf(t,r,Q,o,s,void 0));return}}for(w in s)s.hasOwnProperty(w)&&(o=s[w],o!=null&&dt(t,r,w,o,s,null))}function bw(t,r,s,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,w=null,C=null,q=null,Q=null;for(K in s){var W=s[K];if(s.hasOwnProperty(K)&&W!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":C=W;default:o.hasOwnProperty(K)||dt(t,r,K,null,o,W)}}for(var H in o){var K=o[H];if(W=s[H],o.hasOwnProperty(H)&&(K!=null||W!=null))switch(H){case"type":f=K;break;case"name":h=K;break;case"checked":q=K;break;case"defaultChecked":Q=K;break;case"value":_=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:K!==W&&dt(t,r,H,K,o,W)}}Cs(t,_,w,C,q,Q,f,h);return;case"select":K=_=w=H=null;for(f in s)if(C=s[f],s.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":K=C;default:o.hasOwnProperty(f)||dt(t,r,f,null,o,C)}for(h in o)if(f=o[h],C=s[h],o.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":H=f;break;case"defaultValue":w=f;break;case"multiple":_=f;default:f!==C&&dt(t,r,h,f,o,C)}r=w,s=_,o=K,H!=null?La(t,!!s,H,!1):!!o!=!!s&&(r!=null?La(t,!!s,r,!0):La(t,!!s,s?[]:"",!1));return;case"textarea":K=H=null;for(w in s)if(h=s[w],s.hasOwnProperty(w)&&h!=null&&!o.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:dt(t,r,w,null,o,h)}for(_ in o)if(h=o[_],f=s[_],o.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":H=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==f&&dt(t,r,_,h,o,f)}Uu(t,H,K);return;case"option":for(var fe in s)if(H=s[fe],s.hasOwnProperty(fe)&&H!=null&&!o.hasOwnProperty(fe))switch(fe){case"selected":t.selected=!1;break;default:dt(t,r,fe,null,o,H)}for(C in o)if(H=o[C],K=s[C],o.hasOwnProperty(C)&&H!==K&&(H!=null||K!=null))switch(C){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:dt(t,r,C,H,o,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in s)H=s[xe],s.hasOwnProperty(xe)&&H!=null&&!o.hasOwnProperty(xe)&&dt(t,r,xe,null,o,H);for(q in o)if(H=o[q],K=s[q],o.hasOwnProperty(q)&&H!==K&&(H!=null||K!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,r));break;default:dt(t,r,q,H,o,K)}return;default:if(Is(r)){for(var ht in s)H=s[ht],s.hasOwnProperty(ht)&&H!==void 0&&!o.hasOwnProperty(ht)&&Gf(t,r,ht,void 0,o,H);for(Q in o)H=o[Q],K=s[Q],!o.hasOwnProperty(Q)||H===K||H===void 0&&K===void 0||Gf(t,r,Q,H,o,K);return}}for(var P in s)H=s[P],s.hasOwnProperty(P)&&H!=null&&!o.hasOwnProperty(P)&&dt(t,r,P,null,o,H);for(W in o)H=o[W],K=s[W],!o.hasOwnProperty(W)||H===K||H==null&&K==null||dt(t,r,W,H,o,K)}function Wy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _w(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var h=s[o],f=h.transferSize,_=h.initiatorType,w=h.duration;if(f&&w&&Wy(_)){for(_=0,w=h.responseEnd,o+=1;o<s.length;o++){var C=s[o],q=C.startTime;if(q>w)break;var Q=C.transferSize,W=C.initiatorType;Q&&Wy(W)&&(C=C.responseEnd,_+=Q*(C<w?1:(w-q)/(C-q)))}if(--o,r+=8*(f+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Kf=null,Xf=null;function Hc(t){return t.nodeType===9?t:t.ownerDocument}function eb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tb(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Qf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $f=null;function vw(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var nb=typeof setTimeout=="function"?setTimeout:void 0,xw=typeof clearTimeout=="function"?clearTimeout:void 0,rb=typeof Promise=="function"?Promise:void 0,Ew=typeof queueMicrotask=="function"?queueMicrotask:typeof rb<"u"?function(t){return rb.resolve(null).then(t).catch(ww)}:nb;function ww(t){setTimeout(function(){throw t})}function oi(t){return t==="head"}function ab(t,r){var s=r,o=0;do{var h=s.nextSibling;if(t.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"||s==="/&"){if(o===0){t.removeChild(h),hl(r);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")Lo(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Lo(s);for(var f=s.firstChild;f;){var _=f.nextSibling,w=f.nodeName;f[Ir]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&f.rel.toLowerCase()==="stylesheet"||s.removeChild(f),f=_}}else s==="body"&&Lo(t.ownerDocument.body);s=h}while(s);hl(r)}function ib(t,r){var s=t;t=0;do{var o=s.nextSibling;if(s.nodeType===1?r?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(r?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=o}while(s)}function Yf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var s=r;switch(r=r.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Yf(s),ks(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Tw(t,r,s,o){for(;t.nodeType===1;){var h=s;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ir])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=nr(t.nextSibling),t===null)break}return null}function Aw(t,r,s){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=nr(t.nextSibling),t===null))return null;return t}function sb(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=nr(t.nextSibling),t===null))return null;return t}function Zf(t){return t.data==="$?"||t.data==="$~"}function Jf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Sw(t,r){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||s.readyState!=="loading")r();else{var o=function(){r(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function nr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Wf=null;function lb(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(r===0)return nr(t.nextSibling);r--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||r++}t=t.nextSibling}return null}function ob(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(r===0)return t;r--}else s!=="/$"&&s!=="/&"||r++}t=t.previousSibling}return null}function ub(t,r,s){switch(r=Hc(s),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Lo(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ks(t)}var rr=new Map,cb=new Set;function Fc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Aa=ie.d;ie.d={f:Nw,r:kw,D:Rw,C:Cw,L:Iw,m:Dw,X:Ow,S:jw,M:Mw};function Nw(){var t=Aa.f(),r=Mc();return t||r}function kw(t){var r=Kn(t);r!==null&&r.tag===5&&r.type==="form"?N0(r):Aa.r(t)}var ul=typeof document>"u"?null:document;function db(t,r,s){var o=ul;if(o&&typeof r=="string"&&r){var h=Tn(r);h='link[rel="'+t+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),cb.has(h)||(cb.add(h),t={rel:t,crossOrigin:s,href:r},o.querySelector(h)===null&&(r=o.createElement("link"),dn(r,"link",t),Bt(r),o.head.appendChild(r)))}}function Rw(t){Aa.D(t),db("dns-prefetch",t,null)}function Cw(t,r){Aa.C(t,r),db("preconnect",t,r)}function Iw(t,r,s){Aa.L(t,r,s);var o=ul;if(o&&t&&r){var h='link[rel="preload"][as="'+Tn(r)+'"]';r==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+Tn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+Tn(s.imageSizes)+'"]')):h+='[href="'+Tn(t)+'"]';var f=h;switch(r){case"style":f=cl(t);break;case"script":f=dl(t)}rr.has(f)||(t=E({rel:"preload",href:r==="image"&&s&&s.imageSrcSet?void 0:t,as:r},s),rr.set(f,t),o.querySelector(h)!==null||r==="style"&&o.querySelector(zo(f))||r==="script"&&o.querySelector(Uo(f))||(r=o.createElement("link"),dn(r,"link",t),Bt(r),o.head.appendChild(r)))}}function Dw(t,r){Aa.m(t,r);var s=ul;if(s&&t){var o=r&&typeof r.as=="string"?r.as:"script",h='link[rel="modulepreload"][as="'+Tn(o)+'"][href="'+Tn(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=dl(t)}if(!rr.has(f)&&(t=E({rel:"modulepreload",href:t},r),rr.set(f,t),s.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Uo(f)))return}o=s.createElement("link"),dn(o,"link",t),Bt(o),s.head.appendChild(o)}}}function jw(t,r,s){Aa.S(t,r,s);var o=ul;if(o&&t){var h=jr(o).hoistableStyles,f=cl(t);r=r||"default";var _=h.get(f);if(!_){var w={loading:0,preload:null};if(_=o.querySelector(zo(f)))w.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":r},s),(s=rr.get(f))&&em(t,s);var C=_=o.createElement("link");Bt(C),dn(C,"link",t),C._p=new Promise(function(q,Q){C.onload=q,C.onerror=Q}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Gc(_,r,o)}_={type:"stylesheet",instance:_,count:1,state:w},h.set(f,_)}}}function Ow(t,r){Aa.X(t,r);var s=ul;if(s&&t){var o=jr(s).hoistableScripts,h=dl(t),f=o.get(h);f||(f=s.querySelector(Uo(h)),f||(t=E({src:t,async:!0},r),(r=rr.get(h))&&tm(t,r),f=s.createElement("script"),Bt(f),dn(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function Mw(t,r){Aa.M(t,r);var s=ul;if(s&&t){var o=jr(s).hoistableScripts,h=dl(t),f=o.get(h);f||(f=s.querySelector(Uo(h)),f||(t=E({src:t,async:!0,type:"module"},r),(r=rr.get(h))&&tm(t,r),f=s.createElement("script"),Bt(f),dn(f,"link",t),s.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function hb(t,r,s,o){var h=(h=ke.current)?Fc(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(r=cl(s.href),s=jr(h).hoistableStyles,o=s.get(r),o||(o={type:"style",instance:null,count:0,state:null},s.set(r,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=cl(s.href);var f=jr(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(zo(t)))&&!f._p&&(_.instance=f,_.state.loading=5),rr.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},rr.set(t,s),f||Vw(h,t,s,_.state))),r&&o===null)throw Error(i(528,""));return _}if(r&&o!==null)throw Error(i(529,""));return null;case"script":return r=s.async,s=s.src,typeof s=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=dl(s),s=jr(h).hoistableScripts,o=s.get(r),o||(o={type:"script",instance:null,count:0,state:null},s.set(r,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function cl(t){return'href="'+Tn(t)+'"'}function zo(t){return'link[rel="stylesheet"]['+t+"]"}function fb(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Vw(t,r,s,o){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=t.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),dn(r,"link",s),Bt(r),t.head.appendChild(r))}function dl(t){return'[src="'+Tn(t)+'"]'}function Uo(t){return"script[async]"+t}function mb(t,r,s){if(r.count++,r.instance===null)switch(r.type){case"style":var o=t.querySelector('style[data-href~="'+Tn(s.href)+'"]');if(o)return r.instance=o,Bt(o),o;var h=E({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Bt(o),dn(o,"style",h),Gc(o,s.precedence,t),r.instance=o;case"stylesheet":h=cl(s.href);var f=t.querySelector(zo(h));if(f)return r.state.loading|=4,r.instance=f,Bt(f),f;o=fb(s),(h=rr.get(h))&&em(o,h),f=(t.ownerDocument||t).createElement("link"),Bt(f);var _=f;return _._p=new Promise(function(w,C){_.onload=w,_.onerror=C}),dn(f,"link",o),r.state.loading|=4,Gc(f,s.precedence,t),r.instance=f;case"script":return f=dl(s.src),(h=t.querySelector(Uo(f)))?(r.instance=h,Bt(h),h):(o=s,(h=rr.get(f))&&(o=E({},s),tm(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Bt(h),dn(h,"link",o),t.head.appendChild(h),r.instance=h);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(o=r.instance,r.state.loading|=4,Gc(o,s.precedence,t));return r.instance}function Gc(t,r,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,_=0;_<o.length;_++){var w=o[_];if(w.dataset.precedence===r)f=w;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=s.nodeType===9?s.head:s,r.insertBefore(t,r.firstChild))}function em(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function tm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Kc=null;function pb(t,r,s){if(Kc===null){var o=new Map,h=Kc=new Map;h.set(s,o)}else h=Kc,o=h.get(s),o||(o=new Map,h.set(s,o));if(o.has(t))return o;for(o.set(t,null),s=s.getElementsByTagName(t),h=0;h<s.length;h++){var f=s[h];if(!(f[Ir]||f[Ut]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(r)||"";_=t+_;var w=o.get(_);w?w.push(f):o.set(_,[f])}}return o}function gb(t,r,s){t=t.ownerDocument||t,t.head.insertBefore(s,r==="title"?t.querySelector("head > title"):null)}function Pw(t,r,s){if(s===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function yb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Lw(t,r,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=cl(o.href),f=r.querySelector(zo(h));if(f){r=f._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Xc.bind(t),r.then(t,t)),s.state.loading|=4,s.instance=f,Bt(f);return}f=r.ownerDocument||r,o=fb(o),(h=rr.get(h))&&em(o,h),f=f.createElement("link"),Bt(f);var _=f;_._p=new Promise(function(w,C){_.onload=w,_.onerror=C}),dn(f,"link",o),s.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Xc.bind(t),r.addEventListener("load",s),r.addEventListener("error",s))}}var nm=0;function zw(t,r){return t.stylesheets&&t.count===0&&$c(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var o=setTimeout(function(){if(t.stylesheets&&$c(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+r);0<t.imgBytes&&nm===0&&(nm=62500*_w());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&$c(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>nm?50:800)+r);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$c(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qc=null;function $c(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qc=new Map,r.forEach(Uw,t),Qc=null,Xc.call(t))}function Uw(t,r){if(!(r.state.loading&4)){var s=Qc.get(t);if(s)var o=s.get(null);else{s=new Map,Qc.set(t,s);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(s.set(_.dataset.precedence,_),o=_)}o&&s.set(null,o)}h=r.instance,_=h.getAttribute("data-precedence"),f=s.get(_)||o,f===o&&s.set(null,h),s.set(_,h),this.count++,o=Xc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),r.state.loading|=4}}var Bo={$$typeof:te,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Bw(t,r,s,o,h,f,_,w,C){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.hiddenUpdates=Rr(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function bb(t,r,s,o,h,f,_,w,C,q,Q,W){return t=new Bw(t,r,s,_,C,q,Q,W,w),r=1,f===!0&&(r|=24),f=Pn(3,null,null,r),t.current=f,f.stateNode=t,r=Oh(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:o,isDehydrated:s,cache:r},Lh(f),t}function _b(t){return t?(t=qs,t):qs}function vb(t,r,s,o,h,f){h=_b(h),o.context===null?o.context=h:o.pendingContext=h,o=Za(r),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=Ja(t,o,r),s!==null&&(Cn(s,t,r),_o(s,t,r))}function xb(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<r?s:r}}function rm(t,r){xb(t,r),(t=t.alternate)&&xb(t,r)}function Eb(t){if(t.tag===13||t.tag===31){var r=Wi(t,67108864);r!==null&&Cn(r,t,67108864),rm(t,67108864)}}function wb(t){if(t.tag===13||t.tag===31){var r=qn();r=Bi(r);var s=Wi(t,r);s!==null&&Cn(s,t,r),rm(t,r)}}var Yc=!0;function qw(t,r,s,o){var h=X.T;X.T=null;var f=ie.p;try{ie.p=2,am(t,r,s,o)}finally{ie.p=f,X.T=h}}function Hw(t,r,s,o){var h=X.T;X.T=null;var f=ie.p;try{ie.p=8,am(t,r,s,o)}finally{ie.p=f,X.T=h}}function am(t,r,s,o){if(Yc){var h=im(o);if(h===null)Ff(t,r,o,Zc,s),Ab(t,o);else if(Gw(h,t,r,s,o))o.stopPropagation();else if(Ab(t,o),r&4&&-1<Fw.indexOf(t)){for(;h!==null;){var f=Kn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Nr(f.pendingLanes);if(_!==0){var w=f;for(w.pendingLanes|=2,w.entangledLanes|=2;_;){var C=1<<31-ge(_);w.entanglements[1]|=C,_&=~C}Kr(f),(tt&6)===0&&(jc=ue()+500,Mo(0))}}break;case 31:case 13:w=Wi(f,2),w!==null&&Cn(w,f,2),Mc(),rm(f,2)}if(f=im(o),f===null&&Ff(t,r,o,Zc,s),f===h)break;h=f}h!==null&&o.stopPropagation()}else Ff(t,r,o,null,s)}}function im(t){return t=Xn(t),sm(t)}var Zc=null;function sm(t){if(Zc=null,t=Dr(t),t!==null){var r=u(t);if(r===null)t=null;else{var s=r.tag;if(s===13){if(t=d(r),t!==null)return t;t=null}else if(s===31){if(t=p(r),t!==null)return t;t=null}else if(s===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Zc=t,null}function Tb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Te()){case De:return 2;case je:return 8;case Ae:case nt:return 32;case vt:return 268435456;default:return 32}default:return 32}}var lm=!1,ui=null,ci=null,di=null,qo=new Map,Ho=new Map,hi=[],Fw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ab(t,r){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":qo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(r.pointerId)}}function Fo(t,r,s,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:s,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},r!==null&&(r=Kn(r),r!==null&&Eb(r)),t):(t.eventSystemFlags|=o,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Gw(t,r,s,o,h){switch(r){case"focusin":return ui=Fo(ui,t,r,s,o,h),!0;case"dragenter":return ci=Fo(ci,t,r,s,o,h),!0;case"mouseover":return di=Fo(di,t,r,s,o,h),!0;case"pointerover":var f=h.pointerId;return qo.set(f,Fo(qo.get(f)||null,t,r,s,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Ho.set(f,Fo(Ho.get(f)||null,t,r,s,o,h)),!0}return!1}function Sb(t){var r=Dr(t.target);if(r!==null){var s=u(r);if(s!==null){if(r=s.tag,r===13){if(r=d(s),r!==null){t.blockedOn=r,cr(t.priority,function(){wb(s)});return}}else if(r===31){if(r=p(s),r!==null){t.blockedOn=r,cr(t.priority,function(){wb(s)});return}}else if(r===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jc(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var s=im(t.nativeEvent);if(s===null){s=t.nativeEvent;var o=new s.constructor(s.type,s);no=o,s.target.dispatchEvent(o),no=null}else return r=Kn(s),r!==null&&Eb(r),t.blockedOn=s,!1;r.shift()}return!0}function Nb(t,r,s){Jc(t)&&s.delete(r)}function Kw(){lm=!1,ui!==null&&Jc(ui)&&(ui=null),ci!==null&&Jc(ci)&&(ci=null),di!==null&&Jc(di)&&(di=null),qo.forEach(Nb),Ho.forEach(Nb)}function Wc(t,r){t.blockedOn===r&&(t.blockedOn=null,lm||(lm=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Kw)))}var ed=null;function kb(t){ed!==t&&(ed=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ed===t&&(ed=null);for(var r=0;r<t.length;r+=3){var s=t[r],o=t[r+1],h=t[r+2];if(typeof o!="function"){if(sm(o||s)===null)continue;break}var f=Kn(s);f!==null&&(t.splice(r,3),r-=3,af(f,{pending:!0,data:h,method:s.method,action:o},o,h))}}))}function hl(t){function r(C){return Wc(C,t)}ui!==null&&Wc(ui,t),ci!==null&&Wc(ci,t),di!==null&&Wc(di,t),qo.forEach(r),Ho.forEach(r);for(var s=0;s<hi.length;s++){var o=hi[s];o.blockedOn===t&&(o.blockedOn=null)}for(;0<hi.length&&(s=hi[0],s.blockedOn===null);)Sb(s),s.blockedOn===null&&hi.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var h=s[o],f=s[o+1],_=h[Wt]||null;if(typeof f=="function")_||kb(s);else if(_){var w=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Wt]||null)w=_.formAction;else if(sm(h)!==null)continue}else w=_.action;typeof w=="function"?s[o+1]=w:(s.splice(o,3),o-=3),kb(s)}}}function Rb(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function r(){h!==null&&(h(),h=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),h!==null&&(h(),h=null)}}}function om(t){this._internalRoot=t}td.prototype.render=om.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var s=r.current,o=qn();vb(s,o,t,r,null,null)},td.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;vb(t.current,2,null,t,null,null),Mc(),r[Cr]=null}};function td(t){this._internalRoot=t}td.prototype.unstable_scheduleHydration=function(t){if(t){var r=Mu();t={blockedOn:null,target:t,priority:r};for(var s=0;s<hi.length&&r!==0&&r<hi[s].priority;s++);hi.splice(s,0,t),s===0&&Sb(t)}};var Cb=e.version;if(Cb!=="19.2.3")throw Error(i(527,Cb,"19.2.3"));ie.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(r),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var Xw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{vn=nd.inject(Xw),ve=nd}catch{}}return Ko.createRoot=function(t,r){if(!l(t))throw Error(i(299));var s=!1,o="",h=P0,f=L0,_=z0;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onUncaughtError!==void 0&&(h=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=bb(t,1,!1,null,null,s,o,null,h,f,_,Rb),t[Cr]=r.current,Hf(t),new om(r)},Ko.hydrateRoot=function(t,r,s){if(!l(t))throw Error(i(299));var o=!1,h="",f=P0,_=L0,w=z0,C=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.formState!==void 0&&(C=s.formState)),r=bb(t,1,!0,r,s??null,o,h,C,f,_,w,Rb),r.context=_b(null),s=r.current,o=qn(),o=Bi(o),h=Za(o),h.callback=null,Ja(s,h,o),s=o,r.current.lanes=s,zi(r,s),Kr(r),t[Cr]=r.current,Hf(t),new td(r)},Ko.version="19.2.3",Ko}var Ub;function aT(){if(Ub)return dm.exports;Ub=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),dm.exports=rT(),dm.exports}var iT=aT();const sT=Rv(iT);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bb="popstate";function lT(a={}){function e(l,u){let{pathname:d="/",search:p="",hash:y=""}=xs(l.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Rm("",{pathname:d,search:p,hash:y},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let d=l.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let y=l.location.href,g=y.indexOf("#");p=g===-1?y:y.slice(0,g)}return p+"#"+(typeof u=="string"?u:lu(u))}function i(l,u){jn(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return uT(e,n,i,a)}function At(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function jn(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oT(){return Math.random().toString(36).substring(2,10)}function qb(a,e){return{usr:a.state,key:a.key,idx:e}}function Rm(a,e,n=null,i){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?xs(e):e,state:n,key:e&&e.key||i||oT()}}function lu({pathname:a="/",search:e="",hash:n=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(a+=n.charAt(0)==="#"?n:"#"+n),a}function xs(a){let e={};if(a){let n=a.indexOf("#");n>=0&&(e.hash=a.substring(n),a=a.substring(0,n));let i=a.indexOf("?");i>=0&&(e.search=a.substring(i),a=a.substring(0,i)),a&&(e.pathname=a)}return e}function uT(a,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,d=l.history,p="POP",y=null,g=x();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function x(){return(d.state||{idx:null}).idx}function E(){p="POP";let U=x(),ne=U==null?null:U-g;g=U,y&&y({action:p,location:$.location,delta:ne})}function A(U,ne){p="PUSH";let ae=Rm($.location,U,ne);n&&n(ae,U),g=x()+1;let te=qb(ae,g),me=$.createHref(ae);try{d.pushState(te,"",me)}catch(Ne){if(Ne instanceof DOMException&&Ne.name==="DataCloneError")throw Ne;l.location.assign(me)}u&&y&&y({action:p,location:$.location,delta:1})}function D(U,ne){p="REPLACE";let ae=Rm($.location,U,ne);n&&n(ae,U),g=x();let te=qb(ae,g),me=$.createHref(ae);d.replaceState(te,"",me),u&&y&&y({action:p,location:$.location,delta:0})}function F(U){return cT(U)}let $={get action(){return p},get location(){return a(l,d)},listen(U){if(y)throw new Error("A history only accepts one active listener");return l.addEventListener(Bb,E),y=U,()=>{l.removeEventListener(Bb,E),y=null}},createHref(U){return e(l,U)},createURL:F,encodeLocation(U){let ne=F(U);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:A,replace:D,go(U){return d.go(U)}};return $}function cT(a,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),At(n,"No window.location.(origin|href) available to create URL");let i=typeof a=="string"?a:lu(a);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Cv(a,e,n="/"){return dT(a,e,n,!1)}function dT(a,e,n,i){let l=typeof e=="string"?xs(e):e,u=Ia(l.pathname||"/",n);if(u==null)return null;let d=Iv(a);hT(d);let p=null;for(let y=0;p==null&&y<d.length;++y){let g=wT(u);p=xT(d[y],g,i)}return p}function Iv(a,e=[],n=[],i="",l=!1){let u=(d,p,y=l,g)=>{let x={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&y)return;At(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let E=ka([i,x.relativePath]),A=n.concat(x);d.children&&d.children.length>0&&(At(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Iv(d.children,e,A,E,y)),!(d.path==null&&!d.index)&&e.push({path:E,score:_T(E,d.index),routesMeta:A})};return a.forEach((d,p)=>{var y;if(d.path===""||!((y=d.path)!=null&&y.includes("?")))u(d,p);else for(let g of Dv(d.path))u(d,p,!0,g)}),e}function Dv(a){let e=a.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let d=Dv(i.join("/")),p=[];return p.push(...d.map(y=>y===""?u:[u,y].join("/"))),l&&p.push(...d),p.map(y=>a.startsWith("/")&&y===""?"/":y)}function hT(a){a.sort((e,n)=>e.score!==n.score?n.score-e.score:vT(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var fT=/^:[\w-]+$/,mT=3,pT=2,gT=1,yT=10,bT=-2,Hb=a=>a==="*";function _T(a,e){let n=a.split("/"),i=n.length;return n.some(Hb)&&(i+=bT),e&&(i+=pT),n.filter(l=>!Hb(l)).reduce((l,u)=>l+(fT.test(u)?mT:u===""?gT:yT),i)}function vT(a,e){return a.length===e.length&&a.slice(0,-1).every((i,l)=>i===e[l])?a[a.length-1]-e[e.length-1]:0}function xT(a,e,n=!1){let{routesMeta:i}=a,l={},u="/",d=[];for(let p=0;p<i.length;++p){let y=i[p],g=p===i.length-1,x=u==="/"?e:e.slice(u.length)||"/",E=wd({path:y.relativePath,caseSensitive:y.caseSensitive,end:g},x),A=y.route;if(!E&&g&&n&&!i[i.length-1].route.index&&(E=wd({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},x)),!E)return null;Object.assign(l,E.params),d.push({params:l,pathname:ka([u,E.pathname]),pathnameBase:kT(ka([u,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(u=ka([u,E.pathnameBase]))}return d}function wd(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[n,i]=ET(a.path,a.caseSensitive,a.end),l=e.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((g,{paramName:x,isOptional:E},A)=>{if(x==="*"){let F=p[A]||"";d=u.slice(0,u.length-F.length).replace(/(.)\/+$/,"$1")}const D=p[A];return E&&!D?g[x]=void 0:g[x]=(D||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:d,pattern:a}}function ET(a,e=!1,n=!0){jn(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let i=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,y)=>(i.push({paramName:p,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(i.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function wT(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jn(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function Ia(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=a.charAt(n);return i&&i!=="/"?null:a.slice(n)||"/"}var TT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AT=a=>TT.test(a);function ST(a,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof a=="string"?xs(a):a,u;if(n)if(AT(n))u=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),jn(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?u=Fb(n.substring(1),"/"):u=Fb(n,e)}else u=e;return{pathname:u,search:RT(i),hash:CT(l)}}function Fb(a,e){let n=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function pm(a,e,n,i){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NT(a){return a.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function lp(a){let e=NT(a);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function op(a,e,n,i=!1){let l;typeof a=="string"?l=xs(a):(l={...a},At(!l.pathname||!l.pathname.includes("?"),pm("?","pathname","search",l)),At(!l.pathname||!l.pathname.includes("#"),pm("#","pathname","hash",l)),At(!l.search||!l.search.includes("#"),pm("#","search","hash",l)));let u=a===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=n;else{let E=e.length-1;if(!i&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),E-=1;l.pathname=A.join("/")}p=E>=0?e[E]:"/"}let y=ST(l,p),g=d&&d!=="/"&&d.endsWith("/"),x=(u||d===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(g||x)&&(y.pathname+="/"),y}var ka=a=>a.join("/").replace(/\/\/+/g,"/"),kT=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),RT=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,CT=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function IT(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function DT(a){return a.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jv=["POST","PUT","PATCH","DELETE"];new Set(jv);var jT=["GET",...jv];new Set(jT);var Ol=L.createContext(null);Ol.displayName="DataRouter";var Gd=L.createContext(null);Gd.displayName="DataRouterState";L.createContext(!1);var Ov=L.createContext({isTransitioning:!1});Ov.displayName="ViewTransition";var OT=L.createContext(new Map);OT.displayName="Fetchers";var MT=L.createContext(null);MT.displayName="Await";var sr=L.createContext(null);sr.displayName="Navigation";var _u=L.createContext(null);_u.displayName="Location";var Tr=L.createContext({outlet:null,matches:[],isDataRoute:!1});Tr.displayName="Route";var up=L.createContext(null);up.displayName="RouteError";function VT(a,{relative:e}={}){At(Ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=L.useContext(sr),{hash:l,pathname:u,search:d}=vu(a,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:ka([n,u])),i.createHref({pathname:p,search:d,hash:l})}function Ml(){return L.useContext(_u)!=null}function ra(){return At(Ml(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(_u).location}var Mv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vv(a){L.useContext(sr).static||L.useLayoutEffect(a)}function Es(){let{isDataRoute:a}=L.useContext(Tr);return a?YT():PT()}function PT(){At(Ml(),"useNavigate() may be used only in the context of a <Router> component.");let a=L.useContext(Ol),{basename:e,navigator:n}=L.useContext(sr),{matches:i}=L.useContext(Tr),{pathname:l}=ra(),u=JSON.stringify(lp(i)),d=L.useRef(!1);return Vv(()=>{d.current=!0}),L.useCallback((y,g={})=>{if(jn(d.current,Mv),!d.current)return;if(typeof y=="number"){n.go(y);return}let x=op(y,JSON.parse(u),l,g.relative==="path");a==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ka([e,x.pathname])),(g.replace?n.replace:n.push)(x,g.state,g)},[e,n,u,l,a])}L.createContext(null);function LT(){let{matches:a}=L.useContext(Tr),e=a[a.length-1];return e?e.params:{}}function vu(a,{relative:e}={}){let{matches:n}=L.useContext(Tr),{pathname:i}=ra(),l=JSON.stringify(lp(n));return L.useMemo(()=>op(a,JSON.parse(l),i,e==="path"),[a,l,i,e])}function zT(a,e){return Pv(a,e)}function Pv(a,e,n,i,l){var ae;At(Ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=L.useContext(sr),{matches:d}=L.useContext(Tr),p=d[d.length-1],y=p?p.params:{},g=p?p.pathname:"/",x=p?p.pathnameBase:"/",E=p&&p.route;{let te=E&&E.path||"";Lv(g,!E||te.endsWith("*")||te.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${te}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${te}"> to <Route path="${te==="/"?"*":`${te}/*`}">.`)}let A=ra(),D;if(e){let te=typeof e=="string"?xs(e):e;At(x==="/"||((ae=te.pathname)==null?void 0:ae.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${te.pathname}" was given in the \`location\` prop.`),D=te}else D=A;let F=D.pathname||"/",$=F;if(x!=="/"){let te=x.replace(/^\//,"").split("/");$="/"+F.replace(/^\//,"").split("/").slice(te.length).join("/")}let U=Cv(a,{pathname:$});jn(E||U!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),jn(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=FT(U&&U.map(te=>Object.assign({},te,{params:Object.assign({},y,te.params),pathname:ka([x,u.encodeLocation?u.encodeLocation(te.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?x:ka([x,u.encodeLocation?u.encodeLocation(te.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:te.pathnameBase])})),d,n,i,l);return e&&ne?L.createElement(_u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...D},navigationType:"POP"}},ne):ne}function UT(){let a=$T(),e=IT(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),n=a instanceof Error?a.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",a),d=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:u},"ErrorBoundary")," or"," ",L.createElement("code",{style:u},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:l},n):null,d)}var BT=L.createElement(UT,null),qT=class extends L.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.onError?this.props.onError(a,e):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?L.createElement(Tr.Provider,{value:this.props.routeContext},L.createElement(up.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HT({routeContext:a,match:e,children:n}){let i=L.useContext(Ol);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Tr.Provider,{value:a},n)}function FT(a,e=[],n=null,i=null,l=null){if(a==null){if(!n)return null;if(n.errors)a=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)a=n.matches;else return null}let u=a,d=n==null?void 0:n.errors;if(d!=null){let x=u.findIndex(E=>E.route.id&&(d==null?void 0:d[E.route.id])!==void 0);At(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let p=!1,y=-1;if(n)for(let x=0;x<u.length;x++){let E=u[x];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=x),E.route.id){let{loaderData:A,errors:D}=n,F=E.route.loader&&!A.hasOwnProperty(E.route.id)&&(!D||D[E.route.id]===void 0);if(E.route.lazy||F){p=!0,y>=0?u=u.slice(0,y+1):u=[u[0]];break}}}let g=n&&i?(x,E)=>{var A,D;i(x,{location:n.location,params:((D=(A=n.matches)==null?void 0:A[0])==null?void 0:D.params)??{},unstable_pattern:DT(n.matches),errorInfo:E})}:void 0;return u.reduceRight((x,E,A)=>{let D,F=!1,$=null,U=null;n&&(D=d&&E.route.id?d[E.route.id]:void 0,$=E.route.errorElement||BT,p&&(y<0&&A===0?(Lv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),F=!0,U=null):y===A&&(F=!0,U=E.route.hydrateFallbackElement||null)));let ne=e.concat(u.slice(0,A+1)),ae=()=>{let te;return D?te=$:F?te=U:E.route.Component?te=L.createElement(E.route.Component,null):E.route.element?te=E.route.element:te=x,L.createElement(HT,{match:E,routeContext:{outlet:x,matches:ne,isDataRoute:n!=null},children:te})};return n&&(E.route.ErrorBoundary||E.route.errorElement||A===0)?L.createElement(qT,{location:n.location,revalidation:n.revalidation,component:$,error:D,children:ae(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:g}):ae()},null)}function cp(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GT(a){let e=L.useContext(Ol);return At(e,cp(a)),e}function KT(a){let e=L.useContext(Gd);return At(e,cp(a)),e}function XT(a){let e=L.useContext(Tr);return At(e,cp(a)),e}function dp(a){let e=XT(a),n=e.matches[e.matches.length-1];return At(n.route.id,`${a} can only be used on routes that contain a unique "id"`),n.route.id}function QT(){return dp("useRouteId")}function $T(){var i;let a=L.useContext(up),e=KT("useRouteError"),n=dp("useRouteError");return a!==void 0?a:(i=e.errors)==null?void 0:i[n]}function YT(){let{router:a}=GT("useNavigate"),e=dp("useNavigate"),n=L.useRef(!1);return Vv(()=>{n.current=!0}),L.useCallback(async(l,u={})=>{jn(n.current,Mv),n.current&&(typeof l=="number"?await a.navigate(l):await a.navigate(l,{fromRouteId:e,...u}))},[a,e])}var Gb={};function Lv(a,e,n){!e&&!Gb[a]&&(Gb[a]=!0,jn(!1,n))}L.memo(ZT);function ZT({routes:a,future:e,state:n,unstable_onError:i}){return Pv(a,void 0,n,i,e)}function bl({to:a,replace:e,state:n,relative:i}){At(Ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=L.useContext(sr);jn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=L.useContext(Tr),{pathname:d}=ra(),p=Es(),y=op(a,lp(u),d,i==="path"),g=JSON.stringify(y);return L.useEffect(()=>{p(JSON.parse(g),{replace:e,state:n,relative:i})},[p,g,i,e,n]),null}function Xr(a){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JT({basename:a="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){At(!Ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=a.replace(/^\/*/,"/"),y=L.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof n=="string"&&(n=xs(n));let{pathname:g="/",search:x="",hash:E="",state:A=null,key:D="default"}=n,F=L.useMemo(()=>{let $=Ia(g,p);return $==null?null:{location:{pathname:$,search:x,hash:E,state:A,key:D},navigationType:i}},[p,g,x,E,A,D,i]);return jn(F!=null,`<Router basename="${p}"> is not able to match the URL "${g}${x}${E}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:L.createElement(sr.Provider,{value:y},L.createElement(_u.Provider,{children:e,value:F}))}function WT({children:a,location:e}){return zT(Cm(a),e)}function Cm(a,e=[]){let n=[];return L.Children.forEach(a,(i,l)=>{if(!L.isValidElement(i))return;let u=[...e,l];if(i.type===L.Fragment){n.push.apply(n,Cm(i.props.children,u));return}At(i.type===Xr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Cm(i.props.children,u)),n.push(d)}),n}var dd="get",hd="application/x-www-form-urlencoded";function Kd(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function eA(a){return Kd(a)&&a.tagName.toLowerCase()==="button"}function tA(a){return Kd(a)&&a.tagName.toLowerCase()==="form"}function nA(a){return Kd(a)&&a.tagName.toLowerCase()==="input"}function rA(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function aA(a,e){return a.button===0&&(!e||e==="_self")&&!rA(a)}function Im(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((e,n)=>{let i=a[n];return e.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function iA(a,e){let n=Im(a);return e&&e.forEach((i,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var rd=null;function sA(){if(rd===null)try{new FormData(document.createElement("form"),0),rd=!1}catch{rd=!0}return rd}var lA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gm(a){return a!=null&&!lA.has(a)?(jn(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hd}"`),null):a}function oA(a,e){let n,i,l,u,d;if(tA(a)){let p=a.getAttribute("action");i=p?Ia(p,e):null,n=a.getAttribute("method")||dd,l=gm(a.getAttribute("enctype"))||hd,u=new FormData(a)}else if(eA(a)||nA(a)&&(a.type==="submit"||a.type==="image")){let p=a.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=a.getAttribute("formaction")||p.getAttribute("action");if(i=y?Ia(y,e):null,n=a.getAttribute("formmethod")||p.getAttribute("method")||dd,l=gm(a.getAttribute("formenctype"))||gm(p.getAttribute("enctype"))||hd,u=new FormData(p,a),!sA()){let{name:g,type:x,value:E}=a;if(x==="image"){let A=g?`${g}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else g&&u.append(g,E)}}else{if(Kd(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=dd,i=null,l=hd,d=a}return u&&l==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hp(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function uA(a,e,n){let i=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Ia(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function cA(a,e){if(a.id in e)return e[a.id];try{let n=await import(a.module);return e[a.id]=n,n}catch(n){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dA(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function hA(a,e,n){let i=await Promise.all(a.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await cA(u,n);return d.links?d.links():[]}return[]}));return gA(i.flat(1).filter(dA).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Kb(a,e,n,i,l,u){let d=(y,g)=>n[g]?y.route.id!==n[g].route.id:!0,p=(y,g)=>{var x;return n[g].pathname!==y.pathname||((x=n[g].route.path)==null?void 0:x.endsWith("*"))&&n[g].params["*"]!==y.params["*"]};return u==="assets"?e.filter((y,g)=>d(y,g)||p(y,g)):u==="data"?e.filter((y,g)=>{var E;let x=i.routes[y.route.id];if(!x||!x.hasLoader)return!1;if(d(y,g)||p(y,g))return!0;if(y.route.shouldRevalidate){let A=y.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(a,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function fA(a,e,{includeHydrateFallback:n}={}){return mA(a.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function mA(a){return[...new Set(a)]}function pA(a){let e={},n=Object.keys(a).sort();for(let i of n)e[i]=a[i];return e}function gA(a,e){let n=new Set;return new Set(e),a.reduce((i,l)=>{let u=JSON.stringify(pA(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function zv(){let a=L.useContext(Ol);return hp(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function yA(){let a=L.useContext(Gd);return hp(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var fp=L.createContext(void 0);fp.displayName="FrameworkContext";function Uv(){let a=L.useContext(fp);return hp(a,"You must render this element inside a <HydratedRouter> element"),a}function bA(a,e){let n=L.useContext(fp),[i,l]=L.useState(!1),[u,d]=L.useState(!1),{onFocus:p,onBlur:y,onMouseEnter:g,onMouseLeave:x,onTouchStart:E}=e,A=L.useRef(null);L.useEffect(()=>{if(a==="render"&&d(!0),a==="viewport"){let $=ne=>{ne.forEach(ae=>{d(ae.isIntersecting)})},U=new IntersectionObserver($,{threshold:.5});return A.current&&U.observe(A.current),()=>{U.disconnect()}}},[a]),L.useEffect(()=>{if(i){let $=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout($)}}},[i]);let D=()=>{l(!0)},F=()=>{l(!1),d(!1)};return n?a!=="intent"?[u,A,{}]:[u,A,{onFocus:Xo(p,D),onBlur:Xo(y,F),onMouseEnter:Xo(g,D),onMouseLeave:Xo(x,F),onTouchStart:Xo(E,D)}]:[!1,A,{}]}function Xo(a,e){return n=>{a&&a(n),n.defaultPrevented||e(n)}}function _A({page:a,...e}){let{router:n}=zv(),i=L.useMemo(()=>Cv(n.routes,a,n.basename),[n.routes,a,n.basename]);return i?L.createElement(xA,{page:a,matches:i,...e}):null}function vA(a){let{manifest:e,routeModules:n}=Uv(),[i,l]=L.useState([]);return L.useEffect(()=>{let u=!1;return hA(a,e,n).then(d=>{u||l(d)}),()=>{u=!0}},[a,e,n]),i}function xA({page:a,matches:e,...n}){let i=ra(),{manifest:l,routeModules:u}=Uv(),{basename:d}=zv(),{loaderData:p,matches:y}=yA(),g=L.useMemo(()=>Kb(a,e,y,l,i,"data"),[a,e,y,l,i]),x=L.useMemo(()=>Kb(a,e,y,l,i,"assets"),[a,e,y,l,i]),E=L.useMemo(()=>{if(a===i.pathname+i.search+i.hash)return[];let F=new Set,$=!1;if(e.forEach(ne=>{var te;let ae=l.routes[ne.route.id];!ae||!ae.hasLoader||(!g.some(me=>me.route.id===ne.route.id)&&ne.route.id in p&&((te=u[ne.route.id])!=null&&te.shouldRevalidate)||ae.hasClientLoader?$=!0:F.add(ne.route.id))}),F.size===0)return[];let U=uA(a,d,"data");return $&&F.size>0&&U.searchParams.set("_routes",e.filter(ne=>F.has(ne.route.id)).map(ne=>ne.route.id).join(",")),[U.pathname+U.search]},[d,p,i,l,g,e,a,u]),A=L.useMemo(()=>fA(x,l),[x,l]),D=vA(x);return L.createElement(L.Fragment,null,E.map(F=>L.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...n})),A.map(F=>L.createElement("link",{key:F,rel:"modulepreload",href:F,...n})),D.map(({key:F,link:$})=>L.createElement("link",{key:F,nonce:n.nonce,...$})))}function EA(...a){return e=>{a.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Bv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bv&&(window.__reactRouterVersion="7.10.1")}catch{}function wA({basename:a,children:e,unstable_useTransitions:n,window:i}){let l=L.useRef();l.current==null&&(l.current=lT({window:i,v5Compat:!0}));let u=l.current,[d,p]=L.useState({action:u.action,location:u.location}),y=L.useCallback(g=>{n===!1?p(g):L.startTransition(()=>p(g))},[n]);return L.useLayoutEffect(()=>u.listen(y),[u,y]),L.createElement(JT,{basename:a,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n===!0})}var qv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ye=L.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:d,state:p,target:y,to:g,preventScrollReset:x,viewTransition:E,...A},D){let{basename:F,unstable_useTransitions:$}=L.useContext(sr),U=typeof g=="string"&&qv.test(g),ne,ae=!1;if(typeof g=="string"&&U&&(ne=g,Bv))try{let j=new URL(window.location.href),I=g.startsWith("//")?new URL(j.protocol+g):new URL(g),V=Ia(I.pathname,F);I.origin===j.origin&&V!=null?g=V+I.search+I.hash:ae=!0}catch{jn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let te=VT(g,{relative:l}),[me,Ne,Se]=bA(i,A),k=NA(g,{replace:d,state:p,target:y,preventScrollReset:x,relative:l,viewTransition:E,unstable_useTransitions:$});function S(j){e&&e(j),j.defaultPrevented||k(j)}let N=L.createElement("a",{...A,...Se,href:ne||te,onClick:ae||u?e:S,ref:EA(D,Ne),target:y,"data-discover":!U&&n==="render"?"true":void 0});return me&&!U?L.createElement(L.Fragment,null,N,L.createElement(_A,{page:te})):N});Ye.displayName="Link";var TA=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:p,children:y,...g},x){let E=vu(d,{relative:g.relative}),A=ra(),D=L.useContext(Gd),{navigator:F,basename:$}=L.useContext(sr),U=D!=null&&jA(E)&&p===!0,ne=F.encodeLocation?F.encodeLocation(E).pathname:E.pathname,ae=A.pathname,te=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),te=te?te.toLowerCase():null,ne=ne.toLowerCase()),te&&$&&(te=Ia(te,$)||te);const me=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let Ne=ae===ne||!l&&ae.startsWith(ne)&&ae.charAt(me)==="/",Se=te!=null&&(te===ne||!l&&te.startsWith(ne)&&te.charAt(ne.length)==="/"),k={isActive:Ne,isPending:Se,isTransitioning:U},S=Ne?e:void 0,N;typeof i=="function"?N=i(k):N=[i,Ne?"active":null,Se?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(k):u;return L.createElement(Ye,{...g,"aria-current":S,className:N,ref:x,style:j,to:d,viewTransition:p},typeof y=="function"?y(k):y)});TA.displayName="NavLink";var AA=L.forwardRef(({discover:a="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:d=dd,action:p,onSubmit:y,relative:g,preventScrollReset:x,viewTransition:E,...A},D)=>{let{unstable_useTransitions:F}=L.useContext(sr),$=IA(),U=DA(p,{relative:g}),ne=d.toLowerCase()==="get"?"get":"post",ae=typeof p=="string"&&qv.test(p),te=me=>{if(y&&y(me),me.defaultPrevented)return;me.preventDefault();let Ne=me.nativeEvent.submitter,Se=(Ne==null?void 0:Ne.getAttribute("formmethod"))||d,k=()=>$(Ne||me.currentTarget,{fetcherKey:e,method:Se,navigate:n,replace:l,state:u,relative:g,preventScrollReset:x,viewTransition:E});F&&n!==!1?L.startTransition(()=>k()):k()};return L.createElement("form",{ref:D,method:ne,action:U,onSubmit:i?y:te,...A,"data-discover":!ae&&a==="render"?"true":void 0})});AA.displayName="Form";function SA(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Hv(a){let e=L.useContext(Ol);return At(e,SA(a)),e}function NA(a,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_useTransitions:p}={}){let y=Es(),g=ra(),x=vu(a,{relative:u});return L.useCallback(E=>{if(aA(E,e)){E.preventDefault();let A=n!==void 0?n:lu(g)===lu(x),D=()=>y(a,{replace:A,state:i,preventScrollReset:l,relative:u,viewTransition:d});p?L.startTransition(()=>D()):D()}},[g,y,x,n,i,e,a,l,u,d,p])}function kA(a){jn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=L.useRef(Im(a)),n=L.useRef(!1),i=ra(),l=L.useMemo(()=>iA(i.search,n.current?null:e.current),[i.search]),u=Es(),d=L.useCallback((p,y)=>{const g=Im(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+g,y)},[u,l]);return[l,d]}var RA=0,CA=()=>`__${String(++RA)}__`;function IA(){let{router:a}=Hv("useSubmit"),{basename:e}=L.useContext(sr),n=QT(),i=a.fetch,l=a.navigate;return L.useCallback(async(u,d={})=>{let{action:p,method:y,encType:g,formData:x,body:E}=oA(u,e);if(d.navigate===!1){let A=d.fetcherKey||CA();await i(A,n,d.action||p,{preventScrollReset:d.preventScrollReset,formData:x,body:E,formMethod:d.method||y,formEncType:d.encType||g,flushSync:d.flushSync})}else await l(d.action||p,{preventScrollReset:d.preventScrollReset,formData:x,body:E,formMethod:d.method||y,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,l,e,n])}function DA(a,{relative:e}={}){let{basename:n}=L.useContext(sr),i=L.useContext(Tr);At(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...vu(a||".",{relative:e})},d=ra();if(a==null){u.search=d.search;let p=new URLSearchParams(u.search),y=p.getAll("index");if(y.some(x=>x==="")){p.delete("index"),y.filter(E=>E).forEach(E=>p.append("index",E));let x=p.toString();u.search=x?`?${x}`:""}}return(!a||a===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:ka([n,u.pathname])),lu(u)}function jA(a,{relative:e}={}){let n=L.useContext(Ov);At(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Hv("useViewTransitionState"),l=vu(a,{relative:e});if(!n.isTransitioning)return!1;let u=Ia(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=Ia(n.nextLocation.pathname,i)||n.nextLocation.pathname;return wd(l.pathname,d)!=null||wd(l.pathname,u)!=null}const OA=()=>{};var Xb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=function(a){const e=[];let n=0;for(let i=0;i<a.length;i++){let l=a.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<a.length&&(a.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},MA=function(a){const e=[];let n=0,i=0;for(;n<a.length;){const l=a[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=a[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=a[n++],d=a[n++],p=a[n++],y=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const u=a[n++],d=a[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Gv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<a.length;l+=3){const u=a[l],d=l+1<a.length,p=d?a[l+1]:0,y=l+2<a.length,g=y?a[l+2]:0,x=u>>2,E=(u&3)<<4|p>>4;let A=(p&15)<<2|g>>6,D=g&63;y||(D=64,d||(A=64)),i.push(n[x],n[E],n[A],n[D])}return i.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(Fv(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):MA(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<a.length;){const u=n[a.charAt(l++)],p=l<a.length?n[a.charAt(l)]:0;++l;const g=l<a.length?n[a.charAt(l)]:64;++l;const E=l<a.length?n[a.charAt(l)]:64;if(++l,u==null||p==null||g==null||E==null)throw new VA;const A=u<<2|p>>4;if(i.push(A),g!==64){const D=p<<4&240|g>>2;if(i.push(D),E!==64){const F=g<<6&192|E;i.push(F)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class VA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PA=function(a){const e=Fv(a);return Gv.encodeByteArray(e,!0)},Td=function(a){return PA(a).replace(/\./g,"")},Kv=function(a){try{return Gv.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=()=>LA().__FIREBASE_DEFAULTS__,UA=()=>{if(typeof process>"u"||typeof Xb>"u")return;const a=Xb.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},BA=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&Kv(a[1]);return e&&JSON.parse(e)},Xd=()=>{try{return OA()||zA()||UA()||BA()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},Xv=a=>{var e,n;return(n=(e=Xd())==null?void 0:e.emulatorHosts)==null?void 0:n[a]},qA=a=>{const e=Xv(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Qv=()=>{var a;return(a=Xd())==null?void 0:a.config},$v=a=>{var e;return(e=Xd())==null?void 0:e[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yv(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=a.iat||0,u=a.sub||a.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...a};return[Td(JSON.stringify(n)),Td(JSON.stringify(d)),""].join(".")}const tu={};function GA(){const a={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?a.emulator.push(e):a.prod.push(e);return a}function KA(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let Qb=!1;function Zv(a,e){if(typeof window>"u"||typeof document>"u"||!Vl(window.location.host)||tu[a]===e||tu[a]||Qb)return;tu[a]=e;function n(A){return`__firebase__banner__${A}`}const i="__firebase__banner",u=GA().prod.length>0;function d(){const A=document.getElementById(i);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function y(A,D){A.setAttribute("width","24"),A.setAttribute("id",D),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Qb=!0,d()},A}function x(A,D){A.setAttribute("id",D),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=KA(i),D=n("text"),F=document.getElementById(D)||document.createElement("span"),$=n("learnmore"),U=document.getElementById($)||document.createElement("a"),ne=n("preprendIcon"),ae=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const te=A.element;p(te),x(U,$);const me=g();y(ae,ne),te.append(ae,F,U,me),document.body.appendChild(te)}u?(F.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function QA(){var e;const a=(e=Xd())==null?void 0:e.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $A(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YA(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function ZA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JA(){const a=_n();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function WA(){return!QA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eS(){try{return typeof indexedDB=="object"}catch{return!1}}function tS(){return new Promise((a,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),a(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var u;e(((u=l.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="FirebaseError";class Va extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=nS,Object.setPrototypeOf(this,Va.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?rS(u,i):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Va(l,p,i)}}function rS(a,e){return a.replace(aS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const aS=/\{\$([^}]+)}/g;function iS(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function ps(a,e){if(a===e)return!0;const n=Object.keys(a),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=a[l],d=e[l];if($b(u)&&$b(d)){if(!ps(u,d))return!1}else if(u!==d)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function $b(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(a){const e=[];for(const[n,i]of Object.entries(a))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $o(a){const e={};return a.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Yo(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function sS(a,e){const n=new lS(a,e);return n.subscribe.bind(n)}class lS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");oS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=ym),l.error===void 0&&(l.error=ym),l.complete===void 0&&(l.complete=ym);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oS(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(a){return a&&a._delegate?a._delegate:a}class gs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new HA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dS(e))try{this.getOrInitializeService({instanceIdentifier:hs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hs){return this.instances.has(e)}getOptions(e=hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&d.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hs){return this.component?this.component.multipleInstances?e:hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cS(a){return a===hs?void 0:a}function dS(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Ke||(Ke={}));const fS={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},mS=Ke.INFO,pS={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},gS=(a,e,...n)=>{if(e<a.logLevel)return;const i=new Date().toISOString(),l=pS[e];if(l)console[l](`[${i}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mp{constructor(e){this.name=e,this._logLevel=mS,this._logHandler=gS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const yS=(a,e)=>e.some(n=>a instanceof n);let Yb,Zb;function bS(){return Yb||(Yb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _S(){return Zb||(Zb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jv=new WeakMap,Dm=new WeakMap,Wv=new WeakMap,bm=new WeakMap,pp=new WeakMap;function vS(a){const e=new Promise((n,i)=>{const l=()=>{a.removeEventListener("success",u),a.removeEventListener("error",d)},u=()=>{n(xi(a.result)),l()},d=()=>{i(a.error),l()};a.addEventListener("success",u),a.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Jv.set(n,a)}).catch(()=>{}),pp.set(e,a),e}function xS(a){if(Dm.has(a))return;const e=new Promise((n,i)=>{const l=()=>{a.removeEventListener("complete",u),a.removeEventListener("error",d),a.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{i(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",u),a.addEventListener("error",d),a.addEventListener("abort",d)});Dm.set(a,e)}let jm={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return Dm.get(a);if(e==="objectStoreNames")return a.objectStoreNames||Wv.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function ES(a){jm=a(jm)}function wS(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=a.call(_m(this),e,...n);return Wv.set(i,e.sort?e.sort():[e]),xi(i)}:_S().includes(a)?function(...e){return a.apply(_m(this),e),xi(Jv.get(this))}:function(...e){return xi(a.apply(_m(this),e))}}function TS(a){return typeof a=="function"?wS(a):(a instanceof IDBTransaction&&xS(a),yS(a,bS())?new Proxy(a,jm):a)}function xi(a){if(a instanceof IDBRequest)return vS(a);if(bm.has(a))return bm.get(a);const e=TS(a);return e!==a&&(bm.set(a,e),pp.set(e,a)),e}const _m=a=>pp.get(a);function AS(a,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const d=indexedDB.open(a,e),p=xi(d);return i&&d.addEventListener("upgradeneeded",y=>{i(xi(d.result),y.oldVersion,y.newVersion,xi(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{u&&y.addEventListener("close",()=>u()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const SS=["get","getKey","getAll","getAllKeys","count"],NS=["put","add","delete","clear"],vm=new Map;function Jb(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(vm.get(e))return vm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=NS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||SS.includes(n)))return;const u=async function(d,...p){const y=this.transaction(d,l?"readwrite":"readonly");let g=y.store;return i&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),l&&y.done]))[0]};return vm.set(e,u),u}ES(a=>({...a,get:(e,n,i)=>Jb(e,n)||a.get(e,n,i),has:(e,n)=>!!Jb(e,n)||a.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function RS(a){const e=a.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Om="@firebase/app",Wb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new mp("@firebase/app"),CS="@firebase/app-compat",IS="@firebase/analytics-compat",DS="@firebase/analytics",jS="@firebase/app-check-compat",OS="@firebase/app-check",MS="@firebase/auth",VS="@firebase/auth-compat",PS="@firebase/database",LS="@firebase/data-connect",zS="@firebase/database-compat",US="@firebase/functions",BS="@firebase/functions-compat",qS="@firebase/installations",HS="@firebase/installations-compat",FS="@firebase/messaging",GS="@firebase/messaging-compat",KS="@firebase/performance",XS="@firebase/performance-compat",QS="@firebase/remote-config",$S="@firebase/remote-config-compat",YS="@firebase/storage",ZS="@firebase/storage-compat",JS="@firebase/firestore",WS="@firebase/ai",e2="@firebase/firestore-compat",t2="firebase",n2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",r2={[Om]:"fire-core",[CS]:"fire-core-compat",[DS]:"fire-analytics",[IS]:"fire-analytics-compat",[OS]:"fire-app-check",[jS]:"fire-app-check-compat",[MS]:"fire-auth",[VS]:"fire-auth-compat",[PS]:"fire-rtdb",[LS]:"fire-data-connect",[zS]:"fire-rtdb-compat",[US]:"fire-fn",[BS]:"fire-fn-compat",[qS]:"fire-iid",[HS]:"fire-iid-compat",[FS]:"fire-fcm",[GS]:"fire-fcm-compat",[KS]:"fire-perf",[XS]:"fire-perf-compat",[QS]:"fire-rc",[$S]:"fire-rc-compat",[YS]:"fire-gcs",[ZS]:"fire-gcs-compat",[JS]:"fire-fst",[e2]:"fire-fst-compat",[WS]:"fire-vertex","fire-js":"fire-js",[t2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new Map,a2=new Map,Vm=new Map;function e_(a,e){try{a.container.addComponent(e)}catch(n){Da.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function Nl(a){const e=a.name;if(Vm.has(e))return Da.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,a);for(const n of Ad.values())e_(n,a);for(const n of a2.values())e_(n,a);return!0}function gp(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function ar(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new xu("app","Firebase",i2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=n2;function ex(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const i={name:Mm,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ei.create("bad-app-name",{appName:String(l)});if(n||(n=Qv()),!n)throw Ei.create("no-options");const u=Ad.get(l);if(u){if(ps(n,u.options)&&ps(i,u.config))return u;throw Ei.create("duplicate-app",{appName:l})}const d=new hS(l);for(const y of Vm.values())d.addComponent(y);const p=new s2(n,i,d);return Ad.set(l,p),p}function tx(a=Mm){const e=Ad.get(a);if(!e&&a===Mm&&Qv())return ex();if(!e)throw Ei.create("no-app",{appName:a});return e}function wi(a,e,n){let i=r2[a]??a;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Da.warn(d.join(" "));return}Nl(new gs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="firebase-heartbeat-database",o2=1,ou="firebase-heartbeat-store";let xm=null;function nx(){return xm||(xm=AS(l2,o2,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(ou)}catch(n){console.warn(n)}}}}).catch(a=>{throw Ei.create("idb-open",{originalErrorMessage:a.message})})),xm}async function u2(a){try{const n=(await nx()).transaction(ou),i=await n.objectStore(ou).get(rx(a));return await n.done,i}catch(e){if(e instanceof Va)Da.warn(e.message);else{const n=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Da.warn(n.message)}}}async function t_(a,e){try{const i=(await nx()).transaction(ou,"readwrite");await i.objectStore(ou).put(e,rx(a)),await i.done}catch(n){if(n instanceof Va)Da.warn(n.message);else{const i=Ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Da.warn(i.message)}}}function rx(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=1024,d2=30;class h2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new m2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=n_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:l}),this._heartbeatsCache.heartbeats.length>d2){const d=p2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Da.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=n_(),{heartbeatsToSend:i,unsentEntries:l}=f2(this._heartbeatsCache.heartbeats),u=Td(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Da.warn(n),""}}}function n_(){return new Date().toISOString().substring(0,10)}function f2(a,e=c2){const n=[];let i=a.slice();for(const l of a){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),r_(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),r_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class m2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eS()?tS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return t_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return t_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function r_(a){return Td(JSON.stringify({version:2,heartbeats:a})).length}function p2(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let i=1;i<a.length;i++)a[i].date<n&&(n=a[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(a){Nl(new gs("platform-logger",e=>new kS(e),"PRIVATE")),Nl(new gs("heartbeat",e=>new h2(e),"PRIVATE")),wi(Om,Wb,a),wi(Om,Wb,"esm2020"),wi("fire-js","")}g2("");var y2="firebase",b2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi(y2,b2,"app");function ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _2=ax,ix=new xu("auth","Firebase",ax());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new mp("@firebase/auth");function v2(a,...e){Sd.logLevel<=Ke.WARN&&Sd.warn(`Auth (${Pl}): ${a}`,...e)}function fd(a,...e){Sd.logLevel<=Ke.ERROR&&Sd.error(`Auth (${Pl}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(a,...e){throw yp(a,...e)}function $r(a,...e){return yp(a,...e)}function sx(a,e,n){const i={..._2(),[e]:n};return new xu("auth","Firebase",i).create(e,{appName:a.name})}function Ra(a){return sx(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yp(a,...e){if(typeof a!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=a.name),a._errorFactory.create(n,...i)}return ix.create(a,...e)}function Ee(a,e,...n){if(!a)throw yp(e,...n)}function Sa(a){const e="INTERNAL ASSERTION FAILED: "+a;throw fd(e),new Error(e)}function ja(a,e){a||Sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.href)||""}function x2(){return a_()==="http:"||a_()==="https:"}function a_(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x2()||YA()||"connection"in navigator)?navigator.onLine:!0}function w2(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ja(n>e,"Short delay should be less than long delay!"),this.isMobile=XA()||ZA()}get(){return E2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(a,e){ja(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],S2=new wu(3e4,6e4);function Di(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function ji(a,e,n,i,l={}){return ox(a,l,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const p=Eu({key:a.config.apiKey,...d}).slice(1),y=await a._getAdditionalHeaders();y["Content-Type"]="application/json",a.languageCode&&(y["X-Firebase-Locale"]=a.languageCode);const g={method:e,headers:y,...u};return $A()||(g.referrerPolicy="no-referrer"),a.emulatorConfig&&Vl(a.emulatorConfig.host)&&(g.credentials="include"),lx.fetch()(await ux(a,a.config.apiHost,n,p),g)})}async function ox(a,e,n){a._canInitEmulator=!1;const i={...T2,...e};try{const l=new k2(a),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw ad(a,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw ad(a,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw ad(a,"email-already-in-use",d);if(y==="USER_DISABLED")throw ad(a,"user-disabled",d);const x=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw sx(a,x,g);Er(a,x)}}catch(l){if(l instanceof Va)throw l;Er(a,"network-request-failed",{message:String(l)})}}async function Tu(a,e,n,i,l={}){const u=await ji(a,e,n,i,l);return"mfaPendingCredential"in u&&Er(a,"multi-factor-auth-required",{_serverResponse:u}),u}async function ux(a,e,n,i){const l=`${e}${n}?${i}`,u=a,d=u.config.emulator?bp(a.config,l):`${a.config.apiScheme}://${l}`;return A2.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function N2(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class k2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i($r(this.auth,"network-request-failed")),S2.get())})}}function ad(a,e,n){const i={appName:a.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=$r(a,e,i);return l.customData._tokenResponse=n,l}function i_(a){return a!==void 0&&a.enterprise!==void 0}class R2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return N2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C2(a,e){return ji(a,"GET","/v2/recaptchaConfig",Di(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(a,e){return ji(a,"POST","/v1/accounts:delete",e)}async function Nd(a,e){return ji(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function D2(a,e=!1){const n=rn(a),i=await n.getIdToken(e),l=_p(i);Ee(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:l,token:i,authTime:nu(Em(l.auth_time)),issuedAtTime:nu(Em(l.iat)),expirationTime:nu(Em(l.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Em(a){return Number(a)*1e3}function _p(a){const[e,n,i]=a.split(".");if(e===void 0||n===void 0||i===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{const l=Kv(n);return l?JSON.parse(l):(fd("Failed to decode base64 JWT payload"),null)}catch(l){return fd("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function s_(a){const e=_p(a);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(a,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Va&&j2(i)&&a.auth.currentUser===a&&await a.auth.signOut(),i}}function j2({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(a){var E;const e=a.auth,n=await a.getIdToken(),i=await uu(a,Nd(e,{idToken:n}));Ee(i==null?void 0:i.users.length,e,"internal-error");const l=i.users[0];a._notifyReloadListener(l);const u=(E=l.providerUserInfo)!=null&&E.length?cx(l.providerUserInfo):[],d=V2(a.providerData,u),p=a.isAnonymous,y=!(a.email&&l.passwordHash)&&!(d!=null&&d.length),g=p?y:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Lm(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(a,x)}async function M2(a){const e=rn(a);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function V2(a,e){return[...a.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function cx(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2(a,e){const n=await ox(a,{},async()=>{const i=Eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=a.config,d=await ux(a,l,"/v1/token",`key=${u}`),p=await a._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:i};return a.emulatorConfig&&Vl(a.emulatorConfig.host)&&(y.credentials="include"),lx.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function L2(a,e){return ji(a,"POST","/v2/accounts:revokeToken",Di(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):s_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=s_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await P2(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,d=new xl;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),l&&(Ee(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(Ee(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xl,this.toJSON())}_performRefresh(){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(a,e){Ee(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class vr{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new O2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Lm(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await uu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return D2(this,e)}reload(){return M2(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(Ra(this.auth));const e=await this.getIdToken();return await uu(this,I2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,g=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:D,providerData:F,stsTokenManager:$}=n;Ee(E&&$,e,"internal-error");const U=xl.fromJSON(this.name,$);Ee(typeof E=="string",e,"internal-error"),mi(i,e.name),mi(l,e.name),Ee(typeof A=="boolean",e,"internal-error"),Ee(typeof D=="boolean",e,"internal-error"),mi(u,e.name),mi(d,e.name),mi(p,e.name),mi(y,e.name),mi(g,e.name),mi(x,e.name);const ne=new vr({uid:E,auth:e,email:l,emailVerified:A,displayName:i,isAnonymous:D,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:U,createdAt:g,lastLoginAt:x});return F&&Array.isArray(F)&&(ne.providerData=F.map(ae=>({...ae}))),y&&(ne._redirectEventId=y),ne}static async _fromIdTokenResponse(e,n,i=!1){const l=new xl;l.updateFromServerResponse(n);const u=new vr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await kd(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Ee(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?cx(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(u!=null&&u.length),p=new xl;p.updateFromIdToken(i);const y=new vr({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Lm(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=new Map;function Na(a){ja(a instanceof Function,"Expected a class definition");let e=l_.get(a);return e?(ja(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,l_.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dx.type="NONE";const o_=dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(a,e,n){return`firebase:${a}:${e}:${n}`}class El{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=md(this.userKey,l.apiKey,u),this.fullPersistenceKey=md("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Nd(this.auth,{idToken:e}).catch(()=>{});return n?vr._fromGetAccountInfoResponse(this.auth,n,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new El(Na(o_),e,i);const l=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=l[0]||Na(o_);const d=md(i,e.config.apiKey,e.name);let p=null;for(const g of n)try{const x=await g._get(d);if(x){let E;if(typeof x=="string"){const A=await Nd(e,{idToken:x}).catch(()=>{});if(!A)break;E=await vr._fromGetAccountInfoResponse(e,A,x)}else E=vr._fromJSON(e,x);g!==u&&(p=E),u=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new El(u,e,i):(u=y[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(d)}catch{}})),new El(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(px(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yx(e))return"Blackberry";if(bx(e))return"Webos";if(fx(e))return"Safari";if((e.includes("chrome/")||mx(e))&&!e.includes("edge/"))return"Chrome";if(gx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=a.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function hx(a=_n()){return/firefox\//i.test(a)}function fx(a=_n()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mx(a=_n()){return/crios\//i.test(a)}function px(a=_n()){return/iemobile/i.test(a)}function gx(a=_n()){return/android/i.test(a)}function yx(a=_n()){return/blackberry/i.test(a)}function bx(a=_n()){return/webos/i.test(a)}function vp(a=_n()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function z2(a=_n()){var e;return vp(a)&&!!((e=window.navigator)!=null&&e.standalone)}function U2(){return JA()&&document.documentMode===10}function _x(a=_n()){return vp(a)||gx(a)||bx(a)||yx(a)||/windows phone/i.test(a)||px(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(a,e=[]){let n;switch(a){case"Browser":n=u_(_n());break;case"Worker":n=`${u_(_n())}-${a}`;break;default:n=a}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,p)=>{try{const y=e(u);d(y)}catch(y){p(y)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2(a,e={}){return ji(a,"GET","/v2/passwordPolicy",Di(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=6;class F2{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??H2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c_(this),this.idTokenSubscription=new c_(this),this.beforeStateQueue=new B2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ix,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Na(n)),this._initializationPromise=this.queue(async()=>{var i,l,u;if(!this._deleted&&(this.persistenceManager=await El.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Nd(this,{idToken:e}),i=await vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(ar(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(u=this.redirectUser)==null?void 0:u._redirectEventId,p=i==null?void 0:i._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===p)&&(y!=null&&y.user)&&(i=y.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(d){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(Ra(this));const n=e?rn(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await q2(this),n=new F2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await L2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Na(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[Na(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,i,l);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&v2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ws(a){return rn(a)}class c_{constructor(e){this.auth=e,this.observer=null,this.addObserver=sS(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K2(a){Qd=a}function xx(a){return Qd.loadJS(a)}function X2(){return Qd.recaptchaEnterpriseScript}function Q2(){return Qd.gapiScript}function $2(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class Y2{constructor(){this.enterprise=new Z2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Z2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const J2="recaptcha-enterprise",Ex="NO_RECAPTCHA";class W2{constructor(e){this.type=J2,this.auth=ws(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{C2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new R2(y);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,d(g.siteKey)}}).catch(y=>{p(y)})})}function l(u,d,p){const y=window.grecaptcha;i_(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(g=>{d(g)}).catch(()=>{d(Ex)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Y2().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(p=>{if(!n&&i_(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=X2();y.length!==0&&(y+=p),xx(y).then(()=>{l(p,u,d)}).catch(g=>{d(g)})}}).catch(p=>{d(p)})})}}async function d_(a,e,n,i=!1,l=!1){const u=new W2(a);let d;if(l)d=Ex;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function zm(a,e,n,i,l){var u;if((u=a._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await d_(a,e,n,n==="getOobCode");return i(a,d)}else return i(a,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await d_(a,e,n,n==="getOobCode");return i(a,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(a,e){const n=gp(a,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(ps(u,e??{}))return l;Er(l,"already-initialized")}return n.initialize({options:e})}function tN(a,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Na);e!=null&&e.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function nN(a,e,n){const i=ws(a);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=wx(e),{host:d,port:p}=rN(e),y=p===null?"":`:${p}`,g={url:`${u}//${d}${y}/`},x=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(ps(g,i.config.emulator)&&ps(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,Vl(d)?(Yv(`${u}//${d}${y}`),Zv("Auth",!0)):aN()}function wx(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function rN(a){const e=wx(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:h_(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:h_(d)}}}function h_(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function aN(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sa("not implemented")}_getIdTokenResponse(e){return Sa("not implemented")}_linkToIdToken(e,n){return Sa("not implemented")}_getReauthenticationResolver(e){return Sa("not implemented")}}async function iN(a,e){return ji(a,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(a,e){return Tu(a,"POST","/v1/accounts:signInWithPassword",Di(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(a,e){return Tu(a,"POST","/v1/accounts:signInWithEmailLink",Di(a,e))}async function oN(a,e){return Tu(a,"POST","/v1/accounts:signInWithEmailLink",Di(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends xp{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new cu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new cu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,n,"signInWithPassword",sN);case"emailLink":return lN(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,i,"signUpPassword",iN);case"emailLink":return oN(e,{idToken:n,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(a,e){return Tu(a,"POST","/v1/accounts:signInWithIdp",Di(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="http://localhost";class ys extends xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const d=new ys(i,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return wl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,wl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wl(e,n)}buildRequest(){const e={requestUri:uN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Eu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dN(a){const e=$o(Yo(a)).link,n=e?$o(Yo(e)).deep_link_id:null,i=$o(Yo(a)).deep_link_id;return(i?$o(Yo(i)).link:null)||i||n||e||a}class Ep{constructor(e){const n=$o(Yo(e)),i=n.apiKey??null,l=n.oobCode??null,u=cN(n.mode??null);Ee(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=dN(e);try{return new Ep(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.providerId=Ll.PROVIDER_ID}static credential(e,n){return cu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Ep.parseLink(n);return Ee(i,"argument-error"),cu._fromEmailAndCode(e,i.code,i.tenantId)}}Ll.PROVIDER_ID="password";Ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Tx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Au{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ys._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return gi.credential(n,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Au{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Au{constructor(){super("twitter.com")}static credential(e,n){return ys._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return bi.credential(n,i)}catch{return null}}}bi.TWITTER_SIGN_IN_METHOD="twitter.com";bi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(a,e){return Tu(a,"POST","/v1/accounts:signUp",Di(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await vr._fromIdTokenResponse(e,i,l),d=f_(i);return new bs({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=f_(i);return new bs({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function f_(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd extends Va{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Rd(e,n,i,l)}}function Ax(a,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(a,u,e,i):u})}async function fN(a,e,n=!1){const i=await uu(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return bs._forOperation(a,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(a,e,n=!1){const{auth:i}=a;if(ar(i.app))return Promise.reject(Ra(i));const l="reauthenticate";try{const u=await uu(a,Ax(i,l,e,a),n);Ee(u.idToken,i,"internal-error");const d=_p(u.idToken);Ee(d,i,"internal-error");const{sub:p}=d;return Ee(a.uid===p,i,"user-mismatch"),bs._forOperation(a,l,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Er(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(a,e,n=!1){if(ar(a.app))return Promise.reject(Ra(a));const i="signIn",l=await Ax(a,i,e),u=await bs._fromIdTokenResponse(a,i,l);return n||await a._updateCurrentUser(u.user),u}async function pN(a,e){return Sx(ws(a),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(a){const e=ws(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gN(a,e,n){if(ar(a.app))return Promise.reject(Ra(a));const i=ws(a),d=await zm(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hN).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Nx(a),y}),p=await bs._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function yN(a,e,n){return ar(a.app)?Promise.reject(Ra(a)):pN(rn(a),Ll.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Nx(a),i})}function bN(a,e,n,i){return rn(a).onIdTokenChanged(e,n,i)}function _N(a,e,n){return rn(a).beforeAuthStateChanged(e,n)}function vN(a,e,n,i){return rn(a).onAuthStateChanged(e,n,i)}function xN(a){return rn(a).signOut()}const Cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=1e3,wN=10;class Rx extends kx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_x(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);U2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,wN):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},EN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rx.type="LOCAL";const TN=Rx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx extends kx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Cx.type="SESSION";const Ix=Cx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new $d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(d).map(async g=>g(n.origin,u)),y=await AN(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(a="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return a+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,y)=>{const g=wp("",20);l.port1.start();const x=setTimeout(()=>{y(new Error("unsupported_event"))},i);d={messageChannel:l,onMessage(E){const A=E;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(A.data.response);break;default:clearTimeout(x),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return window}function NN(a){Yr().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){return typeof Yr().WorkerGlobalScope<"u"&&typeof Yr().importScripts=="function"}async function kN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RN(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)==null?void 0:a.controller)||null}function CN(){return Dx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="firebaseLocalStorageDb",IN=1,Id="firebaseLocalStorage",Ox="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yd(a,e){return a.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function DN(){const a=indexedDB.deleteDatabase(jx);return new Su(a).toPromise()}function Um(){const a=indexedDB.open(jx,IN);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const i=a.result;try{i.createObjectStore(Id,{keyPath:Ox})}catch(l){n(l)}}),a.addEventListener("success",async()=>{const i=a.result;i.objectStoreNames.contains(Id)?e(i):(i.close(),await DN(),e(await Um()))})})}async function m_(a,e,n){const i=Yd(a,!0).put({[Ox]:e,value:n});return new Su(i).toPromise()}async function jN(a,e){const n=Yd(a,!1).get(e),i=await new Su(n).toPromise();return i===void 0?null:i.value}function p_(a,e){const n=Yd(a,!0).delete(e);return new Su(n).toPromise()}const ON=800,MN=3;class Mx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>MN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(CN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await kN(),!this.activeServiceWorker)return;this.sender=new SN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await m_(e,Cd,"1"),await p_(e,Cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>m_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>jN(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Yd(l,!1).getAll();return new Su(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ON)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mx.type="LOCAL";const VN=Mx;new wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(a,e){return e?Na(e):(Ee(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp extends xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LN(a){return Sx(a.auth,new Tp(a),a.bypassAuthState)}function zN(a){const{auth:e,user:n}=a;return Ee(n,e,"internal-error"),mN(n,new Tp(a),a.bypassAuthState)}async function UN(a){const{auth:e,user:n}=a;return Ee(n,e,"internal-error"),fN(n,new Tp(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LN;case"linkViaPopup":case"linkViaRedirect":return UN;case"reauthViaPopup":case"reauthViaRedirect":return zN;default:Er(this.auth,"internal-error")}}resolve(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new wu(2e3,1e4);class _l extends Vx{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,_l.currentPopupAction&&_l.currentPopupAction.cancel(),_l.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){ja(this.filter.length===1,"Popup operations only handle one event");const e=wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_l.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BN.get())};e()}}_l.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="pendingRedirect",pd=new Map;class HN extends Vx{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const i=await FN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FN(a,e){const n=XN(e),i=KN(a);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function GN(a,e){pd.set(a._key(),e)}function KN(a){return Na(a._redirectPersistence)}function XN(a){return md(qN,a.config.apiKey,a.name)}async function QN(a,e,n=!1){if(ar(a.app))return Promise.reject(Ra(a));const i=ws(a),l=PN(i,e),d=await new HN(i,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=600*1e3;class YN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Px(e)){const l=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError($r(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$N&&this.cachedEventUids.clear(),this.cachedEventUids.has(g_(e))}saveEventToCache(e){this.cachedEventUids.add(g_(e)),this.lastProcessedEventTime=Date.now()}}function g_(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function Px({type:a,error:e}){return a==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZN(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Px(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(a,e={}){return ji(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ek=/^https?/;async function tk(a){if(a.config.emulator)return;const{authorizedDomains:e}=await JN(a);for(const n of e)try{if(nk(n))return}catch{}Er(a,"unauthorized-domain")}function nk(a){const e=Pm(),{protocol:n,hostname:i}=new URL(e);if(a.startsWith("chrome-extension://")){const d=new URL(a);return d.hostname===""&&i===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!ek.test(n))return!1;if(WN.test(a))return i===a;const l=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new wu(3e4,6e4);function y_(){const a=Yr().___jsl;if(a!=null&&a.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function ak(a){return new Promise((e,n)=>{var l,u,d;function i(){y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y_(),n($r(a,"network-request-failed"))},timeout:rk.get()})}if((u=(l=Yr().gapi)==null?void 0:l.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((d=Yr().gapi)!=null&&d.load)i();else{const p=$2("iframefcb");return Yr()[p]=()=>{gapi.load?i():n($r(a,"network-request-failed"))},xx(`${Q2()}?onload=${p}`).catch(y=>n(y))}}).catch(e=>{throw gd=null,e})}let gd=null;function ik(a){return gd=gd||ak(a),gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=new wu(5e3,15e3),lk="__/auth/iframe",ok="emulator/auth/iframe",uk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ck=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dk(a){const e=a.config;Ee(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?bp(e,ok):`https://${a.config.authDomain}/${lk}`,i={apiKey:e.apiKey,appName:a.name,v:Pl},l=ck.get(a.config.apiHost);l&&(i.eid=l);const u=a._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${Eu(i).slice(1)}`}async function hk(a){const e=await ik(a),n=Yr().gapi;return Ee(n,a,"internal-error"),e.open({where:document.body,url:dk(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uk,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const d=$r(a,"network-request-failed"),p=Yr().setTimeout(()=>{u(d)},sk.get());function y(){Yr().clearTimeout(p),l(i)}i.ping(y).then(y,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mk=500,pk=600,gk="_blank",yk="http://localhost";class b_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bk(a,e,n,i=mk,l=pk){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const y={...fk,width:i.toString(),height:l.toString(),top:u,left:d},g=_n().toLowerCase();n&&(p=mx(g)?gk:n),hx(g)&&(e=e||yk,y.scrollbars="yes");const x=Object.entries(y).reduce((A,[D,F])=>`${A}${D}=${F},`,"");if(z2(g)&&p!=="_self")return _k(e||"",p),new b_(null);const E=window.open(e||"",p,x);Ee(E,a,"popup-blocked");try{E.focus()}catch{}return new b_(E)}function _k(a,e){const n=document.createElement("a");n.href=a,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="__/auth/handler",xk="emulator/auth/handler",Ek=encodeURIComponent("fac");async function __(a,e,n,i,l,u){Ee(a.config.authDomain,a,"auth-domain-config-required"),Ee(a.config.apiKey,a,"invalid-api-key");const d={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:i,v:Pl,eventId:l};if(e instanceof Tx){e.setDefaultLanguage(a.languageCode),d.providerId=e.providerId||"",iS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,E]of Object.entries({}))d[x]=E}if(e instanceof Au){const x=e.getScopes().filter(E=>E!=="");x.length>0&&(d.scopes=x.join(","))}a.tenantId&&(d.tid=a.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const y=await a._getAppCheckToken(),g=y?`#${Ek}=${encodeURIComponent(y)}`:"";return`${wk(a)}?${Eu(p).slice(1)}${g}`}function wk({config:a}){return a.emulator?bp(a,xk):`https://${a.authDomain}/${vk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="webStorageSupport";class Tk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ix,this._completeRedirectFn=QN,this._overrideRedirectResult=GN}async _openPopup(e,n,i,l){var d;ja((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const u=await __(e,n,i,Pm(),l);return bk(e,u,wp())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await __(e,n,i,Pm(),l);return NN(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(ja(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await hk(e),i=new YN(e);return n.register("authEvent",l=>(Ee(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wm,{type:wm},l=>{var d;const u=(d=l==null?void 0:l[0])==null?void 0:d[wm];u!==void 0&&n(!!u),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _x()||fx()||vp()}}const Ak=Tk;var v_="@firebase/auth",x_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kk(a){Nl(new gs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;Ee(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:d,authDomain:p,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vx(a)},g=new G2(i,l,u,y);return tN(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Nl(new gs("auth-internal",e=>{const n=ws(e.getProvider("auth").getImmediate());return(i=>new Sk(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(v_,x_,Nk(a)),wi(v_,x_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=300,Ck=$v("authIdTokenMaxAge")||Rk;let E_=null;const Ik=a=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Ck)return;const l=n==null?void 0:n.token;E_!==l&&(E_=l,await fetch(a,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Dk(a=tx()){const e=gp(a,"auth");if(e.isInitialized())return e.getImmediate();const n=eN(a,{popupRedirectResolver:Ak,persistence:[VN,TN,Ix]}),i=$v("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=Ik(u.toString());_N(n,d,()=>d(n.currentUser)),bN(n,p=>d(p))}}const l=Xv("auth");return l&&nN(n,`http://${l}`),n}function jk(){var a;return((a=document.getElementsByTagName("head"))==null?void 0:a[0])??document}K2({loadJS(a){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",a),i.onload=e,i.onerror=l=>{const u=$r("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",jk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kk("Browser");var w_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,Lx;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,S){function N(){}N.prototype=S.prototype,k.F=S.prototype,k.prototype=new N,k.prototype.constructor=k,k.D=function(j,I,V){for(var R=Array(arguments.length-2),it=2;it<arguments.length;it++)R[it-2]=arguments[it];return S.prototype[I].apply(j,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(k,S,N){N||(N=0);const j=Array(16);if(typeof S=="string")for(var I=0;I<16;++I)j[I]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(I=0;I<16;++I)j[I]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=k.g[0],N=k.g[1],I=k.g[2];let V=k.g[3],R;R=S+(V^N&(I^V))+j[0]+3614090360&4294967295,S=N+(R<<7&4294967295|R>>>25),R=V+(I^S&(N^I))+j[1]+3905402710&4294967295,V=S+(R<<12&4294967295|R>>>20),R=I+(N^V&(S^N))+j[2]+606105819&4294967295,I=V+(R<<17&4294967295|R>>>15),R=N+(S^I&(V^S))+j[3]+3250441966&4294967295,N=I+(R<<22&4294967295|R>>>10),R=S+(V^N&(I^V))+j[4]+4118548399&4294967295,S=N+(R<<7&4294967295|R>>>25),R=V+(I^S&(N^I))+j[5]+1200080426&4294967295,V=S+(R<<12&4294967295|R>>>20),R=I+(N^V&(S^N))+j[6]+2821735955&4294967295,I=V+(R<<17&4294967295|R>>>15),R=N+(S^I&(V^S))+j[7]+4249261313&4294967295,N=I+(R<<22&4294967295|R>>>10),R=S+(V^N&(I^V))+j[8]+1770035416&4294967295,S=N+(R<<7&4294967295|R>>>25),R=V+(I^S&(N^I))+j[9]+2336552879&4294967295,V=S+(R<<12&4294967295|R>>>20),R=I+(N^V&(S^N))+j[10]+4294925233&4294967295,I=V+(R<<17&4294967295|R>>>15),R=N+(S^I&(V^S))+j[11]+2304563134&4294967295,N=I+(R<<22&4294967295|R>>>10),R=S+(V^N&(I^V))+j[12]+1804603682&4294967295,S=N+(R<<7&4294967295|R>>>25),R=V+(I^S&(N^I))+j[13]+4254626195&4294967295,V=S+(R<<12&4294967295|R>>>20),R=I+(N^V&(S^N))+j[14]+2792965006&4294967295,I=V+(R<<17&4294967295|R>>>15),R=N+(S^I&(V^S))+j[15]+1236535329&4294967295,N=I+(R<<22&4294967295|R>>>10),R=S+(I^V&(N^I))+j[1]+4129170786&4294967295,S=N+(R<<5&4294967295|R>>>27),R=V+(N^I&(S^N))+j[6]+3225465664&4294967295,V=S+(R<<9&4294967295|R>>>23),R=I+(S^N&(V^S))+j[11]+643717713&4294967295,I=V+(R<<14&4294967295|R>>>18),R=N+(V^S&(I^V))+j[0]+3921069994&4294967295,N=I+(R<<20&4294967295|R>>>12),R=S+(I^V&(N^I))+j[5]+3593408605&4294967295,S=N+(R<<5&4294967295|R>>>27),R=V+(N^I&(S^N))+j[10]+38016083&4294967295,V=S+(R<<9&4294967295|R>>>23),R=I+(S^N&(V^S))+j[15]+3634488961&4294967295,I=V+(R<<14&4294967295|R>>>18),R=N+(V^S&(I^V))+j[4]+3889429448&4294967295,N=I+(R<<20&4294967295|R>>>12),R=S+(I^V&(N^I))+j[9]+568446438&4294967295,S=N+(R<<5&4294967295|R>>>27),R=V+(N^I&(S^N))+j[14]+3275163606&4294967295,V=S+(R<<9&4294967295|R>>>23),R=I+(S^N&(V^S))+j[3]+4107603335&4294967295,I=V+(R<<14&4294967295|R>>>18),R=N+(V^S&(I^V))+j[8]+1163531501&4294967295,N=I+(R<<20&4294967295|R>>>12),R=S+(I^V&(N^I))+j[13]+2850285829&4294967295,S=N+(R<<5&4294967295|R>>>27),R=V+(N^I&(S^N))+j[2]+4243563512&4294967295,V=S+(R<<9&4294967295|R>>>23),R=I+(S^N&(V^S))+j[7]+1735328473&4294967295,I=V+(R<<14&4294967295|R>>>18),R=N+(V^S&(I^V))+j[12]+2368359562&4294967295,N=I+(R<<20&4294967295|R>>>12),R=S+(N^I^V)+j[5]+4294588738&4294967295,S=N+(R<<4&4294967295|R>>>28),R=V+(S^N^I)+j[8]+2272392833&4294967295,V=S+(R<<11&4294967295|R>>>21),R=I+(V^S^N)+j[11]+1839030562&4294967295,I=V+(R<<16&4294967295|R>>>16),R=N+(I^V^S)+j[14]+4259657740&4294967295,N=I+(R<<23&4294967295|R>>>9),R=S+(N^I^V)+j[1]+2763975236&4294967295,S=N+(R<<4&4294967295|R>>>28),R=V+(S^N^I)+j[4]+1272893353&4294967295,V=S+(R<<11&4294967295|R>>>21),R=I+(V^S^N)+j[7]+4139469664&4294967295,I=V+(R<<16&4294967295|R>>>16),R=N+(I^V^S)+j[10]+3200236656&4294967295,N=I+(R<<23&4294967295|R>>>9),R=S+(N^I^V)+j[13]+681279174&4294967295,S=N+(R<<4&4294967295|R>>>28),R=V+(S^N^I)+j[0]+3936430074&4294967295,V=S+(R<<11&4294967295|R>>>21),R=I+(V^S^N)+j[3]+3572445317&4294967295,I=V+(R<<16&4294967295|R>>>16),R=N+(I^V^S)+j[6]+76029189&4294967295,N=I+(R<<23&4294967295|R>>>9),R=S+(N^I^V)+j[9]+3654602809&4294967295,S=N+(R<<4&4294967295|R>>>28),R=V+(S^N^I)+j[12]+3873151461&4294967295,V=S+(R<<11&4294967295|R>>>21),R=I+(V^S^N)+j[15]+530742520&4294967295,I=V+(R<<16&4294967295|R>>>16),R=N+(I^V^S)+j[2]+3299628645&4294967295,N=I+(R<<23&4294967295|R>>>9),R=S+(I^(N|~V))+j[0]+4096336452&4294967295,S=N+(R<<6&4294967295|R>>>26),R=V+(N^(S|~I))+j[7]+1126891415&4294967295,V=S+(R<<10&4294967295|R>>>22),R=I+(S^(V|~N))+j[14]+2878612391&4294967295,I=V+(R<<15&4294967295|R>>>17),R=N+(V^(I|~S))+j[5]+4237533241&4294967295,N=I+(R<<21&4294967295|R>>>11),R=S+(I^(N|~V))+j[12]+1700485571&4294967295,S=N+(R<<6&4294967295|R>>>26),R=V+(N^(S|~I))+j[3]+2399980690&4294967295,V=S+(R<<10&4294967295|R>>>22),R=I+(S^(V|~N))+j[10]+4293915773&4294967295,I=V+(R<<15&4294967295|R>>>17),R=N+(V^(I|~S))+j[1]+2240044497&4294967295,N=I+(R<<21&4294967295|R>>>11),R=S+(I^(N|~V))+j[8]+1873313359&4294967295,S=N+(R<<6&4294967295|R>>>26),R=V+(N^(S|~I))+j[15]+4264355552&4294967295,V=S+(R<<10&4294967295|R>>>22),R=I+(S^(V|~N))+j[6]+2734768916&4294967295,I=V+(R<<15&4294967295|R>>>17),R=N+(V^(I|~S))+j[13]+1309151649&4294967295,N=I+(R<<21&4294967295|R>>>11),R=S+(I^(N|~V))+j[4]+4149444226&4294967295,S=N+(R<<6&4294967295|R>>>26),R=V+(N^(S|~I))+j[11]+3174756917&4294967295,V=S+(R<<10&4294967295|R>>>22),R=I+(S^(V|~N))+j[2]+718787259&4294967295,I=V+(R<<15&4294967295|R>>>17),R=N+(V^(I|~S))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+I&4294967295,k.g[3]=k.g[3]+V&4294967295}i.prototype.v=function(k,S){S===void 0&&(S=k.length);const N=S-this.blockSize,j=this.C;let I=this.h,V=0;for(;V<S;){if(I==0)for(;V<=N;)l(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<S;)if(j[I++]=k.charCodeAt(V++),I==this.blockSize){l(this,j),I=0;break}}else for(;V<S;)if(j[I++]=k[V++],I==this.blockSize){l(this,j),I=0;break}}this.h=I,this.o+=S},i.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;S=this.o*8;for(var N=k.length-8;N<k.length;++N)k[N]=S&255,S/=256;for(this.v(k),k=Array(16),S=0,N=0;N<4;++N)for(let j=0;j<32;j+=8)k[S++]=this.g[N]>>>j&255;return k};function u(k,S){var N=p;return Object.prototype.hasOwnProperty.call(N,k)?N[k]:N[k]=S(k)}function d(k,S){this.h=S;const N=[];let j=!0;for(let I=k.length-1;I>=0;I--){const V=k[I]|0;j&&V==S||(N[I]=V,j=!1)}this.g=N}var p={};function y(k){return-128<=k&&k<128?u(k,function(S){return new d([S|0],S<0?-1:0)}):new d([k|0],k<0?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return E;if(k<0)return U(g(-k));const S=[];let N=1;for(let j=0;k>=N;j++)S[j]=k/N|0,N*=4294967296;return new d(S,0)}function x(k,S){if(k.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(k.charAt(0)=="-")return U(x(k.substring(1),S));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(S,8));let j=E;for(let V=0;V<k.length;V+=8){var I=Math.min(8,k.length-V);const R=parseInt(k.substring(V,V+I),S);I<8?(I=g(Math.pow(S,I)),j=j.j(I).add(g(R))):(j=j.j(N),j=j.add(g(R)))}return j}var E=y(0),A=y(1),D=y(16777216);a=d.prototype,a.m=function(){if($(this))return-U(this).m();let k=0,S=1;for(let N=0;N<this.g.length;N++){const j=this.i(N);k+=(j>=0?j:4294967296+j)*S,S*=4294967296}return k},a.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(F(this))return"0";if($(this))return"-"+U(this).toString(k);const S=g(Math.pow(k,6));var N=this;let j="";for(;;){const I=me(N,S).g;N=ne(N,I.j(S));let V=((N.g.length>0?N.g[0]:N.h)>>>0).toString(k);if(N=I,F(N))return V+j;for(;V.length<6;)V="0"+V;j=V+j}},a.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function F(k){if(k.h!=0)return!1;for(let S=0;S<k.g.length;S++)if(k.g[S]!=0)return!1;return!0}function $(k){return k.h==-1}a.l=function(k){return k=ne(this,k),$(k)?-1:F(k)?0:1};function U(k){const S=k.g.length,N=[];for(let j=0;j<S;j++)N[j]=~k.g[j];return new d(N,~k.h).add(A)}a.abs=function(){return $(this)?U(this):this},a.add=function(k){const S=Math.max(this.g.length,k.g.length),N=[];let j=0;for(let I=0;I<=S;I++){let V=j+(this.i(I)&65535)+(k.i(I)&65535),R=(V>>>16)+(this.i(I)>>>16)+(k.i(I)>>>16);j=R>>>16,V&=65535,R&=65535,N[I]=R<<16|V}return new d(N,N[N.length-1]&-2147483648?-1:0)};function ne(k,S){return k.add(U(S))}a.j=function(k){if(F(this)||F(k))return E;if($(this))return $(k)?U(this).j(U(k)):U(U(this).j(k));if($(k))return U(this.j(U(k)));if(this.l(D)<0&&k.l(D)<0)return g(this.m()*k.m());const S=this.g.length+k.g.length,N=[];for(var j=0;j<2*S;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(let I=0;I<k.g.length;I++){const V=this.i(j)>>>16,R=this.i(j)&65535,it=k.i(I)>>>16,ze=k.i(I)&65535;N[2*j+2*I]+=R*ze,ae(N,2*j+2*I),N[2*j+2*I+1]+=V*ze,ae(N,2*j+2*I+1),N[2*j+2*I+1]+=R*it,ae(N,2*j+2*I+1),N[2*j+2*I+2]+=V*it,ae(N,2*j+2*I+2)}for(k=0;k<S;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=S;k<2*S;k++)N[k]=0;return new d(N,0)};function ae(k,S){for(;(k[S]&65535)!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function te(k,S){this.g=k,this.h=S}function me(k,S){if(F(S))throw Error("division by zero");if(F(k))return new te(E,E);if($(k))return S=me(U(k),S),new te(U(S.g),U(S.h));if($(S))return S=me(k,U(S)),new te(U(S.g),S.h);if(k.g.length>30){if($(k)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var N=A,j=S;j.l(k)<=0;)N=Ne(N),j=Ne(j);var I=Se(N,1),V=Se(j,1);for(j=Se(j,2),N=Se(N,2);!F(j);){var R=V.add(j);R.l(k)<=0&&(I=I.add(N),V=R),j=Se(j,1),N=Se(N,1)}return S=ne(k,I.j(S)),new te(I,S)}for(I=E;k.l(S)>=0;){for(N=Math.max(1,Math.floor(k.m()/S.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),V=g(N),R=V.j(S);$(R)||R.l(k)>0;)N-=j,V=g(N),R=V.j(S);F(V)&&(V=A),I=I.add(V),k=ne(k,R)}return new te(I,k)}a.B=function(k){return me(this,k).h},a.and=function(k){const S=Math.max(this.g.length,k.g.length),N=[];for(let j=0;j<S;j++)N[j]=this.i(j)&k.i(j);return new d(N,this.h&k.h)},a.or=function(k){const S=Math.max(this.g.length,k.g.length),N=[];for(let j=0;j<S;j++)N[j]=this.i(j)|k.i(j);return new d(N,this.h|k.h)},a.xor=function(k){const S=Math.max(this.g.length,k.g.length),N=[];for(let j=0;j<S;j++)N[j]=this.i(j)^k.i(j);return new d(N,this.h^k.h)};function Ne(k){const S=k.g.length+1,N=[];for(let j=0;j<S;j++)N[j]=k.i(j)<<1|k.i(j-1)>>>31;return new d(N,k.h)}function Se(k,S){const N=S>>5;S%=32;const j=k.g.length-N,I=[];for(let V=0;V<j;V++)I[V]=S>0?k.i(V+N)>>>S|k.i(V+N+1)<<32-S:k.i(V+N);return new d(I,k.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Lx=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=x,Ti=d}).apply(typeof w_<"u"?w_:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zx,Zo,Ux,yd,Bm,Bx,qx,Hx;(function(){var a,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var b=0;b<c.length;++b){var v=c[b];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function l(c,b){if(b)e:{var v=i;c=c.split(".");for(var T=0;T<c.length-1;T++){var z=c[T];if(!(z in v))break e;v=v[z]}c=c[c.length-1],T=v[c],b=b(T),b!=T&&b!=null&&e(v,c,{configurable:!0,writable:!0,value:b})}}l("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(c){return c||function(b){var v=[],T;for(T in b)Object.prototype.hasOwnProperty.call(b,T)&&v.push([T,b[T]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function p(c){var b=typeof c;return b=="object"&&c!=null||b=="function"}function y(c,b,v){return c.call.apply(c.bind,arguments)}function g(c,b,v){return g=y,g.apply(null,arguments)}function x(c,b){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function E(c,b){function v(){}v.prototype=b.prototype,c.Z=b.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(T,z,G){for(var se=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)se[Me-2]=arguments[Me];return b.prototype[z].apply(T,se)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function D(c){const b=c.length;if(b>0){const v=Array(b);for(let T=0;T<b;T++)v[T]=c[T];return v}return[]}function F(c,b){for(let T=1;T<arguments.length;T++){const z=arguments[T];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=c.length||0;const G=z.length||0;c.length=v+G;for(let se=0;se<G;se++)c[v+se]=z[se]}else c.push(z)}}class ${constructor(b,v){this.i=b,this.j=v,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function U(c){d.setTimeout(()=>{throw c},0)}function ne(){var c=k;let b=null;return c.g&&(b=c.g,c.g=c.g.next,c.g||(c.h=null),b.next=null),b}class ae{constructor(){this.h=this.g=null}add(b,v){const T=te.get();T.set(b,v),this.h?this.h.next=T:this.g=T,this.h=T}}var te=new $(()=>new me,c=>c.reset());class me{constructor(){this.next=this.g=this.h=null}set(b,v){this.h=b,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,Se=!1,k=new ae,S=()=>{const c=Promise.resolve(void 0);Ne=()=>{c.then(N)}};function N(){for(var c;c=ne();){try{c.h.call(c.g)}catch(v){U(v)}var b=te;b.j(c),b.h<100&&(b.h++,c.next=b.g,b.g=c)}Se=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,b){this.type=c,this.g=this.target=b,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,b=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,b),d.removeEventListener("test",v,b)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function it(c,b){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,b)}E(it,I),it.prototype.init=function(c,b){const v=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=b,b=c.relatedTarget,b||(v=="mouseover"?b=c.fromElement:v=="mouseout"&&(b=c.toElement)),this.relatedTarget=b,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),X=0;function ie(c,b,v,T,z){this.listener=c,this.proxy=null,this.src=b,this.type=v,this.capture=!!T,this.ha=z,this.key=++X,this.da=this.fa=!1}function pe(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pe(c,b,v){for(const T in c)b.call(v,c[T],T,c)}function qe(c,b){for(const v in c)b.call(void 0,c[v],v,c)}function O(c){const b={};for(const v in c)b[v]=c[v];return b}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(c,b){let v,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(v in T)c[v]=T[v];for(let G=0;G<J.length;G++)v=J[G],Object.prototype.hasOwnProperty.call(T,v)&&(c[v]=T[v])}}function de(c){this.src=c,this.g={},this.h=0}de.prototype.add=function(c,b,v,T,z){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const se=ke(c,b,T,z);return se>-1?(b=c[se],v||(b.fa=!1)):(b=new ie(b,this.src,G,!!T,z),b.fa=v,c.push(b)),b};function ce(c,b){const v=b.type;if(v in c.g){var T=c.g[v],z=Array.prototype.indexOf.call(T,b,void 0),G;(G=z>=0)&&Array.prototype.splice.call(T,z,1),G&&(pe(b),c.g[v].length==0&&(delete c.g[v],c.h--))}}function ke(c,b,v,T){for(let z=0;z<c.length;++z){const G=c[z];if(!G.da&&G.listener==b&&G.capture==!!v&&G.ha==T)return z}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Ot={};function ft(c,b,v,T,z){if(Array.isArray(b)){for(let G=0;G<b.length;G++)ft(c,b[G],v,T,z);return null}return v=Li(v),c&&c[ze]?c.J(b,v,p(T)?!!T.capture:!1,z):Ar(c,b,v,!1,T,z)}function Ar(c,b,v,T,z,G){if(!b)throw Error("Invalid event type");const se=p(z)?!!z.capture:!!z;let Me=ia(c);if(Me||(c[He]=Me=new de(c)),v=Me.add(b,v,T,se,G),v.proxy)return v;if(T=lr(),v.proxy=T,T.src=c,T.listener=v,c.addEventListener)V||(z=se),z===void 0&&(z=!1),c.addEventListener(b.toString(),T,z);else if(c.attachEvent)c.attachEvent(wn(b.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function lr(){function c(v){return b.call(c.src,c.listener,v)}const b=Pi;return c}function Sr(c,b,v,T,z){if(Array.isArray(b))for(var G=0;G<b.length;G++)Sr(c,b[G],v,T,z);else T=p(T)?!!T.capture:!!T,v=Li(v),c&&c[ze]?(c=c.i,G=String(b).toString(),G in c.g&&(b=c.g[G],v=ke(b,v,T,z),v>-1&&(pe(b[v]),Array.prototype.splice.call(b,v,1),b.length==0&&(delete c.g[G],c.h--)))):c&&(c=ia(c))&&(b=c.g[b.toString()],c=-1,b&&(c=ke(b,v,T,z)),(v=c>-1?b[c]:null)&&or(v))}function or(c){if(typeof c!="number"&&c&&!c.da){var b=c.src;if(b&&b[ze])ce(b.i,c);else{var v=c.type,T=c.proxy;b.removeEventListener?b.removeEventListener(v,T,c.capture):b.detachEvent?b.detachEvent(wn(v),T):b.addListener&&b.removeListener&&b.removeListener(T),(v=ia(b))?(ce(v,c),v.h==0&&(v.src=null,b[He]=null)):pe(c)}}}function wn(c){return c in Ot?Ot[c]:Ot[c]="on"+c}function Pi(c,b){if(c.da)c=!0;else{b=new it(b,this);const v=c.listener,T=c.ha||c.src;c.fa&&or(c),c=v.call(T,b)}return c}function ia(c){return c=c[He],c instanceof de?c:null}var sa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Li(c){return typeof c=="function"?c:(c[sa]||(c[sa]=function(b){return c.handleEvent(b)}),c[sa])}function Ct(){j.call(this),this.i=new de(this),this.M=this,this.G=null}E(Ct,j),Ct.prototype[ze]=!0,Ct.prototype.removeEventListener=function(c,b,v,T){Sr(this,c,b,v,T)};function St(c,b){var v,T=c.G;if(T)for(v=[];T;T=T.G)v.push(T);if(c=c.M,T=b.type||b,typeof b=="string")b=new I(b,c);else if(b instanceof I)b.target=b.target||c;else{var z=b;b=new I(T,c),le(b,z)}z=!0;let G,se;if(v)for(se=v.length-1;se>=0;se--)G=b.g=v[se],z=Gn(G,T,!0,b)&&z;if(G=b.g=c,z=Gn(G,T,!0,b)&&z,z=Gn(G,T,!1,b)&&z,v)for(se=0;se<v.length;se++)G=b.g=v[se],z=Gn(G,T,!1,b)&&z}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var c=this.i;for(const b in c.g){const v=c.g[b];for(let T=0;T<v.length;T++)pe(v[T]);delete c.g[b],c.h--}}this.G=null},Ct.prototype.J=function(c,b,v,T){return this.i.add(String(c),b,!1,v,T)},Ct.prototype.K=function(c,b,v,T){return this.i.add(String(c),b,!0,v,T)};function Gn(c,b,v,T){if(b=c.i.g[String(b)],!b)return!0;b=b.concat();let z=!0;for(let G=0;G<b.length;++G){const se=b[G];if(se&&!se.da&&se.capture==v){const Me=se.listener,Mt=se.ha||se.src;se.fa&&ce(c.i,se),z=Me.call(Mt,T)!==!1&&z}}return z&&!T.defaultPrevented}function Ss(c,b){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:d.setTimeout(c,b||0)}function re(c){c.g=Ss(()=>{c.g=null,c.i&&(c.i=!1,re(c))},c.l);const b=c.h;c.h=null,c.m.apply(null,b)}class ue extends j{constructor(b,v){super(),this.m=b,this.l=v,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:re(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Te(c){j.call(this),this.h=c,this.g={}}E(Te,j);var De=[];function je(c){Pe(c.g,function(b,v){this.g.hasOwnProperty(v)&&or(b)},c),c.g={}}Te.prototype.N=function(){Te.Z.N.call(this),je(this)},Te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=d.JSON.stringify,nt=d.JSON.parse,vt=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function an(){}function xt(){}var vn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ve(){I.call(this,"d")}E(ve,I);function Oe(){I.call(this,"c")}E(Oe,I);var ge={},pt=null;function Nt(){return pt=pt||new Ct}ge.Ia="serverreachability";function Yt(c){I.call(this,ge.Ia,c)}E(Yt,I);function kt(c){const b=Nt();St(b,new Yt(b))}ge.STAT_EVENT="statevent";function sn(c,b){I.call(this,ge.STAT_EVENT,c),this.stat=b}E(sn,I);function It(c){const b=Nt();St(b,new sn(b,c))}ge.Ja="timingevent";function Nr(c,b){I.call(this,ge.Ja,c),this.size=b}E(Nr,I);function kr(c,b){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},b)}function ur(){this.g=!0}ur.prototype.ua=function(){this.g=!1};function hh(c,b,v,T,z,G){c.info(function(){if(c.g)if(G){var se="",Me=G.split("&");for(let et=0;et<Me.length;et++){var Mt=Me[et].split("=");if(Mt.length>1){const Et=Mt[0];Mt=Mt[1];const $n=Et.split("_");se=$n.length>=2&&$n[1]=="type"?se+(Et+"="+Mt+"&"):se+(Et+"=redacted&")}}}else se=null;else se=G;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+b+`
`+v+`
`+se})}function Ou(c,b,v,T,z,G,se){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+b+`
`+v+`
`+G+" "+se})}function Rr(c,b,v,T){c.info(function(){return"XMLHTTP TEXT ("+b+"): "+fh(c,v)+(T?" "+T:"")})}function zi(c,b){c.info(function(){return"TIMEOUT: "+b})}ur.prototype.info=function(){};function fh(c,b){if(!c.g)return b;if(!b)return null;try{const G=JSON.parse(b);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var v=G[c];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var z=T[0];if(z!="noop"&&z!="stop"&&z!="close")for(let se=1;se<T.length;se++)T[se]=""}}}}return Ae(G)}catch{return b}}var Ui={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kl;function Bi(){}E(Bi,an),Bi.prototype.g=function(){return new XMLHttpRequest},Kl=new Bi;function la(c){return encodeURIComponent(String(c))}function Mu(c){var b=1;c=c.split(":");const v=[];for(;b>0&&c.length;)v.push(c.shift()),b--;return c.length&&v.push(c.join(":")),v}function cr(c,b,v,T){this.j=c,this.i=b,this.l=v,this.S=T||1,this.V=new Te(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dr}function dr(){this.i=null,this.g="",this.h=!1}var Ut={},Wt={};function Cr(c,b,v){c.M=1,c.A=qi(qt(b)),c.u=v,c.R=!0,Ns(c,null)}function Ns(c,b){c.F=Date.now(),Ir(c),c.B=qt(c.A);var v=c.B,T=c.S;Array.isArray(T)||(T=[String(T)]),Is(v.i,"t",T),c.C=0,v=c.j.L,c.h=new dr,c.g=Yu(c.j,v?b:null,!c.u),c.P>0&&(c.O=new ue(g(c.Y,c,c.g),c.P)),b=c.V,v=c.g,T=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(De[0]=z.toString()),z=De);for(let G=0;G<z.length;G++){const se=ft(v,z[G],T||b.handleEvent,!1,b.h||b);if(!se)break;b.g[se.key]=se}b=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,b)):(c.v="GET",c.g.ea(c.B,c.v,null,b)),kt(),hh(c.i,c.v,c.B,c.l,c.S,c.u)}cr.prototype.ba=function(c){c=c.target;const b=this.O;b&&mr(c)==3?b.j():this.Y(c)},cr.prototype.Y=function(c){try{if(c==this.g)e:{const Me=mr(this.g),Mt=this.g.ya(),et=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||Me!=4||Mt==7||(Mt==8||et<=0?kt(3):kt(2)),Dr(this);var b=this.g.ca();this.X=b;var v=mh(this);if(this.o=b==200,Ou(this.i,this.v,this.B,this.l,this.S,Me,b),this.o){if(this.U&&!this.L){t:{if(this.g){var T,z=this.g;if((T=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(T)){var G=T;break t}}G=null}if(c=G)Rr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,jr(this,c);else{this.o=!1,this.m=3,It(12),On(this),Kn(this);break e}}if(this.R){c=!0;let Et;for(;!this.K&&this.C<v.length;)if(Et=Pu(this,v),Et==Wt){Me==4&&(this.m=4,It(14),c=!1),Rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Ut){this.m=4,It(15),Rr(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else Rr(this.i,this.l,Et,null),jr(this,Et);if(Vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||v.length!=0||this.h.h||(this.m=1,It(16),c=!1),this.o=this.o&&c,!c)Rr(this.i,this.l,v,"[Invalid Chunked Response]"),On(this),Kn(this);else if(v.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),lo(se),se.P=!0,It(11))}}else Rr(this.i,this.l,v,null),jr(this,v);Me==4&&On(this),this.o&&!this.K&&(Me==4?Ku(this.j,this):(this.o=!1,Ir(this)))}else ua(this.g),b==400&&v.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),On(this),Kn(this)}}}catch{}finally{}};function mh(c){if(!Vu(c))return c.g.la();const b=ln(c.g);if(b==="")return"";let v="";const T=b.length,z=mr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return On(c),Kn(c),"";c.h.i=new d.TextDecoder}for(let G=0;G<T;G++)c.h.h=!0,v+=c.h.i.decode(b[G],{stream:!(z&&G==T-1)});return b.length=0,c.h.g+=v,c.C=0,c.h.g}function Vu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Pu(c,b){var v=c.C,T=b.indexOf(`
`,v);return T==-1?Wt:(v=Number(b.substring(v,T)),isNaN(v)?Ut:(T+=1,T+v>b.length?Wt:(b=b.slice(T,T+v),c.C=T+v,b)))}cr.prototype.cancel=function(){this.K=!0,On(this)};function Ir(c){c.T=Date.now()+c.H,ks(c,c.H)}function ks(c,b){if(c.D!=null)throw Error("WatchDog timer not null");c.D=kr(g(c.aa,c),b)}function Dr(c){c.D&&(d.clearTimeout(c.D),c.D=null)}cr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(zi(this.i,this.B),this.M!=2&&(kt(),It(17)),On(this),this.m=2,Kn(this)):ks(this,this.T-c)};function Kn(c){c.j.I==0||c.K||Ku(c.j,c)}function On(c){Dr(c);var b=c.O;b&&typeof b.dispose=="function"&&b.dispose(),c.O=null,je(c.V),c.g&&(b=c.g,c.g=null,b.abort(),b.dispose())}function jr(c,b){try{var v=c.j;if(v.I!=0&&(v.g==c||Mr(v.h,c))){if(!c.L&&Mr(v.h,c)&&v.I==3){try{var T=v.Ba.g.parse(b)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Vs(v),Fa(v);else break e;$i(v),It(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=kr(g(v.Va,v),6e3));Or(v.h)<=1&&v.ta&&(v.ta=void 0)}else Br(v,11)}else if((c.L||v.g==c)&&Vs(v),!R(b))for(z=v.Ba.g.parse(b),b=0;b<z.length;b++){let et=z[b];const Et=et[0];if(!(Et<=v.K))if(v.K=Et,et=et[1],v.I==2)if(et[0]=="c"){v.M=et[1],v.ba=et[2];const $n=et[3];$n!=null&&(v.ka=$n,v.j.info("VER="+v.ka));const qr=et[4];qr!=null&&(v.za=qr,v.j.info("SVER="+v.za));const pr=et[5];pr!=null&&typeof pr=="number"&&pr>0&&(T=1.5*pr,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const gr=c.g;if(gr){const Yi=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var G=T.h;G.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&($l(G,G.h),G.h=null))}if(T.G){const Ps=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ps&&(T.wa=Ps,st(T.J,T.G,Ps))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var se=c;if(T.na=$u(T,T.L?T.ba:null,T.W),se.L){Yl(T.h,se);var Me=se,Mt=T.O;Mt&&(Me.H=Mt),Me.D&&(Dr(Me),Ir(Me)),T.g=se}else Fu(T);v.i.length>0&&Ur(v)}else et[0]!="stop"&&et[0]!="close"||Br(v,7);else v.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Br(v,7):io(v):et[0]!="noop"&&v.l&&v.l.qa(et),v.A=0)}}kt(4)}catch{}}var Bt=class{constructor(c,b){this.g=c,this.map=b}};function Xl(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ql(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Or(c){return c.h?1:c.g?c.g.size:0}function Mr(c,b){return c.h?c.h==b:c.g?c.g.has(b):!1}function $l(c,b){c.g?c.g.add(b):c.h=b}function Yl(c,b){c.h&&c.h==b?c.h=null:c.g&&c.g.has(b)&&c.g.delete(b)}Xl.prototype.cancel=function(){if(this.i=Zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let b=c.i;for(const v of c.g.values())b=b.concat(v.G);return b}return D(c.i)}var Lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rs(c,b){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const T=c[v].indexOf("=");let z,G=null;T>=0?(z=c[v].substring(0,T),G=c[v].substring(T+1)):z=c[v],b(z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Mn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;c instanceof Mn?(this.l=c.l,en(this,c.j),this.o=c.o,this.g=c.g,Pa(this,c.u),this.h=c.h,Jl(this,qu(c.i)),this.m=c.m):c&&(b=String(c).match(Lu))?(this.l=!1,en(this,b[1]||"",!0),this.o=Vr(b[2]||""),this.g=Vr(b[3]||"",!0),Pa(this,b[4]),this.h=Vr(b[5]||"",!0),Jl(this,b[6]||"",!0),this.m=Vr(b[7]||"")):(this.l=!1,this.i=new za(null,this.l))}Mn.prototype.toString=function(){const c=[];var b=this.j;b&&c.push(Hi(b,Cs,!0),":");var v=this.g;return(v||b=="file")&&(c.push("//"),(b=this.o)&&c.push(Hi(b,Cs,!0),"@"),c.push(la(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Hi(v,v.charAt(0)=="/"?Wl:zu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Hi(v,Uu)),c.join("")},Mn.prototype.resolve=function(c){const b=qt(this);let v=!!c.j;v?en(b,c.j):v=!!c.o,v?b.o=c.o:v=!!c.g,v?b.g=c.g:v=c.u!=null;var T=c.h;if(v)Pa(b,c.u);else if(v=!!c.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var z=b.h.lastIndexOf("/");z!=-1&&(T=b.h.slice(0,z+1)+T)}if(z=T,z==".."||z==".")T="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){T=z.lastIndexOf("/",0)==0,z=z.split("/");const G=[];for(let se=0;se<z.length;){const Me=z[se++];Me=="."?T&&se==z.length&&G.push(""):Me==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),T&&se==z.length&&G.push("")):(G.push(Me),T=!0)}T=G.join("/")}else T=z}return v?b.h=T:v=c.i.toString()!=="",v?Jl(b,qu(c.i)):v=!!c.m,v&&(b.m=c.m),b};function qt(c){return new Mn(c)}function en(c,b,v){c.j=v?Vr(b,!0):b,c.j&&(c.j=c.j.replace(/:$/,""))}function Pa(c,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);c.u=b}else c.u=null}function Jl(c,b,v){b instanceof za?(c.i=b,Ds(c.i,c.l)):(v||(b=Hi(b,La)),c.i=new za(b,c.l))}function st(c,b,v){c.i.set(b,v)}function qi(c){return st(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Vr(c,b){return c?b?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Hi(c,b,v){return typeof c=="string"?(c=encodeURI(c).replace(b,Tn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Tn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cs=/[#\/\?@]/g,zu=/[#\?:]/g,Wl=/[#\?]/g,La=/[#\?@]/g,Uu=/#/g;function za(c,b){this.h=this.g=null,this.i=c||null,this.j=!!b}function An(c){c.g||(c.g=new Map,c.h=0,c.i&&Rs(c.i,function(b,v){c.add(decodeURIComponent(b.replace(/\+/g," ")),v)}))}a=za.prototype,a.add=function(c,b){An(this),this.i=null,c=Ua(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(b),this.h+=1,this};function Bu(c,b){An(c),b=Ua(c,b),c.g.has(b)&&(c.i=null,c.h-=c.g.get(b).length,c.g.delete(b))}function eo(c,b){return An(c),b=Ua(c,b),c.g.has(b)}a.forEach=function(c,b){An(this),this.g.forEach(function(v,T){v.forEach(function(z){c.call(b,z,T,this)},this)},this)};function to(c,b){An(c);let v=[];if(typeof b=="string")eo(c,b)&&(v=v.concat(c.g.get(Ua(c,b))));else for(c=Array.from(c.g.values()),b=0;b<c.length;b++)v=v.concat(c[b]);return v}a.set=function(c,b){return An(this),this.i=null,c=Ua(this,c),eo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[b]),this.h+=1,this},a.get=function(c,b){return c?(c=to(this,c),c.length>0?String(c[0]):b):b};function Is(c,b,v){Bu(c,b),v.length>0&&(c.i=null,c.g.set(Ua(c,b),D(v)),c.h+=v.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],b=Array.from(this.g.keys());for(let T=0;T<b.length;T++){var v=b[T];const z=la(v);v=to(this,v);for(let G=0;G<v.length;G++){let se=z;v[G]!==""&&(se+="="+la(v[G])),c.push(se)}}return this.i=c.join("&")};function qu(c){const b=new za;return b.i=c.i,c.g&&(b.g=new Map(c.g),b.h=c.h),b}function Ua(c,b){return b=String(b),c.j&&(b=b.toLowerCase()),b}function Ds(c,b){b&&!c.j&&(An(c),c.i=null,c.g.forEach(function(v,T){const z=T.toLowerCase();T!=z&&(Bu(this,T),Is(this,z,v))},c)),c.j=b}function hr(c,b){const v=new ur;if(d.Image){const T=new Image;T.onload=x(Xn,v,"TestLoadImage: loaded",!0,b,T),T.onerror=x(Xn,v,"TestLoadImage: error",!1,b,T),T.onabort=x(Xn,v,"TestLoadImage: abort",!1,b,T),T.ontimeout=x(Xn,v,"TestLoadImage: timeout",!1,b,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else b(!1)}function no(c,b){const v=new ur,T=new AbortController,z=setTimeout(()=>{T.abort(),Xn(v,"TestPingServer: timeout",!1,b)},1e4);fetch(c,{signal:T.signal}).then(G=>{clearTimeout(z),G.ok?Xn(v,"TestPingServer: ok",!0,b):Xn(v,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(z),Xn(v,"TestPingServer: error",!1,b)})}function Xn(c,b,v,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(v)}catch{}}function Ba(){this.g=new vt}function Pr(c){this.i=c.Sb||null,this.h=c.ab||!1}E(Pr,an),Pr.prototype.g=function(){return new Fi(this.i,this.h)};function Fi(c,b){Ct.call(this),this.H=c,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Fi,Ct),a=Fi.prototype,a.open=function(c,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=b,this.readyState=1,fr(this)},a.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(b.body=c),(this.H||d).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=0},a.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;js(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function js(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}a.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var b=c.value?c.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!c.done}))&&(this.response=this.responseText+=b)}c.done?qa(this):fr(this),this.readyState==3&&js(this)}},a.Oa=function(c){this.g&&(this.response=this.responseText=c,qa(this))},a.Na=function(c){this.g&&(this.response=c,qa(this))},a.ga=function(){this.g&&qa(this)};function qa(c){c.readyState=4,c.l=null,c.j=null,c.B=null,fr(c)}a.setRequestHeader=function(c,b){this.A.append(c,b)},a.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],b=this.h.entries();for(var v=b.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=b.next();return c.join(`\r
`)};function fr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Qn(c){let b="";return Pe(c,function(v,T){b+=T,b+=":",b+=v,b+=`\r
`}),b}function Gi(c,b,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Qn(v),typeof c=="string"?v!=null&&la(v):st(c,b,v))}function ut(c){Ct.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ut,Ct);var Lr=/^https?$/i,ro=["POST","PUT"];a=ut.prototype,a.Fa=function(c){this.H=c},a.ea=function(c,b,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);b=b?b.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kl.g(),this.g.onreadystatechange=A(g(this.Ca,this));try{this.B=!0,this.g.open(b,String(c),!0),this.B=!1}catch(G){Ki(this,G);return}if(c=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)v.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())v.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),z=d.FormData&&c instanceof d.FormData,!(Array.prototype.indexOf.call(ro,b,void 0)>=0)||T||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of v)this.g.setRequestHeader(G,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){Ki(this,G)}};function Ki(c,b){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=b,c.o=5,ao(c),oa(c)}function ao(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}a.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,St(this,"complete"),St(this,"abort"),oa(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oa(this,!0)),ut.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?Xi(this):this.Xa())},a.Xa=function(){Xi(this)};function Xi(c){if(c.h&&typeof u<"u"){if(c.v&&mr(c)==4)setTimeout(c.Ca.bind(c),0);else if(St(c,"readystatechange"),mr(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var v;if(!(v=b)){var T;if(T=G===0){let se=String(c.D).match(Lu)[1]||null;!se&&d.self&&d.self.location&&(se=d.self.location.protocol.slice(0,-1)),T=!Lr.test(se?se.toLowerCase():"")}v=T}if(v)St(c,"complete"),St(c,"success");else{c.o=6;try{var z=mr(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",ao(c)}}finally{oa(c)}}}}function oa(c,b){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,b||St(c,"ready");try{v.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function mr(c){return c.g?c.g.readyState:0}a.ca=function(){try{return mr(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(c){if(this.g){var b=this.g.responseText;return c&&b.indexOf(c)==0&&(b=b.substring(c.length)),nt(b)}};function ln(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function ua(c){const b={};c=(c.g&&mr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(R(c[T]))continue;var v=Mu(c[T]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=b[z]||[];b[z]=G,G.push(v)}qe(b,function(T){return T.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zr(c,b,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||b}function Ha(c){this.za=0,this.i=[],this.j=new ur,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zr("baseRetryDelayMs",5e3,c),this.Za=zr("retryDelaySeedMs",1e4,c),this.Ta=zr("forwardChannelMaxRetries",2,c),this.va=zr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Xl(c&&c.concurrentRequestLimit),this.Ba=new Ba,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=Ha.prototype,a.ka=8,a.I=1,a.connect=function(c,b,v,T){It(0),this.W=c,this.H=b||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=$u(this,null,this.W),Ur(this)};function io(c){if(Os(c),c.I==3){var b=c.V++,v=qt(c.J);if(st(v,"SID",c.M),st(v,"RID",b),st(v,"TYPE","terminate"),Qi(c,v),b=new cr(c,c.j,b),b.M=2,b.A=qi(qt(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(b.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=b.A,v=!0),v||(b.g=Yu(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ir(b)}Qu(c)}function Fa(c){c.g&&(lo(c),c.g.cancel(),c.g=null)}function Os(c){Fa(c),c.v&&(d.clearTimeout(c.v),c.v=null),Vs(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&d.clearTimeout(c.m),c.m=null)}function Ur(c){if(!Ql(c.h)&&!c.m){c.m=!0;var b=c.Ea;Ne||S(),Se||(Ne(),Se=!0),k.add(b,c),c.D=0}}function Ms(c,b){return Or(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=b.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=kr(g(c.Ea,c,b),Xu(c,c.D)),c.D++,!0)}a.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new cr(this,this.j,c);let G=this.o;if(this.U&&(G?(G=O(G),le(G,this.U)):G=this.U),this.u!==null||this.R||(z.J=G,G=null),this.S)e:{for(var b=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(b+=T,b>4096){b=v;break e}if(b===4096||v===this.i.length-1){b=v+1;break e}}b=1e3}else b=1e3;b=Hu(this,z,b),v=qt(this.J),st(v,"RID",c),st(v,"CVER",22),this.G&&st(v,"X-HTTP-Session-Id",this.G),Qi(this,v),G&&(this.R?b="headers="+la(Qn(G))+"&"+b:this.u&&Gi(v,this.u,G)),$l(this.h,z),this.Ra&&st(v,"TYPE","init"),this.S?(st(v,"$req",b),st(v,"SID","null"),z.U=!0,Cr(z,v,null)):Cr(z,v,b),this.I=2}}else this.I==3&&(c?so(this,c):this.i.length==0||Ql(this.h)||so(this))};function so(c,b){var v;b?v=b.l:v=c.V++;const T=qt(c.J);st(T,"SID",c.M),st(T,"RID",v),st(T,"AID",c.K),Qi(c,T),c.u&&c.o&&Gi(T,c.u,c.o),v=new cr(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),b&&(c.i=b.G.concat(c.i)),b=Hu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),$l(c.h,v),Cr(v,T,b)}function Qi(c,b){c.H&&Pe(c.H,function(v,T){st(b,T,v)}),c.l&&Pe({},function(v,T){st(b,T,v)})}function Hu(c,b,v){v=Math.min(c.i.length,v);const T=c.l?g(c.l.Ka,c.l,c):null;e:{var z=c.i;let Me=-1;for(;;){const Mt=["count="+v];Me==-1?v>0?(Me=z[0].g,Mt.push("ofs="+Me)):Me=0:Mt.push("ofs="+Me);let et=!0;for(let Et=0;Et<v;Et++){var G=z[Et].g;const $n=z[Et].map;if(G-=Me,G<0)Me=Math.max(0,z[Et].g-100),et=!1;else try{G="req"+G+"_"||"";try{var se=$n instanceof Map?$n:Object.entries($n);for(const[qr,pr]of se){let gr=pr;p(pr)&&(gr=Ae(pr)),Mt.push(G+qr+"="+encodeURIComponent(gr))}}catch(qr){throw Mt.push(G+"type="+encodeURIComponent("_badmap")),qr}}catch{T&&T($n)}}if(et){se=Mt.join("&");break e}}se=void 0}return c=c.i.splice(0,v),b.G=c,se}function Fu(c){if(!c.g&&!c.v){c.Y=1;var b=c.Da;Ne||S(),Se||(Ne(),Se=!0),k.add(b,c),c.A=0}}function $i(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=kr(g(c.Da,c),Xu(c,c.A)),c.A++,!0)}a.Da=function(){if(this.v=null,Gu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=kr(g(this.Wa,this),c)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Fa(this),Gu(this))};function lo(c){c.B!=null&&(d.clearTimeout(c.B),c.B=null)}function Gu(c){c.g=new cr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var b=qt(c.na);st(b,"RID","rpc"),st(b,"SID",c.M),st(b,"AID",c.K),st(b,"CI",c.F?"0":"1"),!c.F&&c.ia&&st(b,"TO",c.ia),st(b,"TYPE","xmlhttp"),Qi(c,b),c.u&&c.o&&Gi(b,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=qi(qt(b)),v.u=null,v.R=!0,Ns(v,c)}a.Va=function(){this.C!=null&&(this.C=null,Fa(this),$i(this),It(19))};function Vs(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Ku(c,b){var v=null;if(c.g==b){Vs(c),lo(c),c.g=null;var T=2}else if(Mr(c.h,b))v=b.G,Yl(c.h,b),T=1;else return;if(c.I!=0){if(b.o)if(T==1){v=b.u?b.u.length:0,b=Date.now()-b.F;var z=c.D;T=Nt(),St(T,new Nr(T,v)),Ur(c)}else Fu(c);else if(z=b.m,z==3||z==0&&b.X>0||!(T==1&&Ms(c,b)||T==2&&$i(c)))switch(v&&v.length>0&&(b=c.h,b.i=b.i.concat(v)),z){case 1:Br(c,5);break;case 4:Br(c,10);break;case 3:Br(c,6);break;default:Br(c,2)}}}function Xu(c,b){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*b}function Br(c,b){if(c.j.info("Error code "+b),b==2){var v=g(c.bb,c),T=c.Ua;const z=!T;T=new Mn(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||en(T,"https"),qi(T),z?hr(T.toString(),v):no(T.toString(),v)}else It(2);c.I=0,c.l&&c.l.pa(b),Qu(c),Os(c)}a.bb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Qu(c){if(c.I=0,c.ja=[],c.l){const b=Zl(c.h);(b.length!=0||c.i.length!=0)&&(F(c.ja,b),F(c.ja,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.oa()}}function $u(c,b,v){var T=v instanceof Mn?qt(v):new Mn(v);if(T.g!="")b&&(T.g=b+"."+T.g),Pa(T,T.u);else{var z=d.location;T=z.protocol,b=b?b+"."+z.hostname:z.hostname,z=+z.port;const G=new Mn(null);T&&en(G,T),b&&(G.g=b),z&&Pa(G,z),v&&(G.h=v),T=G}return v=c.G,b=c.wa,v&&b&&st(T,v,b),st(T,"VER",c.ka),Qi(c,T),T}function Yu(c,b,v){if(b&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=c.Aa&&!c.ma?new ut(new Pr({ab:v})):new ut(c.ma),b.Fa(c.L),b}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zu(){}a=Zu.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Ga(){}Ga.prototype.g=function(c,b){return new xn(c,b)};function xn(c,b){Ct.call(this),this.g=new Ha(b),this.l=c,this.h=b&&b.messageUrlParams||null,c=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(c?c["X-WebChannel-Content-Type"]=b.messageContentType:c={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(c?c["X-WebChannel-Client-Profile"]=b.sa:c={"X-WebChannel-Client-Profile":b.sa}),this.g.U=c,(c=b&&b.Qb)&&!R(c)&&(this.g.u=c),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!R(b)&&(this.g.G=b,c=this.h,c!==null&&b in c&&(c=this.h,b in c&&delete c[b])),this.j=new ca(this)}E(xn,Ct),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){io(this.g)},xn.prototype.o=function(c){var b=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Ae(c),c=v);b.i.push(new Bt(b.Ya++,c)),b.I==3&&Ur(b)},xn.prototype.N=function(){this.g.l=null,delete this.j,io(this.g),delete this.g,xn.Z.N.call(this)};function Ju(c){ve.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var b=c.__sm__;if(b){e:{for(const v in b){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,b=b!==null&&c in b?b[c]:void 0),this.data=b}else this.data=c}E(Ju,ve);function Wu(){Oe.call(this),this.status=1}E(Wu,Oe);function ca(c){this.g=c}E(ca,Zu),ca.prototype.ra=function(){St(this.g,"a")},ca.prototype.qa=function(c){St(this.g,new Ju(c))},ca.prototype.pa=function(c){St(this.g,new Wu)},ca.prototype.oa=function(){St(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Hx=function(){return new Ga},qx=function(){return Nt()},Bx=ge,Bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,yd=Ui,Gl.COMPLETE="complete",Ux=Gl,xt.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Zo=xt,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,zx=ut}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const T_="@firebase/firestore",A_="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new mp("@firebase/firestore");function ml(){return _s.logLevel}function he(a,...e){if(_s.logLevel<=Ke.DEBUG){const n=e.map(Ap);_s.debug(`Firestore (${zl}): ${a}`,...n)}}function Oa(a,...e){if(_s.logLevel<=Ke.ERROR){const n=e.map(Ap);_s.error(`Firestore (${zl}): ${a}`,...n)}}function kl(a,...e){if(_s.logLevel<=Ke.WARN){const n=e.map(Ap);_s.warn(`Firestore (${zl}): ${a}`,...n)}}function Ap(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(a,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Fx(a,i,n)}function Fx(a,e,n){let i=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Oa(i),new Error(i)}function at(a,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,a||Fx(e,l,i)}function Ie(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Va{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ok{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(yn.UNAUTHENTICATED)))}shutdown(){}}class Mk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Vk{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let i=this.i;const l=y=>this.i!==i?(i=this.i,n(y)):Promise.resolve();let u=new Ca;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ca,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const y=u;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ca)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(at(typeof i.accessToken=="string",31837,{l:i}),new Gx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class Pk{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lk{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Pk(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class S_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zk{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const i=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new S_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new S_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<a;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=Uk(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function Xe(a,e){return a<e?-1:a>e?1:0}function qm(a,e){const n=Math.min(a.length,e.length);for(let i=0;i<n;i++){const l=a.charAt(i),u=e.charAt(i);if(l!==u)return Tm(l)===Tm(u)?Xe(l,u):Tm(l)?1:-1}return Xe(a.length,e.length)}const Bk=55296,qk=57343;function Tm(a){const e=a.charCodeAt(0);return e>=Bk&&e<=qk}function Rl(a,e,n){return a.length===e.length&&a.every(((i,l)=>n(i,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="__name__";class Qr{constructor(e,n,i){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&we(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Qr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qr?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=Qr.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return Xe(e.length,n.length)}static compareSegments(e,n){const i=Qr.isNumericId(e),l=Qr.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?Qr.extractNumericId(e).compare(Qr.extractNumericId(n)):qm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ti.fromString(e.substring(4,e.length-2))}}class gt extends Qr{construct(e,n,i){return new gt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new oe(Z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new gt(n)}static emptyPath(){return new gt([])}}const Hk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Qr{construct(e,n,i){return new fn(e,n,i)}static isValidIdentifier(e){return Hk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===N_}static keyField(){return new fn([N_])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new oe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new oe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new oe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(i+=p,l++):(u(),l++)}if(u(),d)throw new oe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(gt.fromString(e))}static fromName(e){return new _e(gt.fromString(e).popFirst(5))}static empty(){return new _e(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(a,e,n){if(!n)throw new oe(Z.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Fk(a,e,n,i){if(e===!0&&i===!0)throw new oe(Z.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function k_(a){if(!_e.isDocumentKey(a))throw new oe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function R_(a){if(_e.isDocumentKey(a))throw new oe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function Xx(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Zd(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":we(12329,{type:typeof a})}function ta(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new oe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zd(a);throw new oe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(a,e){const n={typeString:a};return e&&(n.value=e),n}function Nu(a,e){if(!Xx(a))throw new oe(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in a)){n=`JSON missing required field: '${i}'`;break}const d=a[i];if(l&&typeof d!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new oe(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=-62135596800,I_=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*I_);return new _t(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<C_)throw new oe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I_}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-C_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:$t("string",_t._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new _t(0,0))}static max(){return new Re(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function Gk(a,e){const n=a.toTimestamp().seconds,i=a.toTimestamp().nanoseconds+1,l=Re.fromTimestamp(i===1e9?new _t(n+1,0):new _t(n,i));return new Si(l,_e.empty(),e)}function Kk(a){return new Si(a.readTime,a.key,du)}class Si{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Si(Re.min(),_e.empty(),du)}static max(){return new Si(Re.max(),_e.empty(),du)}}function Xk(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(a.documentKey,e.documentKey),n!==0?n:Xe(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $k{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(a){if(a.code!==Z.FAILED_PRECONDITION||a.message!==Qk)throw a;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ee.reject(n)}static resolve(e){return new ee(((n,i)=>{n(e)}))}static reject(e){return new ee(((n,i)=>{i(e)}))}static waitFor(e){return new ee(((n,i)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&n()}),(y=>i(y)))})),d=!0,u===l&&n()}))}static or(e){let n=ee.resolve(!1);for(const i of e)n=n.next((l=>l?ee.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new ee(((i,l)=>{const u=e.length,d=new Array(u);let p=0;for(let y=0;y<u;y++){const g=y;n(e[g]).next((x=>{d[g]=x,++p,p===u&&i(d)}),(x=>l(x)))}}))}static doWhile(e,n){return new ee(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function Yk(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Bl(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=-1;function Wd(a){return a==null}function Dd(a){return a===0&&1/a==-1/0}function Zk(a){return typeof a=="number"&&Number.isInteger(a)&&!Dd(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="";function Jk(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=D_(e)),e=Wk(a.get(n),e);return D_(e)}function Wk(a,e){let n=e;const i=a.length;for(let l=0;l<i;l++){const u=a.charAt(l);switch(u){case"\0":n+="";break;case Qx:n+="";break;default:n+=u}}return n}function D_(a){return a+Qx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function Oi(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function $x(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new Rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??hn.RED,this.left=l??hn.EMPTY,this.right=u??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new hn(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return hn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new O_(this.data.getIterator())}getIteratorFrom(e){return new O_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class O_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new Jt(fn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Yx("Invalid base64 string: "+u):u}})(e);return new mn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const eR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(a){if(at(!!a,39018),typeof a=="string"){let e=0;const n=eR.exec(a);if(at(!!n,46558,{timestamp:a}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(a);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Lt(a.seconds),nanos:Lt(a.nanos)}}function Lt(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function ki(a){return typeof a=="string"?mn.fromBase64String(a):mn.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="server_timestamp",Jx="__type__",Wx="__previous_value__",eE="__local_write_time__";function kp(a){var n,i;return((i=(((n=a==null?void 0:a.mapValue)==null?void 0:n.fields)||{})[Jx])==null?void 0:i.stringValue)===Zx}function eh(a){const e=a.mapValue.fields[Wx];return kp(e)?eh(e):e}function hu(a){const e=Ni(a.mapValue.fields[eE].timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,i,l,u,d,p,y,g,x){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=x}}const jd="(default)";class fu{constructor(e,n){this.projectId=e,this.database=n||jd}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===jd}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="__type__",nR="__max__",ld={mapValue:{}},nE="__vector__",Od="value";function Ri(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?kp(a)?4:aR(a)?9007199254740991:rR(a)?10:11:we(28295,{value:a})}function na(a,e){if(a===e)return!0;const n=Ri(a);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return hu(a).isEqual(hu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Ni(l.timestampValue),p=Ni(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(l,u){return ki(l.bytesValue).isEqual(ki(u.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(l,u){return Lt(l.geoPointValue.latitude)===Lt(u.geoPointValue.latitude)&&Lt(l.geoPointValue.longitude)===Lt(u.geoPointValue.longitude)})(a,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Lt(l.integerValue)===Lt(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=Lt(l.doubleValue),p=Lt(u.doubleValue);return d===p?Dd(d)===Dd(p):isNaN(d)&&isNaN(p)}return!1})(a,e);case 9:return Rl(a.arrayValue.values||[],e.arrayValue.values||[],na);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(j_(d)!==j_(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!na(d[y],p[y])))return!1;return!0})(a,e);default:return we(52216,{left:a})}}function mu(a,e){return(a.values||[]).find((n=>na(n,e)))!==void 0}function Cl(a,e){if(a===e)return 0;const n=Ri(a),i=Ri(e);if(n!==i)return Xe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(a.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=Lt(u.integerValue||u.doubleValue),y=Lt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(a,e);case 3:return M_(a.timestampValue,e.timestampValue);case 4:return M_(hu(a),hu(e));case 5:return qm(a.stringValue,e.stringValue);case 6:return(function(u,d){const p=ki(u),y=ki(d);return p.compareTo(y)})(a.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),y=d.split("/");for(let g=0;g<p.length&&g<y.length;g++){const x=Xe(p[g],y[g]);if(x!==0)return x}return Xe(p.length,y.length)})(a.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=Xe(Lt(u.latitude),Lt(d.latitude));return p!==0?p:Xe(Lt(u.longitude),Lt(d.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return V_(a.arrayValue,e.arrayValue);case 10:return(function(u,d){var A,D,F,$;const p=u.fields||{},y=d.fields||{},g=(A=p[Od])==null?void 0:A.arrayValue,x=(D=y[Od])==null?void 0:D.arrayValue,E=Xe(((F=g==null?void 0:g.values)==null?void 0:F.length)||0,(($=x==null?void 0:x.values)==null?void 0:$.length)||0);return E!==0?E:V_(g,x)})(a.mapValue,e.mapValue);case 11:return(function(u,d){if(u===ld.mapValue&&d===ld.mapValue)return 0;if(u===ld.mapValue)return 1;if(d===ld.mapValue)return-1;const p=u.fields||{},y=Object.keys(p),g=d.fields||{},x=Object.keys(g);y.sort(),x.sort();for(let E=0;E<y.length&&E<x.length;++E){const A=qm(y[E],x[E]);if(A!==0)return A;const D=Cl(p[y[E]],g[x[E]]);if(D!==0)return D}return Xe(y.length,x.length)})(a.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function M_(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Xe(a,e);const n=Ni(a),i=Ni(e),l=Xe(n.seconds,i.seconds);return l!==0?l:Xe(n.nanos,i.nanos)}function V_(a,e){const n=a.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=Cl(n[l],i[l]);if(u)return u}return Xe(n.length,i.length)}function Il(a){return Hm(a)}function Hm(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const i=Ni(n);return`time(${i.seconds},${i.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return ki(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return _e.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=Hm(u);return i+"]"})(a.arrayValue):"mapValue"in a?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const d of i)u?u=!1:l+=",",l+=`${d}:${Hm(n.fields[d])}`;return l+"}"})(a.mapValue):we(61005,{value:a})}function bd(a){switch(Ri(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eh(a);return e?16+bd(e):16;case 5:return 2*a.stringValue.length;case 6:return ki(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+bd(u)),0)})(a.arrayValue);case 10:case 11:return(function(i){let l=0;return Oi(i.fields,((u,d)=>{l+=u.length+bd(d)})),l})(a.mapValue);default:throw we(13486,{value:a})}}function P_(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Fm(a){return!!a&&"integerValue"in a}function Rp(a){return!!a&&"arrayValue"in a}function L_(a){return!!a&&"nullValue"in a}function z_(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function _d(a){return!!a&&"mapValue"in a}function rR(a){var n,i;return((i=(((n=a==null?void 0:a.mapValue)==null?void 0:n.fields)||{})[tE])==null?void 0:i.stringValue)===nE}function ru(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return Oi(a.mapValue.fields,((n,i)=>e.mapValue.fields[n]=ru(i))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ru(a.arrayValue.values[n]);return e}return{...a}}function aR(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===nR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!_d(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(n)}setAll(e){let n=fn.emptyPath(),i={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,i,l),i={},l=[],n=p.popLast()}d?i[p.lastSegment()]=ru(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());_d(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return na(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];_d(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){Oi(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new Dn(ru(this.value))}}function rE(a){const e=[];return Oi(a.fields,((n,i)=>{const l=new fn([n]);if(_d(i)){const u=rE(i.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n,i,l,u,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new bn(e,0,Re.min(),Re.min(),Re.min(),Dn.empty(),0)}static newFoundDocument(e,n,i,l){return new bn(e,1,n,Re.min(),i,l,0)}static newNoDocument(e,n){return new bn(e,2,n,Re.min(),Re.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,Re.min(),Re.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.position=e,this.inclusive=n}}function U_(a,e,n){let i=0;for(let l=0;l<a.position.length;l++){const u=e[l],d=a.position[l];if(u.field.isKeyField()?i=_e.comparator(_e.fromName(d.referenceValue),n.key):i=Cl(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function B_(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!na(a.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n="asc"){this.field=e,this.dir=n}}function iR(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{}class Qt extends aE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new lR(e,n,i):n==="array-contains"?new cR(e,i):n==="in"?new dR(e,i):n==="not-in"?new hR(e,i):n==="array-contains-any"?new fR(e,i):new Qt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new oR(e,i):new uR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Cl(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(Cl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends aE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new wr(e,n)}matches(e){return iE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iE(a){return a.op==="and"}function sE(a){return sR(a)&&iE(a)}function sR(a){for(const e of a.filters)if(e instanceof wr)return!1;return!0}function Gm(a){if(a instanceof Qt)return a.field.canonicalString()+a.op.toString()+Il(a.value);if(sE(a))return a.filters.map((e=>Gm(e))).join(",");{const e=a.filters.map((n=>Gm(n))).join(",");return`${a.op}(${e})`}}function lE(a,e){return a instanceof Qt?(function(i,l){return l instanceof Qt&&i.op===l.op&&i.field.isEqual(l.field)&&na(i.value,l.value)})(a,e):a instanceof wr?(function(i,l){return l instanceof wr&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,d,p)=>u&&lE(d,l.filters[p])),!0):!1})(a,e):void we(19439)}function oE(a){return a instanceof Qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Il(n.value)}`})(a):a instanceof wr?(function(n){return n.op.toString()+" {"+n.getFilters().map(oE).join(" ,")+"}"})(a):"Filter"}class lR extends Qt{constructor(e,n,i){super(e,n,i),this.key=_e.fromName(i.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class oR extends Qt{constructor(e,n){super(e,"in",n),this.keys=uE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class uR extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=uE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function uE(a,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>_e.fromName(i.referenceValue)))}class cR extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rp(n)&&mu(n.arrayValue,this.value)}}class dR extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mu(this.value.arrayValue,n)}}class hR extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mu(this.value.arrayValue,n)}}class fR extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>mu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n=null,i=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function q_(a,e=null,n=[],i=[],l=null,u=null,d=null){return new mR(a,e,n,i,l,u,d)}function Cp(a){const e=Ie(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Gm(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Wd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Il(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Il(i))).join(",")),e.Te=n}return e.Te}function Ip(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!iR(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!lE(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!B_(a.startAt,e.startAt)&&B_(a.endAt,e.endAt)}function Km(a){return _e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n=null,i=[],l=[],u=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pR(a,e,n,i,l,u,d,p){return new ql(a,e,n,i,l,u,d,p)}function Dp(a){return new ql(a)}function H_(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function cE(a){return a.collectionGroup!==null}function au(a){const e=Ie(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Jt(fn.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new pu(u,i))})),n.has(fn.keyField().canonicalString())||e.Ie.push(new pu(fn.keyField(),i))}return e.Ie}function Zr(a){const e=Ie(a);return e.Ee||(e.Ee=gR(e,au(a))),e.Ee}function gR(a,e){if(a.limitType==="F")return q_(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new pu(l.field,u)}));const n=a.endAt?new Md(a.endAt.position,a.endAt.inclusive):null,i=a.startAt?new Md(a.startAt.position,a.startAt.inclusive):null;return q_(a.path,a.collectionGroup,e,a.filters,a.limit,n,i)}}function Xm(a,e){const n=a.filters.concat([e]);return new ql(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function Vd(a,e,n){return new ql(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function th(a,e){return Ip(Zr(a),Zr(e))&&a.limitType===e.limitType}function dE(a){return`${Cp(Zr(a))}|lt:${a.limitType}`}function pl(a){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>oE(l))).join(", ")}]`),Wd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Il(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Il(l))).join(",")),`Target(${i})`})(Zr(a))}; limitType=${a.limitType})`}function nh(a,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):_e.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(a,e)&&(function(i,l){for(const u of au(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(a,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(a,e)&&(function(i,l){return!(i.startAt&&!(function(d,p,y){const g=U_(d,p,y);return d.inclusive?g<=0:g<0})(i.startAt,au(i),l)||i.endAt&&!(function(d,p,y){const g=U_(d,p,y);return d.inclusive?g>=0:g>0})(i.endAt,au(i),l))})(a,e)}function yR(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function hE(a){return(e,n)=>{let i=!1;for(const l of au(a)){const u=bR(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function bR(a,e,n){const i=a.field.isKeyField()?_e.comparator(e.key,n.key):(function(u,d,p){const y=d.data.field(u),g=p.data.field(u);return y!==null&&g!==null?Cl(y,g):we(42886)})(a.field,e,n);switch(a.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return $x(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=new Rt(_e.comparator);function Ma(){return _R}const fE=new Rt(_e.comparator);function Jo(...a){let e=fE;for(const n of a)e=e.insert(n.key,n);return e}function mE(a){let e=fE;return a.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function fs(){return iu()}function pE(){return iu()}function iu(){return new Ts((a=>a.toString()),((a,e)=>a.isEqual(e)))}const vR=new Rt(_e.comparator),xR=new Jt(_e.comparator);function Qe(...a){let e=xR;for(const n of a)e=e.add(n);return e}const ER=new Jt(Xe);function wR(){return ER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function gE(a){return{integerValue:""+a}}function TR(a,e){return Zk(e)?gE(e):jp(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function AR(a,e,n){return a instanceof Pd?(function(l,u){const d={fields:{[Jx]:{stringValue:Zx},[eE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&kp(u)&&(u=eh(u)),u&&(d.fields[Wx]=u),{mapValue:d}})(n,e):a instanceof gu?bE(a,e):a instanceof yu?_E(a,e):(function(l,u){const d=yE(l,u),p=F_(d)+F_(l.Ae);return Fm(d)&&Fm(l.Ae)?gE(p):jp(l.serializer,p)})(a,e)}function SR(a,e,n){return a instanceof gu?bE(a,e):a instanceof yu?_E(a,e):n}function yE(a,e){return a instanceof Ld?(function(i){return Fm(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Pd extends rh{}class gu extends rh{constructor(e){super(),this.elements=e}}function bE(a,e){const n=vE(e);for(const i of a.elements)n.some((l=>na(l,i)))||n.push(i);return{arrayValue:{values:n}}}class yu extends rh{constructor(e){super(),this.elements=e}}function _E(a,e){let n=vE(e);for(const i of a.elements)n=n.filter((l=>!na(l,i)));return{arrayValue:{values:n}}}class Ld extends rh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function F_(a){return Lt(a.integerValue||a.doubleValue)}function vE(a){return Rp(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function NR(a,e){return a.field.isEqual(e.field)&&(function(i,l){return i instanceof gu&&l instanceof gu||i instanceof yu&&l instanceof yu?Rl(i.elements,l.elements,na):i instanceof Ld&&l instanceof Ld?na(i.Ae,l.Ae):i instanceof Pd&&l instanceof Pd})(a.transform,e.transform)}class kR{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class ah{}function xE(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new Op(a.key,xr.none()):new ku(a.key,a.data,xr.none());{const n=a.data,i=Dn.empty();let l=new Jt(fn.comparator);for(let u of e.fields)if(!l.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),l=l.add(u)}return new Mi(a.key,i,new Fn(l.toArray()),xr.none())}}function RR(a,e,n){a instanceof ku?(function(l,u,d){const p=l.value.clone(),y=K_(l.fieldTransforms,u,d.transformResults);p.setAll(y),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(a,e,n):a instanceof Mi?(function(l,u,d){if(!vd(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=K_(l.fieldTransforms,u,d.transformResults),y=u.data;y.setAll(EE(l)),y.setAll(p),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(a,e,n):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function su(a,e,n,i){return a instanceof ku?(function(u,d,p,y){if(!vd(u.precondition,d))return p;const g=u.value.clone(),x=X_(u.fieldTransforms,y,d);return g.setAll(x),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(a,e,n,i):a instanceof Mi?(function(u,d,p,y){if(!vd(u.precondition,d))return p;const g=X_(u.fieldTransforms,y,d),x=d.data;return x.setAll(EE(u)),x.setAll(g),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(a,e,n,i):(function(u,d,p){return vd(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(a,e,n)}function CR(a,e){let n=null;for(const i of a.fieldTransforms){const l=e.data.field(i.field),u=yE(i.transform,l||null);u!=null&&(n===null&&(n=Dn.empty()),n.set(i.field,u))}return n||null}function G_(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Rl(i,l,((u,d)=>NR(u,d)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class ku extends ah{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Mi extends ah{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function EE(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=a.data.field(n);e.set(n,i)}})),e}function K_(a,e,n){const i=new Map;at(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let l=0;l<n.length;l++){const u=a[l],d=u.transform,p=e.data.field(u.field);i.set(u.field,SR(d,p,n[l]))}return i}function X_(a,e,n){const i=new Map;for(const l of a){const u=l.transform,d=n.data.field(l.field);i.set(l.field,AR(u,d,e))}return i}class Op extends ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IR extends ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&RR(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=su(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=su(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=pE();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(l.key)?null:p;const y=xE(d,p);y!==null&&i.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((n,i)=>G_(n,i)))&&Rl(this.baseMutations,e.baseMutations,((n,i)=>G_(n,i)))}}class Mp{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){at(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return vR})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,i[d].version);return new Mp(e,n,i,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,Ze;function MR(a){switch(a){case Z.OK:return we(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return we(15467,{code:a})}}function wE(a){if(a===void 0)return Oa("GRPC error has no .code"),Z.UNKNOWN;switch(a){case Xt.OK:return Z.OK;case Xt.CANCELLED:return Z.CANCELLED;case Xt.UNKNOWN:return Z.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return Z.INTERNAL;case Xt.UNAVAILABLE:return Z.UNAVAILABLE;case Xt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Xt.NOT_FOUND:return Z.NOT_FOUND;case Xt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Xt.ABORTED:return Z.ABORTED;case Xt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Xt.DATA_LOSS:return Z.DATA_LOSS;default:return we(39323,{code:a})}}(Ze=Xt||(Xt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Ti([4294967295,4294967295],0);function Q_(a){const e=VR().encode(a),n=new Lx;return n.update(e),new Uint8Array(n.digest())}function $_(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ti([n,i],0),new Ti([l,u],0)]}class Vp{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(i<0)throw new Wo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ti.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Ti.fromNumber(i)));return l.compare(PR)===1&&(l=new Ti([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Q_(e),[i,l]=$_(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Vp(u,l,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=Q_(e),[i,l]=$_(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ih(Re.min(),l,new Rt(Xe),Ma(),Qe())}}class Ru{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ru(i,n,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n,i,l){this.be=e,this.removedTargetIds=n,this.key=i,this.De=l}}class TE{constructor(e,n){this.targetId=e,this.Ce=n}}class AE{constructor(e,n,i=mn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class Y_{constructor(){this.ve=0,this.Fe=Z_(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),n=Qe(),i=Qe();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:we(38017,{changeType:u})}})),new Ru(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=Z_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ma(),this.Je=od(),this.He=od(),this.Ye=new Rt(Xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Km(u))if(i===0){const d=new _e(u.path);this.et(n,d,bn.newNoDocument(d,Re.min()))}else at(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const p=this.ut(e),y=p?this.ct(p,e,d):1;if(y!==0){this.it(n);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let d,p;try{d=ki(i).toUint8Array()}catch(y){if(y instanceof Yx)return kl("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new Vp(d,l,u)}catch(y){return kl(y instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Km(p.target)){const y=new _e(p.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,bn.newNoDocument(y,e))}u.Be&&(n.set(d,u.ke()),u.qe())}}));let i=Qe();this.He.forEach(((u,d)=>{let p=!0;d.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new ih(e,n,this.Ye,this.je,i);return this.je=Ma(),this.Je=od(),this.He=od(),this.Ye=new Rt(Xe),l}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Y_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Jt(Xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Jt(Xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Y_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function od(){return new Rt(_e.comparator)}function Z_(){return new Rt(_e.comparator)}const zR={asc:"ASCENDING",desc:"DESCENDING"},UR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BR={and:"AND",or:"OR"};class qR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qm(a,e){return a.useProto3Json||Wd(e)?e:{value:e}}function zd(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SE(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function HR(a,e){return zd(a,e.toTimestamp())}function Jr(a){return at(!!a,49232),Re.fromTimestamp((function(n){const i=Ni(n);return new _t(i.seconds,i.nanos)})(a))}function Pp(a,e){return $m(a,e).canonicalString()}function $m(a,e){const n=(function(l){return new gt(["projects",l.projectId,"databases",l.database])})(a).child("documents");return e===void 0?n:n.child(e)}function NE(a){const e=gt.fromString(a);return at(DE(e),10190,{key:e.toString()}),e}function Ym(a,e){return Pp(a.databaseId,e.path)}function Am(a,e){const n=NE(e);if(n.get(1)!==a.databaseId.projectId)throw new oe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new oe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new _e(RE(n))}function kE(a,e){return Pp(a.databaseId,e)}function FR(a){const e=NE(a);return e.length===4?gt.emptyPath():RE(e)}function Zm(a){return new gt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function RE(a){return at(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function J_(a,e,n){return{name:Ym(a,e),fields:n.value.mapValue.fields}}function GR(a,e){let n;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(g,x){return g.useProto3Json?(at(x===void 0||typeof x=="string",58123),mn.fromBase64String(x||"")):(at(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),mn.fromUint8Array(x||new Uint8Array))})(a,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(g){const x=g.code===void 0?Z.UNKNOWN:wE(g.code);return new oe(x,g.message||"")})(d);n=new AE(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=Am(a,i.document.name),u=Jr(i.document.updateTime),d=i.document.createTime?Jr(i.document.createTime):Re.min(),p=new Dn({mapValue:{fields:i.document.fields}}),y=bn.newFoundDocument(l,u,d,p),g=i.targetIds||[],x=i.removedTargetIds||[];n=new xd(g,x,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=Am(a,i.document),u=i.readTime?Jr(i.readTime):Re.min(),d=bn.newNoDocument(l,u),p=i.removedTargetIds||[];n=new xd([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=Am(a,i.document),u=i.removedTargetIds||[];n=new xd([],u,l,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,d=new OR(l,u),p=i.targetId;n=new TE(p,d)}}return n}function KR(a,e){let n;if(e instanceof ku)n={update:J_(a,e.key,e.value)};else if(e instanceof Op)n={delete:Ym(a,e.key)};else if(e instanceof Mi)n={update:J_(a,e.key,e.data),updateMask:tC(e.fieldMask)};else{if(!(e instanceof IR))return we(16599,{Vt:e.type});n={verify:Ym(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const p=d.transform;if(p instanceof Pd)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof gu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof yu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Ld)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw we(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:HR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:we(27497)})(a,e.precondition)),n}function XR(a,e){return a&&a.length>0?(at(e!==void 0,14353),a.map((n=>(function(l,u){let d=l.updateTime?Jr(l.updateTime):Jr(u);return d.isEqual(Re.min())&&(d=Jr(u)),new kR(d,l.transformResults||[])})(n,e)))):[]}function QR(a,e){return{documents:[kE(a,e.path)]}}function $R(a,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=kE(a,l);const u=(function(g){if(g.length!==0)return IE(wr.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(g){if(g.length!==0)return g.map((x=>(function(A){return{field:gl(A.field),direction:JR(A.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Qm(a,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:l}}function YR(a){let e=FR(a.parent);const n=a.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){at(i===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let u=[];n.where&&(u=(function(E){const A=CE(E);return A instanceof wr&&sE(A)?A.getFilters():[A]})(n.where));let d=[];n.orderBy&&(d=(function(E){return E.map((A=>(function(F){return new pu(yl(F.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(A)))})(n.orderBy));let p=null;n.limit&&(p=(function(E){let A;return A=typeof E=="object"?E.value:E,Wd(A)?null:A})(n.limit));let y=null;n.startAt&&(y=(function(E){const A=!!E.before,D=E.values||[];return new Md(D,A)})(n.startAt));let g=null;return n.endAt&&(g=(function(E){const A=!E.before,D=E.values||[];return new Md(D,A)})(n.endAt)),pR(e,l,d,u,p,"F",y,g)}function ZR(a,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function CE(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=yl(n.unaryFilter.field);return Qt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=yl(n.unaryFilter.field);return Qt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=yl(n.unaryFilter.field);return Qt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=yl(n.unaryFilter.field);return Qt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(a):a.fieldFilter!==void 0?(function(n){return Qt.create(yl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return wr.create(n.compositeFilter.filters.map((i=>CE(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(a):we(30097,{filter:a})}function JR(a){return zR[a]}function WR(a){return UR[a]}function eC(a){return BR[a]}function gl(a){return{fieldPath:a.canonicalString()}}function yl(a){return fn.fromServerFormat(a.fieldPath)}function IE(a){return a instanceof Qt?(function(n){if(n.op==="=="){if(z_(n.value))return{unaryFilter:{field:gl(n.field),op:"IS_NAN"}};if(L_(n.value))return{unaryFilter:{field:gl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z_(n.value))return{unaryFilter:{field:gl(n.field),op:"IS_NOT_NAN"}};if(L_(n.value))return{unaryFilter:{field:gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gl(n.field),op:WR(n.op),value:n.value}}})(a):a instanceof wr?(function(n){const i=n.getFilters().map((l=>IE(l)));return i.length===1?i[0]:{compositeFilter:{op:eC(n.op),filters:i}}})(a):we(54877,{filter:a})}function tC(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function DE(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n,i,l,u=Re.min(),d=Re.min(),p=mn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.yt=e}}function rC(a){const e=YR({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Vd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(){this.Cn=new iC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Si.min())}updateCollectionGroup(e,n,i){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class iC{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new Jt(gt.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new Jt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jE=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(jE,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Dl(0)}static cr(){return new Dl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",sC=1048576;function tv([a,e],[n,i]){const l=Xe(a,n);return l===0?Xe(e,i):l}class lC{constructor(e){this.Ir=e,this.buffer=new Jt(tv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();tv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oC{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(ev,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Bl(n)?he(ev,"Ignoring IndexedDB error during garbage collection: ",n):await Ul(n)}await this.Vr(3e5)}))}}class uC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(Jd.ce);const i=new lC(n);return this.mr.forEachTarget(e,(l=>i.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>i.Ar(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(W_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,l,u,d,p,y,g;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,d=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,n)))).next((E=>(u=E,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(g=Date.now(),ml()<=Ke.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(y-p)+`ms
	Removed ${E} documents in `+(g-y)+`ms
Total Duration: ${g-x}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function cC(a,e){return new uC(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.changes=new Ts((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ee.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&su(i.mutation,l,Fn.empty(),_t.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Qe()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Qe()){const l=fs();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let d=Jo();return u.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=fs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Qe())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,l){let u=Ma();const d=iu(),p=(function(){return iu()})();return n.forEach(((y,g)=>{const x=i.get(g.key);l.has(g.key)&&(x===void 0||x.mutation instanceof Mi)?u=u.insert(g.key,g):x!==void 0?(d.set(g.key,x.mutation.getFieldMask()),su(x.mutation,g,x.mutation.getFieldMask(),_t.now())):d.set(g.key,Fn.empty())})),this.recalculateAndSaveOverlays(e,u).next((y=>(y.forEach(((g,x)=>d.set(g,x))),n.forEach(((g,x)=>p.set(g,new hC(x,d.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=iu();let l=new Rt(((d,p)=>d-p)),u=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((y=>{const g=n.get(y);if(g===null)return;let x=i.get(y)||Fn.empty();x=p.applyToLocalView(g,x),i.set(y,x);const E=(l.get(p.batchId)||Qe()).add(y);l=l.insert(p.batchId,E)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,x=y.value,E=pE();x.forEach((A=>{if(!u.has(A)){const D=xE(n.get(A),i.get(A));D!==null&&E.set(A,D),u=u.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ee.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return(function(d){return _e.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):ee.resolve(fs());let p=du,y=u;return d.next((g=>ee.forEach(g,((x,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),u.get(x)?ee.resolve():this.remoteDocumentCache.getEntry(e,x).next((A=>{y=y.insert(x,A)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,y,g,Qe()))).next((x=>({batchId:p,changes:mE(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((i=>{let l=Jo();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let d=Jo();return this.indexManager.getCollectionParents(e,u).next((p=>ee.forEach(p,(y=>{const g=(function(E,A){return new ql(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,i,l).next((x=>{x.forEach(((E,A)=>{d=d.insert(E,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((d=>{u.forEach(((y,g)=>{const x=g.getKey();d.get(x)===null&&(d=d.insert(x,bn.newInvalidDocument(x)))}));let p=Jo();return d.forEach(((y,g)=>{const x=u.get(y);x!==void 0&&su(x.mutation,g,Fn.empty(),_t.now()),nh(n,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ee.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Jr(l.createTime)}})(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:rC(l.bundledQuery),readTime:Jr(l.readTime)}})(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.overlays=new Rt(_e.comparator),this.qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const i=fs();return ee.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.St(e,n,u)})),ee.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.qr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),ee.resolve()}getOverlaysForCollection(e,n,i){const l=fs(),u=n.length+1,d=new _e(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&y.largestBatchId>i&&l.set(y.getKey(),y)}return ee.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new Rt(((g,x)=>g-x));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>i){let x=u.get(g.largestBatchId);x===null&&(x=fs(),u=u.insert(g.largestBatchId,x)),x.set(g.getKey(),g)}}const p=fs(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,x)=>p.set(g,x))),!(p.size()>=l)););return ee.resolve(p)}St(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(i.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new jR(n,i));let u=this.qr.get(n);u===void 0&&(u=Qe(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(){this.Qr=new Jt(nn.$r),this.Ur=new Jt(nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new nn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new nn(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new _e(new gt([])),i=new nn(n,e),l=new nn(n,e+1),u=[];return this.Ur.forEachInRange([i,l],(d=>{this.Gr(d),u.push(d.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new gt([])),i=new nn(n,e),l=new nn(n,e+1);let u=Qe();return this.Ur.forEachInRange([i,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new nn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class nn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Xe(e.Yr,n.Yr)}static Kr(e,n){return Xe(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(nn.$r)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new DR(u,n,i,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new nn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,n){return ee.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.ei(i),u=l<0?0:l;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Np:this.tr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new nn(n,0),l=new nn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,l],(d=>{const p=this.Xr(d.Yr);u.push(p)})),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Jt(Xe);return n.forEach((l=>{const u=new nn(l,0),d=new nn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,d],(p=>{i=i.add(p.Yr)}))})),ee.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;_e.isDocumentKey(u)||(u=u.child(""));const d=new nn(new _e(u),0);let p=new Jt(Xe);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!i.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),d),ee.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((i=>{const l=this.Xr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){at(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ee.forEach(n.mutations,(l=>{const u=new nn(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new nn(n,0),l=this.Zr.firstAfterOrEqual(i);return ee.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.ri=e,this.docs=(function(){return new Rt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return ee.resolve(i?i.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let i=Ma();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():bn.newInvalidDocument(l))})),ee.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=Ma();const d=n.path,p=new _e(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:x}}=y.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||Xk(Kk(x),i)<=0||(l.has(x.key)||nh(n,x))&&(u=u.insert(x.key,x.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,i,l){we(9500)}ii(e,n){return ee.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new _C(this)}getSize(e){return ee.resolve(this.size)}}class _C extends dC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(i)})),ee.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.persistence=e,this.si=new Ts((n=>Cp(n)),Ip),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Lp,this.targetCount=0,this.ai=Dl.ur()}forEachTarget(e,n){return this.si.forEach(((i,l)=>n(l))),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ee.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Dl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Pr(n),ee.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.si.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),ee.waitFor(u).next((()=>l))}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return ee.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),ee.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return ee.resolve(i)}containsKey(e,n){return ee.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Jd(0),this.li=!1,this.li=!0,this.hi=new gC,this.referenceDelegate=e(this),this.Pi=new vC(this),this.indexManager=new aC,this.remoteDocumentCache=(function(l){return new bC(l)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new nC(n),this.Ii=new mC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new yC(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){he("MemoryPersistence","Starting transaction:",e);const l=new xC(this.ci.next());return this.referenceDelegate.Ei(),i(l).next((u=>this.referenceDelegate.di(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ai(e,n){return ee.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class xC extends $k{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Ri=new Lp,this.Vi=null}static mi(e){return new zp(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ee.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.fi,(i=>{const l=_e.fromPath(i);return this.gi(e,l).next((u=>{u||n.removeEntry(l,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ee.or([()=>ee.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ud{constructor(e,n){this.persistence=e,this.pi=new Ts((i=>Jk(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=cC(this,n)}static mi(e,n){return new Ud(e,n)}Ei(){}di(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return ee.forEach(this.pi,((i,l)=>this.br(e,i,l).next((u=>u?ee.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((p=>{p||(i++,u.removeEntry(d,Re.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ee.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bd(e.data.value)),n}br(e,n,i){return ee.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return ee.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=l}static As(e,n){let i=Qe(),l=Qe();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Up(e,n.fromCache,i,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return WA()?8:Yk(_n())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.ys(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ws(e,n,l,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new EC;return this.Ss(e,n,d).next((p=>{if(u.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>u.result))}bs(e,n,i,l){return i.documentReadCount<this.fs?(ml()<=Ke.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",pl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ee.resolve()):(ml()<=Ke.DEBUG&&he("QueryEngine","Query:",pl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.gs*l?(ml()<=Ke.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",pl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(n))):ee.resolve())}ys(e,n){if(H_(n))return ee.resolve(null);let i=Zr(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Vd(n,null,"F"),i=Zr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Qe(...u);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((y=>{const g=this.Ds(n,p);return this.Cs(n,g,d,y.readTime)?this.ys(e,Vd(n,null,"F")):this.vs(e,g,n,y)}))))})))))}ws(e,n,i,l){return H_(n)||l.isEqual(Re.min())?ee.resolve(null):this.ps.getDocuments(e,i).next((u=>{const d=this.Ds(n,u);return this.Cs(n,d,i,l)?ee.resolve(null):(ml()<=Ke.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),pl(n)),this.vs(e,d,n,Gk(l,du)).next((p=>p)))}))}Ds(e,n){let i=new Jt(hE(e));return n.forEach(((l,u)=>{nh(e,u)&&(i=i.add(u))})),i}Cs(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}Ss(e,n,i){return ml()<=Ke.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",pl(n)),this.ps.getDocumentsMatchingQuery(e,n,Si.min(),i)}vs(e,n,i,l){return this.ps.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",TC=3e8;class AC{constructor(e,n,i,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new Rt(Xe),this.xs=new Ts((u=>Cp(u)),Ip),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function SC(a,e,n,i){return new AC(a,e,n,i)}async function ME(a,e){const n=Ie(a);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],p=[];let y=Qe();for(const g of l){d.push(g.batchId);for(const x of g.mutations)y=y.add(x.key)}for(const g of u){p.push(g.batchId);for(const x of g.mutations)y=y.add(x.key)}return n.localDocuments.getDocuments(i,y).next((g=>({Ls:g,removedBatchIds:d,addedBatchIds:p})))}))}))}function NC(a,e){const n=Ie(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,x){const E=g.batch,A=E.keys();let D=ee.resolve();return A.forEach((F=>{D=D.next((()=>x.getEntry(y,F))).next(($=>{const U=g.docVersions.get(F);at(U!==null,48541),$.version.compareTo(U)<0&&(E.applyToRemoteDocument($,g),$.isValidDocument()&&($.setReadTime(g.commitVersion),x.addEntry($)))}))})),D.next((()=>p.mutationQueue.removeMutationBatch(y,E)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let y=Qe();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function VE(a){const e=Ie(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function kC(a,e){const n=Ie(a),i=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((x,E)=>{const A=l.get(E);if(!A)return;p.push(n.Pi.removeMatchingKeys(u,x.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(u,x.addedDocuments,E))));let D=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?D=D.withResumeToken(mn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):x.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(x.resumeToken,i)),l=l.insert(E,D),(function($,U,ne){return $.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=TC?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(A,D,x)&&p.push(n.Pi.updateTargetData(u,D))}));let y=Ma(),g=Qe();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,x))})),p.push(RC(u,d,e.documentUpdates).next((x=>{y=x.ks,g=x.qs}))),!i.isEqual(Re.min())){const x=n.Pi.getLastRemoteSnapshotVersion(u).next((E=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(x)}return ee.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,y,g))).next((()=>y))})).then((u=>(n.Ms=l,u)))}function RC(a,e,n){let i=Qe(),l=Qe();return n.forEach((u=>i=i.add(u))),e.getEntries(a,i).next((u=>{let d=Ma();return n.forEach(((p,y)=>{const g=u.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Re.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):he(Bp,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:d,qs:l}}))}function CC(a,e){const n=Ie(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Np),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function IC(a,e){const n=Ie(a);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.Pi.getTargetData(i,e).next((u=>u?(l=u,ee.resolve(l)):n.Pi.allocateTargetId(i).next((d=>(l=new vi(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.Ms.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Jm(a,e,n){const i=Ie(a),l=i.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Bl(d))throw d;he(Bp,`Failed to update sequence numbers for target ${e}: ${d}`)}i.Ms=i.Ms.remove(e),i.xs.delete(l.target)}function nv(a,e,n){const i=Ie(a);let l=Re.min(),u=Qe();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,g,x){const E=Ie(y),A=E.xs.get(x);return A!==void 0?ee.resolve(E.Ms.get(A)):E.Pi.getTargetData(g,x)})(i,d,Zr(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{u=y}))})).next((()=>i.Fs.getDocumentsMatchingQuery(d,e,n?l:Re.min(),n?u:Qe()))).next((p=>(DC(i,yR(e),p),{documents:p,Qs:u})))))}function DC(a,e,n){let i=a.Os.get(e)||Re.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),a.Os.set(e,i)}class rv{constructor(){this.activeTargetIds=wR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jC{constructor(){this.Mo=new rv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="ConnectivityMonitor";class iv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(av,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(av,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud=null;function Wm(){return ud===null?ud=(function(){return 268435456+Math.round(2147483648*Math.random())})():ud++,"0x"+ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="RestConnection",MC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${l}`,this.Wo=this.databaseId.database===jd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Go(e,n,i,l,u){const d=Wm(),p=this.zo(e,n.toUriEncodedString());he(Sm,`Sending RPC '${e}' ${d}:`,p,i);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,u);const{host:g}=new URL(p),x=Vl(g);return this.Jo(e,p,y,i,x).then((E=>(he(Sm,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw kl(Sm,`RPC '${e}' ${d} failed with error: `,E,"url: ",p,"request:",i),E}))}Ho(e,n,i,l,u,d){return this.Go(e,n,i,l,u)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}zo(e,n){const i=MC[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class LC extends VC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,l,u){const d=Wm();return new Promise(((p,y)=>{const g=new zx;g.setWithCredentials(!0),g.listenOnce(Ux.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case yd.NO_ERROR:const E=g.getResponseJson();he(gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),p(E);break;case yd.TIMEOUT:he(gn,`RPC '${e}' ${d} timed out`),y(new oe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case yd.HTTP_ERROR:const A=g.getStatus();if(he(gn,`RPC '${e}' ${d} failed with status:`,A,"response text:",g.getResponseText()),A>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const F=D==null?void 0:D.error;if(F&&F.status&&F.message){const $=(function(ne){const ae=ne.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ae)>=0?ae:Z.UNKNOWN})(F.status);y(new oe($,F.message))}else y(new oe(Z.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new oe(Z.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{he(gn,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(l);he(gn,`RPC '${e}' ${d} sending request:`,l),g.send(n,"POST",x,i,15)}))}T_(e,n,i){const l=Wm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Hx(),p=qx(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,i),y.encodeInitMessageHeaders=!0;const x=u.join("");he(gn,`Creating RPC '${e}' stream ${l}: ${x}`,y);const E=d.createWebChannel(x,y);this.I_(E);let A=!1,D=!1;const F=new PC({Yo:U=>{D?he(gn,`Not sending because RPC '${e}' stream ${l} is closed:`,U):(A||(he(gn,`Opening RPC '${e}' stream ${l} transport.`),E.open(),A=!0),he(gn,`RPC '${e}' stream ${l} sending:`,U),E.send(U))},Zo:()=>E.close()}),$=(U,ne,ae)=>{U.listen(ne,(te=>{try{ae(te)}catch(me){setTimeout((()=>{throw me}),0)}}))};return $(E,Zo.EventType.OPEN,(()=>{D||(he(gn,`RPC '${e}' stream ${l} transport opened.`),F.o_())})),$(E,Zo.EventType.CLOSE,(()=>{D||(D=!0,he(gn,`RPC '${e}' stream ${l} transport closed`),F.a_(),this.E_(E))})),$(E,Zo.EventType.ERROR,(U=>{D||(D=!0,kl(gn,`RPC '${e}' stream ${l} transport errored. Name:`,U.name,"Message:",U.message),F.a_(new oe(Z.UNAVAILABLE,"The operation could not be completed")))})),$(E,Zo.EventType.MESSAGE,(U=>{var ne;if(!D){const ae=U.data[0];at(!!ae,16349);const te=ae,me=(te==null?void 0:te.error)||((ne=te[0])==null?void 0:ne.error);if(me){he(gn,`RPC '${e}' stream ${l} received error:`,me);const Ne=me.status;let Se=(function(N){const j=Xt[N];if(j!==void 0)return wE(j)})(Ne),k=me.message;Se===void 0&&(Se=Z.INTERNAL,k="Unknown error status: "+Ne+" with message "+me.message),D=!0,F.a_(new oe(Se,k)),E.close()}else he(gn,`RPC '${e}' stream ${l} received:`,ae),F.u_(ae)}})),$(p,Bx.STAT_EVENT,(U=>{U.stat===Bm.PROXY?he(gn,`RPC '${e}' stream ${l} detected buffering proxy`):U.stat===Bm.NOPROXY&&he(gn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(a){return new qR(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=l,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&he("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="PersistentStream";class LE{constructor(e,n,i,l,u,d,p,y){this.Mi=e,this.S_=i,this.b_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new PE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Oa(n.toString()),Oa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new oe(Z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(sv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(sv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zC extends LE{constructor(e,n,i,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GR(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Jr(d.readTime):Re.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Zm(this.serializer),n.addTarget=(function(u,d){let p;const y=d.target;if(p=Km(y)?{documents:QR(u,y)}:{query:$R(u,y).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=SE(u,d.resumeToken);const g=Qm(u,d.expectedCount);g!==null&&(p.expectedCount=g)}else if(d.snapshotVersion.compareTo(Re.min())>0){p.readTime=zd(u,d.snapshotVersion.toTimestamp());const g=Qm(u,d.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const i=ZR(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Zm(this.serializer),n.removeTarget=e,this.q_(n)}}class UC extends LE{constructor(e,n,i,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,d),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=XR(e.writeResults,e.commitTime),i=Jr(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Zm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>KR(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{}class qC extends BC{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new oe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Go(e,$m(n,i),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe(Z.UNKNOWN,u.toString())}))}Ho(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,$m(n,i),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new oe(Z.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class HC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Oa(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="RemoteStore";class FC{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((d=>{i.enqueueAndForget((async()=>{As(this)&&(he(vs,"Restarting streams for network reachability change."),await(async function(y){const g=Ie(y);g.Ea.add(4),await Cu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await lh(g)})(this))}))})),this.Ra=new HC(i,l)}}async function lh(a){if(As(a))for(const e of a.da)await e(!0)}async function Cu(a){for(const e of a.da)await e(!1)}function zE(a,e){const n=Ie(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gp(n)?Fp(n):Hl(n).O_()&&Hp(n,e))}function qp(a,e){const n=Ie(a),i=Hl(n);n.Ia.delete(e),i.O_()&&UE(n,e),n.Ia.size===0&&(i.O_()?i.L_():As(n)&&n.Ra.set("Unknown"))}function Hp(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hl(a).Y_(e)}function UE(a,e){a.Va.Ue(e),Hl(a).Z_(e)}function Fp(a){a.Va=new LR({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),Hl(a).start(),a.Ra.ua()}function Gp(a){return As(a)&&!Hl(a).x_()&&a.Ia.size>0}function As(a){return Ie(a).Ea.size===0}function BE(a){a.Va=void 0}async function GC(a){a.Ra.set("Online")}async function KC(a){a.Ia.forEach(((e,n)=>{Hp(a,e)}))}async function XC(a,e){BE(a),Gp(a)?(a.Ra.ha(e),Fp(a)):a.Ra.set("Unknown")}async function QC(a,e,n){if(a.Ra.set("Online"),e instanceof AE&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(a,e)}catch(i){he(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bd(a,i)}else if(e instanceof xd?a.Va.Ze(e):e instanceof TE?a.Va.st(e):a.Va.tt(e),!n.isEqual(Re.min()))try{const i=await VE(a.localStore);n.compareTo(i)>=0&&await(function(u,d){const p=u.Va.Tt(d);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const x=u.Ia.get(g);x&&u.Ia.set(g,x.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,g)=>{const x=u.Ia.get(y);if(!x)return;u.Ia.set(y,x.withResumeToken(mn.EMPTY_BYTE_STRING,x.snapshotVersion)),UE(u,y);const E=new vi(x.target,y,g,x.sequenceNumber);Hp(u,E)})),u.remoteSyncer.applyRemoteEvent(p)})(a,n)}catch(i){he(vs,"Failed to raise snapshot:",i),await Bd(a,i)}}async function Bd(a,e,n){if(!Bl(e))throw e;a.Ea.add(1),await Cu(a),a.Ra.set("Offline"),n||(n=()=>VE(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{he(vs,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await lh(a)}))}function qE(a,e){return e().catch((n=>Bd(a,n,e)))}async function oh(a){const e=Ie(a),n=Ci(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Np;for(;$C(e);)try{const l=await CC(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,YC(e,l)}catch(l){await Bd(e,l)}HE(e)&&FE(e)}function $C(a){return As(a)&&a.Ta.length<10}function YC(a,e){a.Ta.push(e);const n=Ci(a);n.O_()&&n.X_&&n.ea(e.mutations)}function HE(a){return As(a)&&!Ci(a).x_()&&a.Ta.length>0}function FE(a){Ci(a).start()}async function ZC(a){Ci(a).ra()}async function JC(a){const e=Ci(a);for(const n of a.Ta)e.ea(n.mutations)}async function WC(a,e,n){const i=a.Ta.shift(),l=Mp.from(i,e,n);await qE(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await oh(a)}async function eI(a,e){e&&Ci(a).X_&&await(async function(i,l){if((function(d){return MR(d)&&d!==Z.ABORTED})(l.code)){const u=i.Ta.shift();Ci(i).B_(),await qE(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await oh(i)}})(a,e),HE(a)&&FE(a)}async function lv(a,e){const n=Ie(a);n.asyncQueue.verifyOperationInProgress(),he(vs,"RemoteStore received new credentials");const i=As(n);n.Ea.add(3),await Cu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await lh(n)}async function tI(a,e){const n=Ie(a);e?(n.Ea.delete(2),await lh(n)):e||(n.Ea.add(2),await Cu(n),n.Ra.set("Unknown"))}function Hl(a){return a.ma||(a.ma=(function(n,i,l){const u=Ie(n);return u.sa(),new zC(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:GC.bind(null,a),t_:KC.bind(null,a),r_:XC.bind(null,a),H_:QC.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),Gp(a)?Fp(a):a.Ra.set("Unknown")):(await a.ma.stop(),BE(a))}))),a.ma}function Ci(a){return a.fa||(a.fa=(function(n,i,l){const u=Ie(n);return u.sa(),new UC(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZC.bind(null,a),r_:eI.bind(null,a),ta:JC.bind(null,a),na:WC.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await oh(a)):(await a.fa.stop(),a.Ta.length>0&&(he(vs,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const d=Date.now()+i,p=new Kp(e,n,d,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(a,e){if(Oa("AsyncQueue",`${e}: ${a}`),Bl(a))return new oe(Z.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||_e.comparator(n.key,i.key):(n,i)=>_e.comparator(n.key,i.key),this.keyedMap=Jo(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Tl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.ga=new Rt(_e.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class jl{constructor(e,n,i,l,u,d,p,y,g){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,n,i,l,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new jl(e,n,Tl.emptySet(n),d,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class rI{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Ie(n),u=l.queries;l.queries=uv(),u.forEach(((d,p)=>{for(const y of p.Sa)y.onError(i)}))})(this,new oe(Z.ABORTED,"Firestore shutting down"))}}function uv(){return new Ts((a=>dE(a)),th)}async function GE(a,e){const n=Ie(a);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.ba()&&e.Da()&&(i=2):(u=new nI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=Xp(d,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Qp(n)}async function KE(a,e){const n=Ie(a),i=e.query;let l=3;const u=n.queries.get(i);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?l=e.Da()?0:1:!u.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function aI(a,e){const n=Ie(a);let i=!1;for(const l of e){const u=l.query,d=n.queries.get(u);if(d){for(const p of d.Sa)p.Fa(l)&&(i=!0);d.wa=l}}i&&Qp(n)}function iI(a,e,n){const i=Ie(a),l=i.queries.get(e);if(l)for(const u of l.Sa)u.onError(n);i.queries.delete(e)}function Qp(a){a.Ca.forEach((e=>{e.next()}))}var ep,cv;(cv=ep||(ep={})).Ma="default",cv.Cache="cache";class XE{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new jl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.key=e}}class $E{constructor(e){this.key=e}}class sI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=hE(e),this.tu=new Tl(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new ov,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,E)=>{const A=l.get(x),D=nh(this.query,E)?E:null,F=!!A&&this.mutatedKeys.has(A.key),$=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let U=!1;A&&D?A.data.isEqual(D.data)?F!==$&&(i.track({type:3,doc:D}),U=!0):this.su(A,D)||(i.track({type:2,doc:D}),U=!0,(y&&this.eu(D,y)>0||g&&this.eu(D,g)<0)&&(p=!0)):!A&&D?(i.track({type:0,doc:D}),U=!0):A&&!D&&(i.track({type:1,doc:A}),U=!0,(y||g)&&(p=!0)),U&&(D?(d=d.add(D),u=$?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),i.track({type:1,doc:x})}return{tu:d,iu:i,Cs:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,E)=>(function(D,F){const $=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:U})}};return $(D)-$(F)})(x.type,E.type)||this.eu(x.doc,E.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,d.length!==0||g?{snapshot:new jl(this.query,e.tu,u,d,e.mutatedKeys,y===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ov,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new $E(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new QE(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return jl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $p="SyncEngine";class lI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class oI{constructor(e){this.key=e,this.hu=!1}}class uI{constructor(e,n,i,l,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ts((p=>dE(p)),th),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(_e.comparator),this.Au=new Map,this.Ru=new Lp,this.Vu={},this.mu=new Map,this.fu=Dl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cI(a,e,n=!0){const i=t1(a);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await YE(i,e,n,!0),l}async function dI(a,e){const n=t1(a);await YE(n,e,!0,!1)}async function YE(a,e,n,i){const l=await IC(a.localStore,Zr(e)),u=l.targetId,d=a.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await hI(a,e,u,d==="current",l.resumeToken)),a.isPrimaryClient&&n&&zE(a.remoteStore,l),p}async function hI(a,e,n,i,l){a.pu=(E,A,D)=>(async function($,U,ne,ae){let te=U.view.ru(ne);te.Cs&&(te=await nv($.localStore,U.query,!1).then((({documents:k})=>U.view.ru(k,te))));const me=ae&&ae.targetChanges.get(U.targetId),Ne=ae&&ae.targetMismatches.get(U.targetId)!=null,Se=U.view.applyChanges(te,$.isPrimaryClient,me,Ne);return hv($,U.targetId,Se.au),Se.snapshot})(a,E,A,D);const u=await nv(a.localStore,e,!0),d=new sI(e,u.Qs),p=d.ru(u.documents),y=Ru.createSynthesizedTargetChangeForCurrentChange(n,i&&a.onlineState!=="Offline",l),g=d.applyChanges(p,a.isPrimaryClient,y);hv(a,n,g.au);const x=new lI(e,n,d);return a.Tu.set(e,x),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),g.snapshot}async function fI(a,e,n){const i=Ie(a),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((d=>!th(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Jm(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&qp(i.remoteStore,l.targetId),tp(i,l.targetId)})).catch(Ul)):(tp(i,l.targetId),await Jm(i.localStore,l.targetId,!0))}async function mI(a,e){const n=Ie(a),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),qp(n.remoteStore,i.targetId))}async function pI(a,e,n){const i=EI(a);try{const l=await(function(d,p){const y=Ie(d),g=_t.now(),x=p.reduce(((D,F)=>D.add(F.key)),Qe());let E,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(D=>{let F=Ma(),$=Qe();return y.Ns.getEntries(D,x).next((U=>{F=U,F.forEach(((ne,ae)=>{ae.isValidDocument()||($=$.add(ne))}))})).next((()=>y.localDocuments.getOverlayedDocuments(D,F))).next((U=>{E=U;const ne=[];for(const ae of p){const te=CR(ae,E.get(ae.key).overlayedDocument);te!=null&&ne.push(new Mi(ae.key,te,rE(te.value.mapValue),xr.exists(!0)))}return y.mutationQueue.addMutationBatch(D,g,ne,p)})).next((U=>{A=U;const ne=U.applyToLocalDocumentSet(E,$);return y.documentOverlayCache.saveOverlays(D,U.batchId,ne)}))})).then((()=>({batchId:A.batchId,changes:mE(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(d,p,y){let g=d.Vu[d.currentUser.toKey()];g||(g=new Rt(Xe)),g=g.insert(p,y),d.Vu[d.currentUser.toKey()]=g})(i,l.batchId,n),await Iu(i,l.changes),await oh(i.remoteStore)}catch(l){const u=Xp(l,"Failed to persist write");n.reject(u)}}async function ZE(a,e){const n=Ie(a);try{const i=await kC(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=n.Au.get(u);d&&(at(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?at(d.hu,14607):l.removedDocuments.size>0&&(at(d.hu,42227),d.hu=!1))})),await Iu(n,i,e)}catch(i){await Ul(i)}}function dv(a,e,n){const i=Ie(a);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const y=Ie(d);y.onlineState=p;let g=!1;y.queries.forEach(((x,E)=>{for(const A of E.Sa)A.va(p)&&(g=!0)})),g&&Qp(y)})(i.eventManager,e),l.length&&i.Pu.H_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function gI(a,e,n){const i=Ie(a);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let d=new Rt(_e.comparator);d=d.insert(u,bn.newNoDocument(u,Re.min()));const p=Qe().add(u),y=new ih(Re.min(),new Map,new Rt(Xe),d,p);await ZE(i,y),i.du=i.du.remove(u),i.Au.delete(e),Yp(i)}else await Jm(i.localStore,e,!1).then((()=>tp(i,e,n))).catch(Ul)}async function yI(a,e){const n=Ie(a),i=e.batch.batchId;try{const l=await NC(n.localStore,e);WE(n,i,null),JE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Iu(n,l)}catch(l){await Ul(l)}}async function bI(a,e,n){const i=Ie(a);try{const l=await(function(d,p){const y=Ie(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let x;return y.mutationQueue.lookupMutationBatch(g,p).next((E=>(at(E!==null,37113),x=E.keys(),y.mutationQueue.removeMutationBatch(g,E)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,x,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,x))).next((()=>y.localDocuments.getDocuments(g,x)))}))})(i.localStore,e);WE(i,e,n),JE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Iu(i,l)}catch(l){await Ul(l)}}function JE(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function WE(a,e,n){const i=Ie(a);let l=i.Vu[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.Vu[i.currentUser.toKey()]=l}}function tp(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const i of a.Iu.get(e))a.Tu.delete(i),n&&a.Pu.yu(i,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((i=>{a.Ru.containsKey(i)||e1(a,i)}))}function e1(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&(qp(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),Yp(a))}function hv(a,e,n){for(const i of n)i instanceof QE?(a.Ru.addReference(i.key,e),_I(a,i)):i instanceof $E?(he($p,"Document no longer in limbo: "+i.key),a.Ru.removeReference(i.key,e),a.Ru.containsKey(i.key)||e1(a,i.key)):we(19791,{wu:i})}function _I(a,e){const n=e.key,i=n.path.canonicalString();a.du.get(n)||a.Eu.has(i)||(he($p,"New document in limbo: "+n),a.Eu.add(i),Yp(a))}function Yp(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new _e(gt.fromString(e)),i=a.fu.next();a.Au.set(i,new oI(n)),a.du=a.du.insert(n,i),zE(a.remoteStore,new vi(Zr(Dp(n.path)),i,"TargetPurposeLimboResolution",Jd.ce))}}async function Iu(a,e,n){const i=Ie(a),l=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,y)=>{d.push(i.pu(y,e,n).then((g=>{var x;if((g||n)&&i.isPrimaryClient){const E=g?!g.fromCache:(x=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:x.current;i.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(g){l.push(g);const E=Up.As(y.targetId,g);u.push(E)}})))})),await Promise.all(d),i.Pu.H_(l),await(async function(y,g){const x=Ie(y);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ee.forEach(g,(A=>ee.forEach(A.Es,(D=>x.persistence.referenceDelegate.addReference(E,A.targetId,D))).next((()=>ee.forEach(A.ds,(D=>x.persistence.referenceDelegate.removeReference(E,A.targetId,D)))))))))}catch(E){if(!Bl(E))throw E;he(Bp,"Failed to update sequence numbers: "+E)}for(const E of g){const A=E.targetId;if(!E.fromCache){const D=x.Ms.get(A),F=D.snapshotVersion,$=D.withLastLimboFreeSnapshotVersion(F);x.Ms=x.Ms.insert(A,$)}}})(i.localStore,u))}async function vI(a,e){const n=Ie(a);if(!n.currentUser.isEqual(e)){he($p,"User change. New user:",e.toKey());const i=await ME(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((y=>{y.reject(new oe(Z.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Iu(n,i.Ls)}}function xI(a,e){const n=Ie(a),i=n.Au.get(e);if(i&&i.hu)return Qe().add(i.key);{let l=Qe();const u=n.Iu.get(e);if(!u)return l;for(const d of u){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function t1(a){const e=Ie(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gI.bind(null,e),e.Pu.H_=aI.bind(null,e.eventManager),e.Pu.yu=iI.bind(null,e.eventManager),e}function EI(a){const e=Ie(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bI.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return SC(this.persistence,new wC,e.initialUser,this.serializer)}Cu(e){return new OE(zp.mi,this.serializer)}Du(e){return new jC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class wI extends qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){at(this.persistence.referenceDelegate instanceof Ud,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new oC(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new OE((i=>Ud.mi(i,n)),this.serializer)}}class np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>dv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=vI.bind(null,this.syncEngine),await tI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rI})()}createDatastore(e){const n=sh(e.databaseInfo.databaseId),i=(function(u){return new LC(u)})(e.databaseInfo);return(function(u,d,p,y){return new qC(u,d,p,y)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,d,p){return new FC(i,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>dv(this.syncEngine,n,0)),(function(){return iv.v()?new iv:new OC})())}createSyncEngine(e,n){return(function(l,u,d,p,y,g,x){const E=new uI(l,u,d,p,y,g);return x&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(l){const u=Ie(l);he(vs,"RemoteStore shutting down."),u.Ea.add(5),await Cu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Oa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="FirestoreClient";class TI{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=l,this.user=yn.UNAUTHENTICATED,this.clientId=Sp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{he(Ii,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(he(Ii,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Xp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function km(a,e){a.asyncQueue.verifyOperationInProgress(),he(Ii,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let i=n.initialUser;a.setCredentialChangeListener((async l=>{i.isEqual(l)||(await ME(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function fv(a,e){a.asyncQueue.verifyOperationInProgress();const n=await AI(a);he(Ii,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((i=>lv(e.remoteStore,i))),a.setAppCheckTokenChangeListener(((i,l)=>lv(e.remoteStore,l))),a._onlineComponents=e}async function AI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){he(Ii,"Using user provided OfflineComponentProvider");try{await km(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Z.FAILED_PRECONDITION||l.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;kl("Error using user provided cache. Falling back to memory cache: "+n),await km(a,new qd)}}else he(Ii,"Using default OfflineComponentProvider"),await km(a,new wI(void 0));return a._offlineComponents}async function r1(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(he(Ii,"Using user provided OnlineComponentProvider"),await fv(a,a._uninitializedComponentsProvider._online)):(he(Ii,"Using default OnlineComponentProvider"),await fv(a,new np))),a._onlineComponents}function SI(a){return r1(a).then((e=>e.syncEngine))}async function a1(a){const e=await r1(a),n=e.eventManager;return n.onListen=cI.bind(null,e.syncEngine),n.onUnlisten=fI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mI.bind(null,e.syncEngine),n}function NI(a,e,n={}){const i=new Ca;return a.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,y,g){const x=new n1({next:A=>{x.Nu(),d.enqueueAndForget((()=>KE(u,E)));const D=A.docs.has(p);!D&&A.fromCache?g.reject(new oe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&A.fromCache&&y&&y.source==="server"?g.reject(new oe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),E=new XE(Dp(p.path),x,{includeMetadataChanges:!0,qa:!0});return GE(u,E)})(await a1(a),a.asyncQueue,e,n,i))),i.promise}function kI(a,e,n={}){const i=new Ca;return a.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,y,g){const x=new n1({next:A=>{x.Nu(),d.enqueueAndForget((()=>KE(u,E))),A.fromCache&&y.source==="server"?g.reject(new oe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),E=new XE(p,x,{includeMetadataChanges:!0,qa:!0});return GE(u,E)})(await a1(a),a.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="firestore.googleapis.com",pv=!0;class gv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s1,this.ssl=pv}else this.host=e.host,this.ssl=e.ssl??pv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sC)throw new oe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=i1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new oe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new oe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new oe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uh{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Ok;switch(i.type){case"firstParty":return new Lk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=mv.get(n);i&&(he("ComponentProvider","Removing Datastore"),mv.delete(n),i.terminate())})(this),Promise.resolve()}}function RI(a,e,n,i={}){var g;a=ta(a,uh);const l=Vl(e),u=a._getSettings(),d={...u,emulatorOptions:a._getEmulatorOptions()},p=`${e}:${n}`;l&&(Yv(`https://${p}`),Zv("Firestore",!0)),u.host!==s1&&u.host!==p&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:p,ssl:l,emulatorOptions:i};if(!ps(y,d)&&(a._setSettings(y),i.mockUserToken)){let x,E;if(typeof i.mockUserToken=="string")x=i.mockUserToken,E=yn.MOCK_USER;else{x=FA(i.mockUserToken,(g=a._app)==null?void 0:g.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new oe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new yn(A)}a._authCredentials=new Mk(new Gx(x,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class zt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Nu(n,zt._jsonSchema))return new zt(e,i||null,new _e(gt.fromString(n.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:$t("string",zt._jsonSchemaVersion),referencePath:$t("string")};class Ai extends Vi{constructor(e,n,i){super(e,n,Dp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new _e(e))}withConverter(e){return new Ai(this.firestore,e,this._path)}}function yv(a,e,...n){if(a=rn(a),Kx("collection","path",e),a instanceof uh){const i=gt.fromString(e,...n);return R_(i),new Ai(a,null,i)}{if(!(a instanceof zt||a instanceof Ai))throw new oe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=a._path.child(gt.fromString(e,...n));return R_(i),new Ai(a.firestore,null,i)}}function Al(a,e,...n){if(a=rn(a),arguments.length===1&&(e=Sp.newId()),Kx("doc","path",e),a instanceof uh){const i=gt.fromString(e,...n);return k_(i),new zt(a,null,new _e(i))}{if(!(a instanceof zt||a instanceof Ai))throw new oe(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=a._path.child(gt.fromString(e,...n));return k_(i),new zt(a.firestore,a instanceof Ai?a.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="AsyncQueue";class _v{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new PE(this,"async_queue_retry"),this._c=()=>{const i=Nm();i&&he(bv,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bl(e))throw e;he(bv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Oa("INTERNAL UNHANDLED ERROR: ",vv(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Kp.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&we(47125,{Pc:vv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vv(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}class Fl extends uh{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new _v,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _v(e),this._firestoreClient=void 0,await e}}}function CI(a,e){const n=typeof a=="object"?a:tx(),i=typeof a=="string"?a:jd,l=gp(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=qA("firestore");u&&RI(l,...u)}return l}function Zp(a){if(a._terminated)throw new oe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||II(a),a._firestoreClient}function II(a){var i,l,u;const e=a._freezeSettings(),n=(function(p,y,g,x){return new tR(p,y,g,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,i1(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(a._databaseId,((i=a._app)==null?void 0:i.options.appId)||"",a._persistenceKey,e);a._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new TI(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(mn.fromBase64String(e))}catch(n){throw new oe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ir(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:$t("string",ir._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wr._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,Wr._jsonSchema))return new Wr(e.latitude,e.longitude)}}Wr._jsonSchemaVersion="firestore/geoPoint/1.0",Wr._jsonSchema={type:$t("string",Wr._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ea._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,ea._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ea(e.vectorValues);throw new oe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ea._jsonSchemaVersion="firestore/vectorValue/1.0",ea._jsonSchema={type:$t("string",ea._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=/^__.*__$/;class jI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ku(e,this.data,n,this.fieldTransforms)}}class l1{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function o1(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:a})}}class Wp{constructor(e,n,i,l,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(o1(this.Ac)&&DI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class OI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||sh(e)}Cc(e,n,i,l=!1){return new Wp({Ac:e,methodName:n,Dc:i,path:fn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eg(a){const e=a._freezeSettings(),n=sh(a._databaseId);return new OI(a._databaseId,!!e.ignoreUndefinedProperties,n)}function MI(a,e,n,i,l,u={}){const d=a.Cc(u.merge||u.mergeFields?2:0,e,n,l);tg("Data must be an object, but it was:",d,i);const p=u1(i,d);let y,g;if(u.merge)y=new Fn(d.fieldMask),g=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const E of u.mergeFields){const A=rp(e,E,n);if(!d.contains(A))throw new oe(Z.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);d1(x,A)||x.push(A)}y=new Fn(x),g=d.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,g=d.fieldTransforms;return new jI(new Dn(p),y,g)}class dh extends Jp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dh}}function VI(a,e,n,i){const l=a.Cc(1,e,n);tg("Data must be an object, but it was:",l,i);const u=[],d=Dn.empty();Oi(i,((y,g)=>{const x=ng(e,y,n);g=rn(g);const E=l.yc(x);if(g instanceof dh)u.push(x);else{const A=Du(g,E);A!=null&&(u.push(x),d.set(x,A))}}));const p=new Fn(u);return new l1(d,p,l.fieldTransforms)}function PI(a,e,n,i,l,u){const d=a.Cc(1,e,n),p=[rp(e,i,n)],y=[l];if(u.length%2!=0)throw new oe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)p.push(rp(e,u[A])),y.push(u[A+1]);const g=[],x=Dn.empty();for(let A=p.length-1;A>=0;--A)if(!d1(g,p[A])){const D=p[A];let F=y[A];F=rn(F);const $=d.yc(D);if(F instanceof dh)g.push(D);else{const U=Du(F,$);U!=null&&(g.push(D),x.set(D,U))}}const E=new Fn(g);return new l1(x,E,d.fieldTransforms)}function LI(a,e,n,i=!1){return Du(n,a.Cc(i?4:3,e))}function Du(a,e){if(c1(a=rn(a)))return tg("Unsupported field value:",e,a),u1(a,e);if(a instanceof Jp)return(function(i,l){if(!o1(l.Ac))throw l.Sc(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,l){const u=[];let d=0;for(const p of i){let y=Du(p,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),d++}return{arrayValue:{values:u}}})(a,e)}return(function(i,l){if((i=rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TR(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=_t.fromDate(i);return{timestampValue:zd(l.serializer,u)}}if(i instanceof _t){const u=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zd(l.serializer,u)}}if(i instanceof Wr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ir)return{bytesValue:SE(l.serializer,i._byteString)};if(i instanceof zt){const u=l.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Pp(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ea)return(function(d,p){return{mapValue:{fields:{[tE]:{stringValue:nE},[Od]:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return jp(p.serializer,g)}))}}}}}})(i,l);throw l.Sc(`Unsupported field value: ${Zd(i)}`)})(a,e)}function u1(a,e){const n={};return $x(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(a,((i,l)=>{const u=Du(l,e.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function c1(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof _t||a instanceof Wr||a instanceof ir||a instanceof zt||a instanceof Jp||a instanceof ea)}function tg(a,e,n){if(!c1(n)||!Xx(n)){const i=Zd(n);throw i==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+i)}}function rp(a,e,n){if((e=rn(e))instanceof ch)return e._internalPath;if(typeof e=="string")return ng(a,e);throw Hd("Field path arguments must be of type string or ",a,!1,void 0,n)}const zI=new RegExp("[~\\*/\\[\\]]");function ng(a,e,n){if(e.search(zI)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new ch(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function Hd(a,e,n,i,l){const u=i&&!i.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${i}`),d&&(y+=` in document ${l}`),y+=")"),new oe(Z.INVALID_ARGUMENT,p+a+y)}function d1(a,e){return a.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UI extends h1{data(){return super.data()}}function rg(a,e){return typeof e=="string"?ng(a,e):e instanceof ch?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new oe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ag{}class ig extends ag{}function xv(a,e,...n){let i=[];e instanceof ag&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((y=>y instanceof lg)).length,p=u.filter((y=>y instanceof sg)).length;if(d>1||d>0&&p>0)throw new oe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)a=l._apply(a);return a}class sg extends ig{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new sg(e,n,i)}_apply(e){const n=this._parse(e);return f1(e._query,n),new Vi(e.firestore,e.converter,Xm(e._query,n))}_parse(e){const n=eg(e.firestore);return(function(u,d,p,y,g,x,E){let A;if(g.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new oe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){Tv(E,x);const F=[];for(const $ of E)F.push(wv(y,u,$));A={arrayValue:{values:F}}}else A=wv(y,u,E)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||Tv(E,x),A=LI(p,d,E,x==="in"||x==="not-in");return Qt.create(g,x,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class lg extends ag{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:wr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const y of p)f1(d,y),d=Xm(d,y)})(e._query,n),new Vi(e.firestore,e.converter,Xm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class og extends ig{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new og(e,n)}_apply(e){const n=(function(l,u,d){if(l.startAt!==null)throw new oe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new oe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pu(u,d)})(e._query,this._field,this._direction);return new Vi(e.firestore,e.converter,(function(l,u){const d=l.explicitOrderBy.concat([u]);return new ql(l.path,l.collectionGroup,d,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,n))}}function Ev(a,e="asc"){const n=e,i=rg("orderBy",a);return og._create(i,n)}class ug extends ig{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new ug(e,n,i)}_apply(e){return new Vi(e.firestore,e.converter,Vd(e._query,this._limit,this._limitType))}}function qI(a){return ug._create("limit",a,"F")}function wv(a,e,n){if(typeof(n=rn(n))=="string"){if(n==="")throw new oe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cE(e)&&n.indexOf("/")!==-1)throw new oe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(gt.fromString(n));if(!_e.isDocumentKey(i))throw new oe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return P_(a,new _e(i))}if(n instanceof zt)return P_(a,n._key);throw new oe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zd(n)}.`)}function Tv(a,e){if(!Array.isArray(a)||a.length===0)throw new oe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function f1(a,e){const n=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(a.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new oe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HI{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Oi(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){var i,l,u;const n=(u=(l=(i=e.fields)==null?void 0:i[Od].arrayValue)==null?void 0:l.values)==null?void 0:u.map((d=>Lt(d.doubleValue)));return new ea(n)}convertGeoPoint(e){return new Wr(Lt(e.latitude),Lt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=eh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const n=Ni(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=gt.fromString(e);at(DE(i),9688,{name:e});const l=new fu(i.get(1),i.get(3)),u=new _e(i.popFirst(5));return l.isEqual(n)||Oa(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(a,e,n){let i;return i=a?a.toFirestore(e):e,i}class eu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ms extends h1{constructor(e,n,i,l,u,d){super(e,n,i,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(rg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ms._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ms._jsonSchemaVersion="firestore/documentSnapshot/1.0",ms._jsonSchema={type:$t("string",ms._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Ed extends ms{data(e={}){return super.data(e)}}class Sl{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new eu(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Ed(this._firestore,this._userDataWriter,i.key,i,new eu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const y=new Ed(l._firestore,l._userDataWriter,p.doc.key,p.doc,new eu(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const y=new Ed(l._firestore,l._userDataWriter,p.doc.key,p.doc,new eu(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,x=-1;return p.type!==0&&(g=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:GI(p.type),doc:y,oldIndex:g,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GI(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(a){a=ta(a,zt);const e=ta(a.firestore,Fl);return NI(Zp(e),a._key).then((n=>QI(e,a,n)))}Sl._jsonSchemaVersion="firestore/querySnapshot/1.0",Sl._jsonSchema={type:$t("string",Sl._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class m1 extends HI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function Av(a){a=ta(a,Vi);const e=ta(a.firestore,Fl),n=Zp(e),i=new m1(e);return BI(a._query),kI(n,a._query).then((l=>new Sl(e,i,a,l)))}function KI(a,e,n){a=ta(a,zt);const i=ta(a.firestore,Fl),l=FI(a.converter,e);return cg(i,[MI(eg(i),"setDoc",a._key,l,a.converter!==null,n).toMutation(a._key,xr.none())])}function ap(a,e,n,...i){a=ta(a,zt);const l=ta(a.firestore,Fl),u=eg(l);let d;return d=typeof(e=rn(e))=="string"||e instanceof ch?PI(u,"updateDoc",a._key,e,n,i):VI(u,"updateDoc",a._key,e),cg(l,[d.toMutation(a._key,xr.exists(!0))])}function XI(a){return cg(ta(a.firestore,Fl),[new Op(a._key,xr.none())])}function cg(a,e){return(function(i,l){const u=new Ca;return i.asyncQueue.enqueueAndForget((async()=>pI(await SI(i),l,u))),u.promise})(Zp(a),e)}function QI(a,e,n){const i=n.docs.get(e._key),l=new m1(a);return new ms(a,l,e._key,i,new eu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){zl=l})(Pl),Nl(new gs("firestore",((i,{instanceIdentifier:l,options:u})=>{const d=i.getProvider("app").getImmediate(),p=new Fl(new Vk(i.getProvider("auth-internal")),new zk(d,i.getProvider("app-check-internal")),(function(g,x){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(g.options.projectId,x)})(d,l),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),wi(T_,A_,e),wi(T_,A_,"esm2020")})();const $I={apiKey:"AIzaSyCJLR0gKSrzN3VCyZ74AeAFL82WuMI0Z0k",authDomain:"zenbaki-osoak-2dbh.firebaseapp.com",projectId:"zenbaki-osoak-2dbh",storageBucket:"zenbaki-osoak-2dbh.firebasestorage.app",messagingSenderId:"402362957412",appId:"1:402362957412:web:b89a1b9e802426ae74e971"},p1=ex($I),cd=Dk(p1),_i=CI(p1),rt={theory_intro:50,theory_operations:50,theory_multiplication:50,theory_powers:50,theory_advanced:50,ordering_easy:100,ordering_medium:150,ordering_hard:200,addition_easy:100,addition_medium:150,addition_hard:200,subtraction_easy:100,subtraction_medium:150,subtraction_hard:200,multiplication_easy:100,multiplication_medium:150,multiplication_hard:200,division_easy:100,division_medium:150,division_hard:200,powers_easy:100,powers_medium:150,powers_hard:200,roots_easy:100,roots_medium:150,roots_hard:200,combined_easy:100,combined_medium:150,combined_hard:200,mixed_easy:150,mixed_medium:250,mixed_hard:500},ip=[{id:"first_steps",title:"Lehen Urratsak",description:"Lortu zure lehenengo 100 XP.",icon:"footprint",xpReward:50,condition:a=>a.xp>=100},{id:"streak_5",title:"Beroketa",description:"Lortu 5 eguneko bolada.",icon:"local_fire_department",xpReward:100,condition:a=>a.streak>=5},{id:"streak_10",title:"Sutan!",description:"Lortu 10 eguneko bolada.",icon:"whatshot",xpReward:300,condition:a=>a.streak>=10},{id:"level_5",title:"Ikasle Aurreratua",description:"Iritsi 5. Mailara.",icon:"school",xpReward:250,condition:a=>a.level>=5},{id:"level_10",title:"Matematika Maisua",description:"Iritsi 10. Mailara.",icon:"military_tech",xpReward:1e3,condition:a=>a.level>=10},{id:"master_ordering",title:"Ordenaren Zaindaria",description:"Osatu Ordena (Hard).",icon:"sort",xpReward:400,condition:a=>(a.gameXp.ordering_hard||0)>=200},{id:"power_master",title:"Potentzia Handia",description:"Osatu Berreketak (Hard).",icon:"electric_bolt",xpReward:500,condition:a=>(a.gameXp.powers_hard||0)>=200}],YI=a=>{const e=new Date,n=new Date(a.lastLoginDate),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime(),l=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime(),u=1440*60*1e3;return i>l&&(i-l===u?a.streak+=1:i-l>u&&(a.streak=1),a.lastLoginDate=e.toISOString()),a},fl={login:async(a,e)=>{const i=(await yN(cd,a,e)).user.uid,l=Al(_i,"users",i),u=await Fd(l);if(u.exists()){let d=u.data();const p=d.streak;return d=YI(d),(p!==d.streak||d.lastLoginDate!==u.data().lastLoginDate)&&await ap(l,{streak:d.streak,lastLoginDate:d.lastLoginDate}),d}else throw new Error("Erabiltzailearen datuak ez dira aurkitu.")},loginAsGuest:async()=>({uid:"guest_"+Date.now(),email:"guest@zoa.eus",displayName:"Gonbidatua",photoURL:"https://ui-avatars.com/api/?name=Guest&background=e2e8f0&color=64748b",xp:0,level:1,streak:0,lastLoginDate:new Date().toISOString(),completedLessons:[],gameXp:{},unlockedAchievements:[]}),register:async(a,e,n)=>{const l=(await gN(cd,a,e)).user.uid,u={uid:l,email:a,displayName:n,photoURL:`https://ui-avatars.com/api/?name=${n}&background=136dec&color=fff`,xp:0,level:1,streak:1,lastLoginDate:new Date().toISOString(),completedLessons:[],gameXp:{},unlockedAchievements:[],isAdmin:a==="admin@zoa.eus"};return await KI(Al(_i,"users",l),u),u},logout:async()=>{await xN(cd)},onAuthStateChanged:a=>vN(cd,a),getUserProfile:async a=>{const e=Al(_i,"users",a),n=await Fd(e);return n.exists()?n.data():null}},bu={updateUserProgress:async(a,e,n)=>{const i=Al(_i,"users",a),l=await Fd(i);if(!l.exists())throw new Error("User not found");const u=l.data();u.gameXp||(u.gameXp={}),u.unlockedAchievements||(u.unlockedAchievements=[]);let d=0;const p=u.gameXp[n]||0;if(e>=0){const g=rt[n]||9999,x=Math.max(0,g-p);d=Math.min(e,x),d>0&&(u.xp+=d,u.gameXp[n]=p+d,n.startsWith("theory_")&&!u.completedLessons.includes(n)&&u.completedLessons.push(n))}else{const g=Math.abs(e),x=Math.min(g,p);x>0&&(u.gameXp[n]=p-x,u.xp=Math.max(0,u.xp-x)),d=-x}const y=[];return d>=0&&(u.level=Math.floor(u.xp/500)+1,ip.forEach(g=>{u.unlockedAchievements.includes(g.id)||g.condition(u)&&(u.unlockedAchievements.push(g.id),u.xp+=g.xpReward,u.level=Math.floor(u.xp/500)+1,y.push(g))})),await ap(i,{xp:u.xp,level:u.level,gameXp:u.gameXp,completedLessons:u.completedLessons,unlockedAchievements:u.unlockedAchievements}),{user:u,actualXpAdded:d,newAchievements:y}},updateProfile:async(a,e)=>{const n=Al(_i,"users",a);return await ap(n,e),(await Fd(n)).data()},getLeaderboard:async()=>{const a=xv(yv(_i,"users"),Ev("xp","desc"),qI(10)),e=await Av(a),n=[];return e.forEach(i=>{n.push(i.data())}),n},getAllUsers:async()=>{const a=xv(yv(_i,"users"),Ev("lastLoginDate","desc")),e=await Av(a),n=[];return e.forEach(i=>{n.push(i.data())}),n},kickUser:async a=>{await XI(Al(_i,"users",a))}},g1=L.createContext(void 0),ZI=({children:a})=>{const[e,n]=L.useState([]),i=L.useCallback((u,d)=>{const p=Date.now().toString()+Math.random().toString().slice(2,8);n(y=>[...y,{id:p,type:u,message:d}]),setTimeout(()=>{n(y=>y.filter(g=>g.id!==p))},3e3)},[]),l=L.useCallback(u=>{n(d=>d.filter(p=>p.id!==u))},[]);return m.jsx(g1.Provider,{value:{addToast:i,removeToast:l,toasts:e},children:a})},ju=()=>{const a=L.useContext(g1);if(a===void 0)throw new Error("useToast must be used within an ToastProvider");return a};let Qo=null,vl=!1;const JI=()=>vl?null:(Qo||(Qo=new(window.AudioContext||window.webkitAudioContext)),Qo.state==="suspended"&&Qo.resume(),Qo),Hn=(a,e,n,i=0,l=.1)=>{if(vl)return;const u=JI();if(!u)return;const d=u.createOscillator(),p=u.createGain();d.type=e,d.frequency.setValueAtTime(a,u.currentTime+i),p.gain.setValueAtTime(l,u.currentTime+i),p.gain.exponentialRampToValueAtTime(.01,u.currentTime+i+n),d.connect(p),p.connect(u.destination),d.start(u.currentTime+i),d.stop(u.currentTime+i+n)},Sv={toggleMute:()=>(vl=!vl,vl),isMuted:()=>vl},Tt={correct:()=>{Hn(600,"sine",.1,0),Hn(800,"sine",.2,.1)},wrong:()=>{Hn(150,"sawtooth",.3,0)},click:()=>{Hn(400,"triangle",.05,0,.05)},win:()=>{Hn(400,"sine",.1,0),Hn(500,"sine",.1,.1),Hn(600,"sine",.1,.2),Hn(800,"square",.4,.3)},levelUp:()=>{Hn(400,"sine",.1,0),Hn(500,"sine",.1,.1),Hn(600,"sine",.1,.2),Hn(800,"sine",.1,.3),Hn(1e3,"square",.4,.4)}},y1=L.createContext(void 0),WI=({children:a})=>{const[e,n]=L.useState(null),[i,l]=L.useState(!0),{addToast:u}=ju();L.useEffect(()=>{const E=fl.onAuthStateChanged(async A=>{if(A)try{const D=await fl.getUserProfile(A.uid);n(D||null)}catch(D){console.error("Error fetching profile",D),n(null)}else n(null);l(!1)});return()=>E()},[]);const d=async(E,A)=>{const D=await fl.login(E,A);n(D)},p=async()=>{const E=await fl.loginAsGuest();n(E)},y=async(E,A,D)=>{const F=await fl.register(E,A,D);n(F)},g=async()=>{await fl.logout(),n(null)},x=async(E,A)=>{if(!e||e.uid.startsWith("guest_"))return 0;try{const{user:D,actualXpAdded:F,newAchievements:$}=await bu.updateUserProgress(e.uid,E,A);return n(D),$&&$.length>0&&$.forEach(U=>{Tt.win(),u("achievement",`Lorpena desblokeatuta: ${U.title} (+${U.xpReward} XP)`)}),F}catch(D){return console.error("XP Error",D),0}};return m.jsx(y1.Provider,{value:{user:e,loading:i,login:d,loginAsGuest:p,register:y,logout:g,addXp:x},children:!i&&a})},aa=()=>{const a=L.useContext(y1);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},e4=()=>{const a=ra(),e=Es(),{user:n,logout:i}=aa(),[l,u]=L.useState(!1),[d,p]=L.useState(Sv.isMuted());L.useEffect(()=>{document.documentElement.classList.contains("dark")&&u(!0)},[]);const y=()=>{Tt.click();const D=document.documentElement;D.classList.contains("dark")?(D.classList.remove("dark"),u(!1)):(D.classList.add("dark"),u(!0))},g=()=>{const D=Sv.toggleMute();p(D),D||Tt.click()},x=D=>a.pathname===D,E=D=>`text-sm font-medium leading-normal transition-colors ${x(D)?"text-primary font-bold":"text-slate-700 dark:text-slate-300 hover:text-primary dark:hover:text-primary"}`,A=async()=>{Tt.click(),await i(),e("/")};return m.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-slate-200 dark:border-slate-800 bg-surface-light/95 dark:bg-surface-dark/95 backdrop-blur transition-colors duration-200",children:m.jsxs("div",{className:"px-4 md:px-10 py-3 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx(Ye,{to:"/",className:"size-8 text-primary",onClick:()=>Tt.click(),children:m.jsxs("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{d:"M39.5563 34.1455V13.8546C39.5563 15.708 36.8773 17.3437 32.7927 18.3189C30.2914 18.916 27.263 19.2655 24 19.2655C20.737 19.2655 17.7086 18.916 15.2073 18.3189C11.1227 17.3437 8.44365 15.708 8.44365 13.8546V34.1455C8.44365 35.9988 11.1227 37.6346 15.2073 38.6098C17.7086 39.2069 20.737 39.5564 24 39.5564C27.263 39.5564 30.2914 39.2069 32.7927 38.6098C36.8773 37.6346 39.5563 35.9988 39.5563 34.1455Z",fill:"currentColor"}),m.jsx("path",{clipRule:"evenodd",d:"M10.4485 13.8519C10.4749 13.9271 10.6203 14.246 11.379 14.7361C12.298 15.3298 13.7492 15.9145 15.6717 16.3735C18.0007 16.9296 20.8712 17.2655 24 17.2655C27.1288 17.2655 29.9993 16.9296 32.3283 16.3735C34.2508 15.9145 35.702 15.3298 36.621 14.7361C37.3796 14.246 37.5251 13.9271 37.5515 13.8519C37.5287 13.7876 37.4333 13.5973 37.0635 13.2931C36.5266 12.8516 35.6288 12.3647 34.343 11.9175C31.79 11.0295 28.1333 10.4437 24 10.4437C19.8667 10.4437 16.2099 11.0295 13.657 11.9175C12.3712 12.3647 11.4734 12.8516 10.9365 13.2931C10.5667 13.5973 10.4713 13.7876 10.4485 13.8519ZM37.5563 18.7877C36.3176 19.3925 34.8502 19.8839 33.2571 20.2642C30.5836 20.9025 27.3973 21.2655 24 21.2655C20.6027 21.2655 17.4164 20.9025 14.7429 20.2642C13.1498 19.8839 11.6824 19.3925 10.4436 18.7877V34.1275C10.4515 34.1545 10.5427 34.4867 11.379 35.027C12.298 35.6207 13.7492 36.2054 15.6717 36.6644C18.0007 37.2205 20.8712 37.5564 24 37.5564C27.1288 37.5564 29.9993 37.2205 32.3283 36.6644C34.2508 36.2054 35.702 35.6207 36.621 35.027C37.4573 34.4867 37.5485 34.1546 37.5563 34.1275V18.7877ZM41.5563 13.8546V34.1455C41.5563 36.1078 40.158 37.5042 38.7915 38.3869C37.3498 39.3182 35.4192 40.0389 33.2571 40.5551C30.5836 41.1934 27.3973 41.5564 24 41.5564C20.6027 41.5564 17.4164 41.1934 14.7429 40.5551C12.5808 40.0389 10.6502 39.3182 9.20848 38.3869C7.84205 37.5042 6.44365 36.1078 6.44365 34.1455L6.44365 13.8546C6.44365 12.2684 7.37223 11.0454 8.39581 10.2036C9.43325 9.3505 10.8137 8.67141 12.343 8.13948C15.4203 7.06909 19.5418 6.44366 24 6.44366C28.4582 6.44366 32.5797 7.06909 35.657 8.13948C37.1863 8.67141 38.5667 9.3505 39.6042 10.2036C40.6278 11.0454 41.5563 12.2684 41.5563 13.8546Z",fill:"currentColor",fillRule:"evenodd"})]})}),m.jsx("h2",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] hidden sm:block",children:"Zenbaki Osoen Abentura"})]}),m.jsxs("div",{className:"flex items-center gap-4 md:gap-8",children:[m.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[m.jsx(Ye,{className:E("/"),to:"/",children:"Hasiera"}),m.jsx(Ye,{className:E("/topics"),to:"/topics",children:"Teoria"}),m.jsx(Ye,{className:E("/games"),to:"/games",children:"Jokoak"}),n&&m.jsx(Ye,{className:E("/progress"),to:"/progress",children:"Aurrerapena"}),n&&n.isAdmin&&m.jsx(Ye,{className:"text-sm font-bold text-red-500 hover:text-red-700 uppercase tracking-wider",to:"/admin",children:"ADMIN"})]}),m.jsxs("div",{className:"flex gap-4 items-center",children:[m.jsx("button",{onClick:g,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-colors",children:m.jsx("span",{className:"material-symbols-outlined",children:d?"volume_off":"volume_up"})}),m.jsx("button",{onClick:y,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-500 dark:text-slate-400 transition-colors",children:m.jsx("span",{className:"material-symbols-outlined",children:l?"light_mode":"dark_mode"})}),n?m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:A,className:"hidden md:flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 transition-colors text-slate-900 dark:text-white text-sm font-bold leading-normal tracking-[0.015em]",children:m.jsx("span",{className:"truncate",children:"Saioa itxi"})}),m.jsx(Ye,{to:"/profile",title:"Nire Profila",className:"bg-center bg-no-repeat bg-cover rounded-full size-10 border-2 border-primary/50 dark:border-primary/50 shadow-sm hover:scale-105 transition-transform",style:{backgroundImage:`url("${n.photoURL||"https://ui-avatars.com/api/?name="+n.displayName}")`}})]}):m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Ye,{to:"/login",className:"flex items-center justify-center rounded-lg h-9 px-4 bg-primary hover:bg-blue-600 transition-colors text-white text-sm font-bold shadow-sm shadow-blue-500/30",children:m.jsx("span",{className:"truncate",children:"Hasi Saioa"})}),m.jsx(Ye,{to:"/register",className:"hidden sm:flex items-center justify-center rounded-lg h-9 px-4 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors text-slate-900 dark:text-white text-sm font-bold",children:m.jsx("span",{className:"truncate",children:"Erregistratu"})})]})]})]})]})})},t4=()=>m.jsx("footer",{className:"w-full border-t border-slate-200 dark:border-slate-800 bg-surface-light dark:bg-surface-dark py-10 px-10",children:m.jsxs("div",{className:"max-w-[1200px] mx-auto flex flex-col md:flex-row justify-between items-center gap-6",children:[m.jsxs("div",{className:"flex items-center gap-2 text-slate-900 dark:text-white",children:[m.jsx("div",{className:"size-6 text-primary",children:m.jsx("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M39.5563 34.1455V13.8546C39.5563 15.708 36.8773 17.3437 32.7927 18.3189C30.2914 18.916 27.263 19.2655 24 19.2655C20.737 19.2655 17.7086 18.916 15.2073 18.3189C11.1227 17.3437 8.44365 15.708 8.44365 13.8546V34.1455C8.44365 35.9988 11.1227 37.6346 15.2073 38.6098C17.7086 39.2069 20.737 39.5564 24 39.5564C27.263 39.5564 30.2914 39.2069 32.7927 38.6098C36.8773 37.6346 39.5563 35.9988 39.5563 34.1455Z",fill:"currentColor"})})}),m.jsx("span",{className:"font-bold text-lg",children:"Zenbaki Osoen Abentura"})]}),m.jsxs("div",{className:"flex gap-8 text-sm font-medium text-slate-600 dark:text-slate-400",children:[m.jsx("a",{className:"hover:text-primary transition-colors",href:"#",children:"Irakasleentzat"}),m.jsx("a",{className:"hover:text-primary transition-colors",href:"#",children:"Laguntza"}),m.jsx("a",{className:"hover:text-primary transition-colors",href:"#",children:"Pribatutasuna"})]}),m.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:" 2023 DBH Matematika"})]})}),n4=()=>{const{toasts:a,removeToast:e}=ju(),n=l=>{switch(l){case"success":return"bg-green-500 text-white border-green-600";case"error":return"bg-red-500 text-white border-red-600";case"xp":return"bg-yellow-400 text-slate-900 border-yellow-500 font-black";case"achievement":return"bg-purple-600 text-white border-purple-400 font-bold shadow-purple-500/50";default:return"bg-slate-800 text-white border-slate-900"}},i=l=>{switch(l){case"success":return"check_circle";case"error":return"error";case"xp":return"bolt";case"achievement":return"emoji_events";default:return"info"}};return m.jsx("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2",children:a.map(l=>m.jsxs("div",{onClick:()=>e(l.id),className:`flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg border-b-4 cursor-pointer animate-in slide-in-from-right fade-in duration-300 hover:scale-105 transition-transform ${n(l.type)}`,children:[m.jsx("span",{className:"material-symbols-outlined",children:i(l.type)}),m.jsx("span",{className:"text-sm font-bold",children:l.message})]},l.id))})},r4=()=>{const{user:a}=aa(),e=u=>a?a.completedLessons.includes(u):!1,n=e("theory_intro");e("theory_operations"),e("theory_multiplication"),e("theory_powers");const i=e("theory_advanced"),l=a?a.level>=5:!1;return m.jsx("main",{className:"flex-1 flex flex-col items-center w-full",children:m.jsxs("div",{className:"w-full max-w-[1200px] px-4 md:px-10 flex flex-col gap-12 pb-20",children:[m.jsx("section",{className:"@container mt-8 md:mt-12",children:m.jsxs("div",{className:"flex flex-col-reverse gap-8 md:flex-row items-center",children:[m.jsxs("div",{className:"flex flex-col gap-6 md:w-1/2 items-start text-left",children:[m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx("span",{className:"text-primary font-bold tracking-wider uppercase text-xs md:text-sm bg-primary/10 w-fit px-3 py-1 rounded-full",children:"DBH 2. Maila - Matematika"}),m.jsx("h1",{className:"text-slate-900 dark:text-white text-4xl md:text-5xl lg:text-6xl font-black leading-[1.1] tracking-[-0.033em]",children:"Zenbaki Osoen Abentura Hasi!"}),m.jsx("h2",{className:"text-slate-600 dark:text-slate-400 text-base md:text-lg font-normal leading-relaxed max-w-[500px]",children:"Ikasi, jolastu eta irabazi puntuak. Deskubritu zenbaki negatiboen mundua erronka dibertigarriekin eta bihurtu matematikako txapeldun."})]}),m.jsxs("div",{className:"flex gap-4 w-full sm:w-auto flex-col sm:flex-row",children:[m.jsxs(Ye,{to:"/topics",className:"flex items-center justify-center rounded-lg h-12 px-8 bg-primary hover:bg-blue-600 text-white text-base font-bold shadow-lg shadow-blue-500/40 transition-all hover:translate-y-[-2px]",children:[m.jsx("span",{className:"truncate",children:"Hasi Abentura"}),m.jsx("span",{className:"material-symbols-outlined ml-2 text-[20px]",children:"rocket_launch"})]}),m.jsx(Ye,{to:"/theory/intro",className:"flex items-center justify-center rounded-lg h-12 px-6 bg-white dark:bg-surface-dark border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 font-bold transition-all",children:m.jsx("span",{children:"Lehen Ikasgaia"})})]})]}),m.jsx("div",{className:"w-full md:w-1/2 aspect-video md:aspect-square lg:aspect-[4/3] bg-center bg-no-repeat bg-cover rounded-2xl shadow-2xl shadow-primary/10 overflow-hidden relative group",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAqmvAuI9_ytmxwMBXV9ubA8KS2DSe3XEPM5aROqmNBTmliY-H8QjZ3fS9t4mOZHGGRcug1VZrzBfppqzDBH4IybMsE5Mc0iP496e08PNQv9QKKaAJAjRPswCKVzbcKfaC9LvzL-fcWuOLLNCoVv4RbqHYb3O3ilFQC9Rxovw_kI1eaJyTqlaTrX1gS1Ky6_iUUOSf9Iy5sfXDZfQv_nRo1_7FWIEEKBpXtUv0t-gblYLtakb2zxVN0rLP91s1F7_yOkBlAetImQVmY")'},children:m.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary/20 to-transparent"})})]})}),m.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full",children:[m.jsxs("div",{className:"flex flex-col gap-2 rounded-xl p-6 bg-surface-light dark:bg-surface-dark border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden group",children:[m.jsx("div",{className:"absolute right-[-10px] top-[-10px] text-slate-100 dark:text-slate-800 rotate-12 group-hover:scale-110 transition-transform",children:m.jsx("span",{className:"material-symbols-outlined text-[100px]",children:"groups"})}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-bold uppercase tracking-wider relative z-10",children:"Jokalari Aktiboak"}),m.jsx("p",{className:"text-slate-900 dark:text-white text-3xl font-black leading-tight relative z-10",children:"150+"})]}),m.jsxs("div",{className:"flex flex-col gap-2 rounded-xl p-6 bg-surface-light dark:bg-surface-dark border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden group",children:[m.jsx("div",{className:"absolute right-[-10px] top-[-10px] text-slate-100 dark:text-slate-800 rotate-12 group-hover:scale-110 transition-transform",children:m.jsx("span",{className:"material-symbols-outlined text-[100px]",children:"check_circle"})}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-bold uppercase tracking-wider relative z-10",children:"Ebatzitako Ariketak"}),m.jsx("p",{className:"text-slate-900 dark:text-white text-3xl font-black leading-tight relative z-10",children:"3,500"})]}),m.jsxs("div",{className:"flex flex-col gap-2 rounded-xl p-6 bg-surface-light dark:bg-surface-dark border border-slate-200 dark:border-slate-700 shadow-sm relative overflow-hidden group",children:[m.jsx("div",{className:"absolute right-[-10px] top-[-10px] text-slate-100 dark:text-slate-800 rotate-12 group-hover:scale-110 transition-transform",children:m.jsx("span",{className:"material-symbols-outlined text-[100px]",children:"military_tech"})}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-bold uppercase tracking-wider relative z-10",children:"Maila Maximoa"}),m.jsx("p",{className:"text-slate-900 dark:text-white text-3xl font-black leading-tight relative z-10 text-primary",children:"Lvl 10"})]})]}),m.jsxs("section",{className:"flex flex-col gap-6 w-full",children:[m.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-slate-700 pb-4",children:[m.jsx("h2",{className:"text-slate-900 dark:text-white text-2xl font-bold tracking-tight",children:"Aukeratu Zure Bidea"}),m.jsxs(Ye,{className:"text-primary hover:text-blue-600 text-sm font-bold flex items-center gap-1",to:"/topics",children:["Ikusi dena ",m.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"arrow_forward"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsxs(Ye,{className:"group relative flex flex-col gap-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-surface-light dark:bg-surface-dark p-5 transition-all hover:-translate-y-1 hover:border-primary/50 hover:shadow-lg dark:hover:border-primary/50",to:"/topics",children:[m.jsx("div",{className:"w-full h-32 rounded-lg bg-slate-100 dark:bg-slate-800 bg-cover bg-center",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuC1cgGZwA72EHOK1-O-BIlo3M3MkeaYS-J0OdZg29jMmVZb-y7I--J4ezmq12kiNHzi60eNCmuf1ANads-dS8fRqTZsTP9jDRiOBnght9FJZQz8ci0BN-8cvfioR3Ii04sTokdxopMBGM9cG0zMH0La_fLlU_-s-R6TlAtDhz3npfdMd8Uf3z0qGXO5MUzSXPdEjO2BxvcP4VQrf17fEx0LEK8qphbXKZ-FJAx_1MF5xrlDgu6LmGFWlLTNBgslTm2N3GNFwdloP8TB")'}}),m.jsxs("div",{className:"flex flex-col flex-1",children:[m.jsx("div",{className:"flex items-center gap-2 mb-2",children:m.jsx("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wide",children:"Ikasgaia"})}),m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold group-hover:text-primary transition-colors",children:"Teoria Orokorra"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 line-clamp-2",children:"Zenbaki osoen definizioa, adibideak eta oinarrizko kontzeptuak."})]})]}),n?m.jsxs(Ye,{className:"group relative flex flex-col gap-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-surface-light dark:bg-surface-dark p-5 transition-all hover:-translate-y-1 hover:border-primary/50 hover:shadow-lg dark:hover:border-primary/50",to:"/games?mode=ordering&difficulty=easy",children:[m.jsx("div",{className:"w-full h-32 rounded-lg bg-slate-100 dark:bg-slate-800 bg-cover bg-center",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuDRuJL8XcxOxLUfp4STBBcZtrGVgXIJSmpVHm3LdlzeuZiXJ0li916s3sLNCUPq7NEJpuFVQaThKg72Dp1A5GhOZNUzZ9241T3e26Zu2dc637v7CVSkGTDI8qS95bWJN_LJLEWXWlAy0Szzv93YqJ5rCcctQuoi7_Dp1qC1xTTOeObXqluXX30E1XY6QnCF8rvxQ3rJ6Y7fOvvTO0TS_0oWxPS7fIgPXIobpotiFPpX40Y7q6_iwDJcwSns-J9f7DtgQRJ_JLHIHsnt")'}}),m.jsxs("div",{className:"flex flex-col flex-1",children:[m.jsx("div",{className:"flex items-center gap-2 mb-2",children:m.jsx("span",{className:"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wide",children:"Praktika"})}),m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold group-hover:text-primary transition-colors",children:"Ordena"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 line-clamp-2",children:"Praktikatu zenbaki positibo eta negatiboen ordena."})]})]}):m.jsxs("div",{className:"group relative flex flex-col gap-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-surface-light dark:bg-surface-dark p-5 opacity-60 grayscale cursor-not-allowed",children:[m.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:m.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-500",children:"lock"})}),m.jsx("div",{className:"w-full h-32 rounded-lg bg-slate-100 dark:bg-slate-800 bg-cover bg-center",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuDRuJL8XcxOxLUfp4STBBcZtrGVgXIJSmpVHm3LdlzeuZiXJ0li916s3sLNCUPq7NEJpuFVQaThKg72Dp1A5GhOZNUzZ9241T3e26Zu2dc637v7CVSkGTDI8qS95bWJN_LJLEWXWlAy0Szzv93YqJ5rCcctQuoi7_Dp1qC1xTTOeObXqluXX30E1XY6QnCF8rvxQ3rJ6Y7fOvvTO0TS_0oWxPS7fIgPXIobpotiFPpX40Y7q6_iwDJcwSns-J9f7DtgQRJ_JLHIHsnt")'}}),m.jsxs("div",{className:"flex flex-col flex-1",children:[m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold",children:"Ordena"}),m.jsx("p",{className:"text-xs font-bold text-red-500",children:"Osatu 1. Test-a"})]})]}),i?m.jsxs(Ye,{className:"group relative flex flex-col gap-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-surface-light dark:bg-surface-dark p-5 transition-all hover:-translate-y-1 hover:border-purple-500/50 hover:shadow-lg dark:hover:border-purple-500/50",to:"/games?mode=combined&difficulty=easy",children:[m.jsx("div",{className:"w-full h-32 rounded-lg bg-slate-100 dark:bg-slate-800 bg-cover bg-center",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCIZmeQp51n44ag26kn_j3Wxmg9Xby9wnQt2DeijnjaiVHWrO9u__kplt6ihLmwyYLdILX77r_sDZn0AcYdpAhzrILrPSl4X_FVKCicB27DwY8sewtwXSYebz096oEQl2K9P28rnIebKzitiDiExWiFJ20iLrn1s4WRlKZ8vmGaUMoPwpZ-jshoBWQwnYlCEQc2daYVC1fJQOBqXM-dTO4BVYG9VyvtFK9HGE5GRYEIdaDUEHTFdwEKW1xQc6UWqeLP6zXZV9dWcSEG")'}}),m.jsxs("div",{className:"flex flex-col flex-1",children:[m.jsx("div",{className:"flex items-center gap-2 mb-2",children:m.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wide",children:"Jokoa"})}),m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold group-hover:text-purple-600 transition-colors",children:"Konbinatuak"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 line-clamp-2",children:"PEMDAS hierarkia eta parentesiak."})]})]}):m.jsxs("div",{className:"group relative flex flex-col gap-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-surface-light dark:bg-surface-dark p-5 opacity-60 grayscale cursor-not-allowed",children:[m.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:m.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-500",children:"lock"})}),m.jsx("div",{className:"w-full h-32 rounded-lg bg-slate-100 dark:bg-slate-800 bg-cover bg-center",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCIZmeQp51n44ag26kn_j3Wxmg9Xby9wnQt2DeijnjaiVHWrO9u__kplt6ihLmwyYLdILX77r_sDZn0AcYdpAhzrILrPSl4X_FVKCicB27DwY8sewtwXSYebz096oEQl2K9P28rnIebKzitiDiExWiFJ20iLrn1s4WRlKZ8vmGaUMoPwpZ-jshoBWQwnYlCEQc2daYVC1fJQOBqXM-dTO4BVYG9VyvtFK9HGE5GRYEIdaDUEHTFdwEKW1xQc6UWqeLP6zXZV9dWcSEG")'}}),m.jsxs("div",{className:"flex flex-col flex-1",children:[m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold",children:"Konbinatuak"}),m.jsx("p",{className:"text-xs font-bold text-red-500",children:"Osatu 5. Test-a"})]})]}),m.jsxs("div",{className:`group relative flex flex-col gap-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-surface-light dark:bg-surface-dark p-5 transition-all ${l?"hover:-translate-y-1 hover:border-red-500/50 hover:shadow-lg":"opacity-75 grayscale hover:grayscale-0 hover:opacity-100 cursor-pointer"}`,children:[!l&&m.jsx("div",{className:"absolute inset-0 bg-slate-900/5 z-10 flex items-center justify-center rounded-xl group-hover:opacity-0 transition-opacity",children:m.jsx("span",{className:"material-symbols-outlined text-4xl text-slate-600 dark:text-slate-400",children:"lock"})}),m.jsx("div",{className:"w-full h-32 rounded-lg bg-slate-100 dark:bg-slate-800 bg-cover bg-center",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCWrhtwa-o7p-baLbvePVX6xikASyU7RfyKlP5fGYWxrQCSbu4DKl5uIqOxm47P3glz9vfsCXoV3cBXqLBN22Vne4fHNUFL-CJ1t-4uP5ZGJEzgiF487zXaeI6yLeJwUcFCIO1xOCCBtKrOku7p7I1tF6k_uwVD63ZCiIGkNZP7Ho7-W4Anc65VmyKjkUlu8WChMZ7Q89vfGRyHFOPvgGK8hyykZWEjnAKhx9OAug6XuK5vEiDmFqanU3ao24NM7SJXNbmZDr13lGom")'}}),m.jsxs("div",{className:"flex flex-col flex-1",children:[m.jsx("div",{className:"flex items-center gap-2 mb-2",children:m.jsx("span",{className:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-wide",children:"Azterketa"})}),m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold group-hover:text-red-600 transition-colors",children:"Azken Erronka"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 line-clamp-2",children:"Erakutsi dakizun guztia maila hau gainditzeko."})]}),m.jsxs("div",{className:"mt-2 pt-3 border-t border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[m.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:"Desblokeatu Lvl 5ean"}),l?m.jsx(Ye,{to:"/games?mode=mixed&difficulty=hard",className:"text-primary font-bold text-xs",children:"JOLASTU"}):m.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"lock"})]})]})]})]})]})})},a4=()=>{const{user:a}=aa();if(!a)return null;const e=te=>a.completedLessons.includes(te),n=te=>a.gameXp[te]||0,i=e("theory_intro"),l=n("ordering_hard")>=rt.ordering_hard,u=Math.min(100,n("ordering_hard")/rt.ordering_hard*100),d=e("theory_operations"),y=n("addition_hard")>=rt.addition_hard||n("subtraction_hard")>=rt.subtraction_hard,g=Math.min(100,n("addition_hard")/rt.addition_hard*100),x=e("theory_multiplication"),A=n("multiplication_hard")>=rt.multiplication_hard||n("division_hard")>=rt.division_hard,D=Math.min(100,n("multiplication_hard")/rt.multiplication_hard*100),F=e("theory_powers"),U=n("powers_hard")>=rt.powers_hard||n("roots_hard")>=rt.roots_hard,ne=Math.min(100,n("powers_hard")/rt.powers_hard*100),ae=e("theory_advanced");return m.jsx("main",{className:"flex flex-1 flex-col items-center py-8",children:m.jsxs("div",{className:"layout-content-container flex flex-col w-full max-w-[1200px] px-4 lg:px-8 gap-8",children:[m.jsx("div",{className:"@container",children:m.jsxs("div",{className:"flex flex-col gap-6 p-6 rounded-2xl bg-white dark:bg-slate-800 shadow-sm border border-slate-200 dark:border-slate-700 @[480px]:gap-8 @[864px]:flex-row transition-all hover:shadow-md",children:[m.jsx("div",{className:"w-full bg-center bg-no-repeat aspect-video bg-cover rounded-xl @[480px]:h-auto @[480px]:min-w-[300px] @[864px]:w-1/2 max-w-[500px]",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuBRmPvc3EOaJSextMYOxzWlMwMqOi_BzRFGtqC16zLLEQ2RKVskHP3h1Gir_tImbrR38L3G0ZbvwuWjG3r0qPFbGZTfYIJ63BkuopqMsdkYhWKRzUNuSILppKpKIz0ZpbSMgRFxv2N8WXIZMf1YTdA81EZFwKhonr7FTy65o7V3UK_QoowEKdi-Xz_NCKty3f47bOK6XDHrlmtWDlLJmWx_FSyufhUQ9Fixq7p9Akh3NkvFg7UngPQ6MAGfkujoka1gEgtOunw-tQpb")'}}),m.jsxs("div",{className:"flex flex-col justify-center gap-6 flex-1",children:[m.jsxs("div",{className:"flex flex-col gap-3 text-left",children:[m.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900/30 w-fit",children:[m.jsx("span",{className:"material-symbols-outlined text-primary text-sm",children:"school"}),m.jsx("span",{className:"text-primary text-xs font-bold uppercase tracking-wide",children:"2. DBH - Matematika"})]}),m.jsx("h1",{className:"text-slate-900 dark:text-white text-3xl font-black leading-tight tracking-[-0.033em] @[480px]:text-4xl",children:"Zenbaki Osoak"}),m.jsx("h2",{className:"text-slate-500 dark:text-slate-300 text-base font-normal leading-relaxed",children:"Osatu unitate bakoitzeko teoria eta jokoak hurrengo maila desblokeatzeko."})]}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsxs("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:["Maila Orokorra: ",(a==null?void 0:a.level)||1]}),m.jsxs("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:[(a==null?void 0:a.xp)||0," XP"]})]}),m.jsx("div",{className:"rounded-full h-3 bg-slate-100 dark:bg-slate-700 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-500",style:{width:`${((a==null?void 0:a.xp)||0)%500/5}%`}})})]})]})]})}),m.jsxs("div",{className:"flex flex-col gap-1 pt-4",children:[m.jsx("h2",{className:"text-slate-900 dark:text-white text-2xl font-bold leading-tight",children:"Ikasketa Bidea"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Jarraibideak bete hurrengo mailak irekitzeko."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-12",children:[m.jsxs("div",{className:"group relative flex flex-col sm:flex-row items-stretch rounded-xl bg-white dark:bg-slate-800 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 border border-slate-200 dark:border-slate-700 overflow-hidden",children:[e("theory_intro")&&m.jsx("div",{className:"absolute top-3 right-3 z-10 bg-green-500 text-white rounded-full p-1 shadow-md",children:m.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"check"})}),m.jsx("div",{className:"w-full sm:w-1/3 min-h-[160px] sm:min-h-full bg-center bg-no-repeat bg-cover",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuANpFJXXpVuGa0bSpEboWaKePkikvFHog0REbJAGDWWLhjrWoLl2tuIq8odigSNYX6gcjAB842Jen-3jtrXELjGUpzk3hO2gLKN4MRMwgmQVw9m3SI84TkaCR5VVXWe1nxR-ZpmZkK3POp95Jf-FyqwWOAIcMFjq9ragGXO5XMGRAZ7H-fnTYOOMB0hRfVUstzXBU0a8V6XnZY5EYrq1NU56aS_zBAoBb85v-qODAiTlblca3GAi4fPwoJ4S7DYH4Cv-0RU0_tgk2YB")'}}),m.jsxs("div",{className:"flex flex-1 flex-col justify-center gap-3 p-5",children:[m.jsx("div",{className:"flex justify-between items-start",children:m.jsx("span",{className:"px-2 py-1 rounded bg-blue-50 dark:bg-blue-900/10 text-xs font-bold text-blue-700 dark:text-blue-300 border border-blue-200 dark:border-blue-800",children:"1. Unitatea"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight mb-1",children:"Oinarriak"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Balio absolutua, aurkakoa eta ordenatzea."})]}),m.jsxs("div",{className:"flex items-center gap-3 mt-2 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[m.jsx(Ye,{to:"/theory/intro",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 text-sm font-bold transition-colors",children:"Teoria"}),i?m.jsx(Ye,{to:"/games?mode=ordering&difficulty=easy",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-primary hover:bg-blue-700 text-white text-sm font-bold transition-colors",children:"Jolastu"}):m.jsxs("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"})," Jokoa"]})]})]})]}),m.jsxs("div",{className:`group relative flex flex-col sm:flex-row items-stretch rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden ${l?"hover:shadow-xl hover:-translate-y-1 transition-all":"opacity-70 grayscale"}`,children:[e("theory_operations")&&m.jsx("div",{className:"absolute top-3 right-3 z-10 bg-green-500 text-white rounded-full p-1 shadow-md",children:m.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"check"})}),!l&&m.jsx("div",{className:"absolute inset-0 bg-slate-100/10 z-20 flex items-center justify-center backdrop-blur-[1px]",children:m.jsxs("div",{className:"bg-slate-900/80 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-xl",children:[m.jsx("span",{className:"material-symbols-outlined",children:"lock"}),m.jsx("span",{className:"text-sm font-bold",children:"Osatu 1. Unitatea (Zaila)"})]})}),m.jsx("div",{className:"w-full sm:w-1/3 min-h-[160px] sm:min-h-full bg-center bg-no-repeat bg-cover",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuC62k7gl3J7HZSIfnl6y1kMaKGOJ4nTP40gXUjGxscgY28PX5FH6v6lDKFbzmsFufrUrjv__fohbhSDGIuZinVtKkMqFeGJ-eplqrDryMnifQ-0gK0D7I_Ik44zXDr7EpqEwCGNmIOd2IHsXHUqR8Vu7omJKtUnl2jibF4Np8Cf2JN8MUy2cvfM0Aiws6wFlHeKVes9Pdj7fvWbwlTTeOZJ0r3Wbvev1C_cBVn10wXH39BFFY5uGK_SCF3b5yvCLc6PQyE7Np81Lvnl")'}}),m.jsxs("div",{className:"flex flex-1 flex-col justify-center gap-3 p-5",children:[m.jsx("div",{className:"flex justify-between items-start",children:m.jsx("span",{className:"px-2 py-1 rounded bg-orange-50 dark:bg-orange-900/10 text-xs font-bold text-orange-700 dark:text-orange-300 border border-orange-200 dark:border-orange-800",children:"2. Unitatea"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight mb-1",children:"Batuketa eta Kenketa"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Parentesiak kendu, zeinu berdinak eta ezberdinak."}),!l&&m.jsx("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full mt-2",children:m.jsx("div",{className:"h-full bg-orange-400 rounded-full",style:{width:`${u}%`}})})]}),m.jsxs("div",{className:"flex items-center gap-3 mt-2 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[l?m.jsx(Ye,{to:"/theory/operations",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 text-sm font-bold transition-colors",children:"Teoria"}):m.jsx("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:"Teoria"}),d?m.jsx(Ye,{to:"/games?mode=addition&difficulty=easy",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-primary hover:bg-blue-700 text-white text-sm font-bold transition-colors",children:"Jolastu"}):m.jsxs("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"})," Jokoa"]})]})]})]}),m.jsxs("div",{className:`group relative flex flex-col sm:flex-row items-stretch rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden ${y?"hover:shadow-xl hover:-translate-y-1 transition-all":"opacity-70 grayscale"}`,children:[e("theory_multiplication")&&m.jsx("div",{className:"absolute top-3 right-3 z-10 bg-green-500 text-white rounded-full p-1 shadow-md",children:m.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"check"})}),!y&&m.jsx("div",{className:"absolute inset-0 bg-slate-100/10 z-20 flex items-center justify-center backdrop-blur-[1px]",children:m.jsxs("div",{className:"bg-slate-900/80 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-xl",children:[m.jsx("span",{className:"material-symbols-outlined",children:"lock"}),m.jsx("span",{className:"text-sm font-bold",children:"Osatu 2. Unitatea (Zaila)"})]})}),m.jsx("div",{className:"w-full sm:w-1/3 min-h-[160px] sm:min-h-full bg-center bg-no-repeat bg-cover",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAP0VeZTXTkvkfWI-nBluHmRyLy8pWM1OB6hCuXMSuTwoJ1V8BxY4Xs22kgalUbtYG7YoyFSvNpHRt93p0PUGBgp89R0zHXgQ0094c7_NfkJ3MMu8A3QiGkyMl0xHdMPPDIIdfzHx0wpXdmxxoYp5LnZmUeI0Vry1gKa7QRShJKhGzh6zWfyXtuALBaw7yw9Qm9YRnKPbnVBdf1Hq1BZN_DxPDVGEDCrikCrozUEu88VIOD9aDBliLeppf-wGv3DmuMCbB_BX5nsL54")'}}),m.jsxs("div",{className:"flex flex-1 flex-col justify-center gap-3 p-5",children:[m.jsx("div",{className:"flex justify-between items-start",children:m.jsx("span",{className:"px-2 py-1 rounded bg-purple-50 dark:bg-purple-900/10 text-xs font-bold text-purple-700 dark:text-purple-300 border border-purple-200 dark:border-purple-800",children:"3. Unitatea"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight mb-1",children:"Biderketa eta Zatiketa"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Zeinuen Legea: +  + = + ..."}),!y&&m.jsx("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full mt-2",children:m.jsx("div",{className:"h-full bg-purple-400 rounded-full",style:{width:`${g}%`}})})]}),m.jsxs("div",{className:"flex items-center gap-3 mt-2 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[y?m.jsx(Ye,{to:"/theory/multiplication",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 text-sm font-bold transition-colors",children:"Teoria"}):m.jsx("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:"Teoria"}),x?m.jsx(Ye,{to:"/games?mode=multiplication&difficulty=easy",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-primary hover:bg-blue-700 text-white text-sm font-bold transition-colors",children:"Jolastu"}):m.jsxs("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"})," Jokoa"]})]})]})]}),m.jsxs("div",{className:`group relative flex flex-col sm:flex-row items-stretch rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden ${A?"hover:shadow-xl hover:-translate-y-1 transition-all":"opacity-70 grayscale"}`,children:[e("theory_powers")&&m.jsx("div",{className:"absolute top-3 right-3 z-10 bg-green-500 text-white rounded-full p-1 shadow-md",children:m.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"check"})}),!A&&m.jsx("div",{className:"absolute inset-0 bg-slate-100/10 z-20 flex items-center justify-center backdrop-blur-[1px]",children:m.jsxs("div",{className:"bg-slate-900/80 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-xl",children:[m.jsx("span",{className:"material-symbols-outlined",children:"lock"}),m.jsx("span",{className:"text-sm font-bold",children:"Osatu 3. Unitatea (Zaila)"})]})}),m.jsx("div",{className:"w-full sm:w-1/3 min-h-[160px] sm:min-h-full bg-center bg-no-repeat bg-cover",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAz6Y8-19_3-7y88X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888X35-8y57777y18888")'},children:m.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:m.jsx("span",{className:"material-symbols-outlined text-white text-6xl opacity-50",children:"electric_bolt"})})}),m.jsxs("div",{className:"flex flex-1 flex-col justify-center gap-3 p-5",children:[m.jsx("div",{className:"flex justify-between items-start",children:m.jsx("span",{className:"px-2 py-1 rounded bg-indigo-50 dark:bg-indigo-900/10 text-xs font-bold text-indigo-700 dark:text-indigo-300 border border-indigo-200 dark:border-indigo-800",children:"4. Unitatea"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight mb-1",children:"Berreketak"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Potentziak, erro karratuak eta ikurren arauak."}),!A&&m.jsx("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full mt-2",children:m.jsx("div",{className:"h-full bg-indigo-400 rounded-full",style:{width:`${D}%`}})})]}),m.jsxs("div",{className:"flex items-center gap-3 mt-2 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[A?m.jsx(Ye,{to:"/theory/powers",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 text-sm font-bold transition-colors",children:"Teoria"}):m.jsx("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:"Teoria"}),F?m.jsx(Ye,{to:"/games?mode=powers&difficulty=easy",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-primary hover:bg-blue-700 text-white text-sm font-bold transition-colors",children:"Jolastu"}):m.jsxs("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"})," Jokoa"]})]})]})]}),m.jsxs("div",{className:`group relative flex flex-col sm:flex-row items-stretch rounded-xl bg-white dark:bg-slate-800 shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden ${U?"hover:shadow-xl hover:-translate-y-1 transition-all":"opacity-70 grayscale"}`,children:[e("theory_advanced")&&m.jsx("div",{className:"absolute top-3 right-3 z-10 bg-green-500 text-white rounded-full p-1 shadow-md",children:m.jsx("span",{className:"material-symbols-outlined text-sm font-bold",children:"check"})}),!U&&m.jsx("div",{className:"absolute inset-0 bg-slate-100/10 z-20 flex items-center justify-center backdrop-blur-[1px]",children:m.jsxs("div",{className:"bg-slate-900/80 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-xl",children:[m.jsx("span",{className:"material-symbols-outlined",children:"lock"}),m.jsx("span",{className:"text-sm font-bold",children:"Osatu 4. Unitatea (Zaila)"})]})}),m.jsx("div",{className:"w-full sm:w-1/3 min-h-[160px] sm:min-h-full bg-center bg-no-repeat bg-cover",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuC1cgGZwA72EHOK1-O-BIlo3M3MkeaYS-J0OdZg29jMmVZb-y7I--J4ezmq12kiNHzi60eNCmuf1ANads-dS8fRqTZsTP9jDRiOBnght9FJZQz8ci0BN-8cvfioR3Ii04sTokdxopMBGM9cG0zMH0La_fLlU_-s-R6TlAtDhz3npfdMd8Uf3z0qGXO5MUzSXPdEjO2BxvcP4VQrf17fEx0LEK8qphbXKZ-FJAx_1MF5xrlDgu6LmGFWlLTNBgslTm2N3GNFwdloP8TB")'}}),m.jsxs("div",{className:"flex flex-1 flex-col justify-center gap-3 p-5",children:[m.jsx("div",{className:"flex justify-between items-start",children:m.jsx("span",{className:"px-2 py-1 rounded bg-teal-50 dark:bg-teal-900/10 text-xs font-bold text-teal-700 dark:text-teal-300 border border-teal-200 dark:border-teal-800",children:"5. Unitatea"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-slate-900 dark:text-white text-lg font-bold leading-tight mb-1",children:"Eragiketa Konbinatuak"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Hierarkia (PEMDAS) eta parentesi konplexuak."}),!U&&m.jsx("div",{className:"w-full h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full mt-2",children:m.jsx("div",{className:"h-full bg-teal-400 rounded-full",style:{width:`${ne}%`}})})]}),m.jsxs("div",{className:"flex items-center gap-3 mt-2 pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[U?m.jsx(Ye,{to:"/theory/advanced",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 text-sm font-bold transition-colors",children:"Teoria"}):m.jsx("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:"Teoria"}),ae?m.jsx(Ye,{to:"/games?mode=combined&difficulty=easy",className:"flex-1 flex items-center justify-center rounded-lg h-9 bg-teal-600 hover:bg-teal-700 text-white text-sm font-bold transition-colors shadow-teal-500/20 shadow-lg",children:"Erronka Hasi"}):m.jsxs("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-1 rounded-lg h-9 bg-slate-200 dark:bg-slate-700/50 text-slate-400 text-sm font-bold cursor-not-allowed",children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"})," Jokoa"]})]})]})]})]})]})})},Nv={intro:{title:"1. Unitatea: Oinarriak",nextLink:"/games?mode=ordering&difficulty=easy",nextLabel:"Praktikatu: Ordena",content:m.jsxs("div",{className:"flex flex-col gap-8 text-slate-700 dark:text-slate-300 leading-relaxed animate-in fade-in slide-in-from-bottom-4 duration-500",children:[m.jsx("section",{children:m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-6 rounded-2xl border-l-4 border-primary mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Zer dira Zenbaki Osoak (Z)?"}),m.jsx("p",{children:"Zenbaki osoen multzoa (Z) hiru motatako zenbakiek osatzen dute:"}),m.jsxs("ul",{className:"list-disc pl-6 mt-2 space-y-1",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Positiboak:"}),' (+1, +2...)  "Daukadana".']}),m.jsxs("li",{children:[m.jsx("strong",{children:"Zero:"})," (0)  Muga."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Negatiboak:"}),' (-1, -2...)  "Zor dudana" edo "Zero azpitik".']})]})]})}),m.jsxs("section",{className:"bg-surface-light dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-inner",children:[m.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-primary",children:"linear_scale"}),"Zuzen Erreala eta Ordena"]}),m.jsx("p",{className:"mb-6 text-sm",children:"Zenbakiak lerro batean ordenatzen dira. Eskuinerantz handitzen dira."}),m.jsxs("div",{className:"w-full h-24 relative flex items-center justify-center select-none overflow-hidden my-8",children:[m.jsx("div",{className:"absolute w-[95%] h-1 bg-slate-300 dark:bg-slate-600 rounded-full"}),m.jsx("div",{className:"flex justify-between w-[90%] relative z-10",children:[-3,-2,-1,0,1,2,3].map(a=>m.jsxs("div",{className:"flex flex-col items-center gap-2 group cursor-pointer hover:-translate-y-1 transition-transform",children:[m.jsx("div",{className:`w-0.5 h-4 ${a===0?"h-6 bg-slate-900 dark:bg-white":"bg-slate-400"}`}),m.jsx("span",{className:`text-sm md:text-base font-bold ${a===0?"text-slate-900 dark:text-white":a<0?"text-red-500":"text-blue-500"}`,children:a>0?`+${a}`:a})]},a))})]}),m.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-100 dark:border-red-900/30",children:[m.jsx("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-2",children:"Kontuz Negatiboekin!"}),m.jsxs("p",{className:"text-sm",children:['Negatiboetan, zenbakia zenbat eta "handiagoa" iruditu (0tik urrunago), orduan eta ',m.jsx("strong",{children:"txikiagoa"})," da balioa."]}),m.jsx("div",{className:"mt-2 font-mono bg-white dark:bg-slate-800 p-2 rounded text-center border border-red-200 dark:border-red-900",children:"-100 < -1"})]})]})]}),quiz:[{question:"Zer motatako zenbakiek osatzen dute Z multzoa?",options:["Bakarrik positiboek","Positiboek, negatiboek eta zeroak","Zatikiak eta hamartarrak"],correctIdx:1},{question:"Zuzen errealean, zenbaki bat zenbat eta eskuinerago egon...",options:["Orduan eta txikiagoa da","Orduan eta handiagoa da","Berdin dio"],correctIdx:1},{question:"Zein da handiagoa: -2 ala -10?",options:["-2 handiagoa da","-10 handiagoa da","Berdinak dira"],correctIdx:0}]},operations:{title:"2. Unitatea: Batuketa eta Kenketa",nextLink:"/games?mode=addition&difficulty=easy",nextLabel:"Praktikatu: Batuketak",content:m.jsxs("div",{className:"flex flex-col gap-8 text-slate-700 dark:text-slate-300 leading-relaxed animate-in fade-in slide-in-from-bottom-4 duration-500",children:[m.jsxs("section",{className:"bg-yellow-50 dark:bg-yellow-900/10 p-6 rounded-2xl border border-yellow-200 dark:border-yellow-800",children:[m.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-yellow-600",children:"layers_clear"}),"1. Pausoa: Parentesiak Kendu"]}),m.jsx("p",{className:"mb-4",children:"Zenbaki baten aurrean zeinu bat badago, nola geratzen da?"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center font-mono font-bold",children:[m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[m.jsx("span",{className:"text-slate-400",children:"+(+a) edo -(-a)"})," ",m.jsx("br",{})," ",m.jsx("span",{className:"text-green-600 text-xl",children:" +a (Berdinak)"})]}),m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[m.jsx("span",{className:"text-slate-400",children:"+(-a) edo -(+a)"})," ",m.jsx("br",{})," ",m.jsx("span",{className:"text-red-600 text-xl",children:" -a (Ezberdinak)"})]})]})]}),m.jsxs("section",{className:"bg-surface-light dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[m.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-primary",children:"calculate"}),"2. Pausoa: Eragiketa Egin"]}),m.jsx("p",{className:"mb-4",children:"Orain ez daukagu parentesirik. Nola operatu?"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 p-5 rounded-xl",children:[m.jsx("h4",{className:"font-bold text-green-800 dark:text-green-300 mb-2",children:"Zeinu Berdina"}),m.jsxs("p",{className:"text-sm mb-2",children:["Zenbakiak ",m.jsx("strong",{children:"BATU"})," egiten dira eta zeinua mantendu."]}),m.jsxs("ul",{className:"font-mono text-sm bg-white/50 dark:bg-black/20 p-2 rounded",children:[m.jsx("li",{children:"+5 +3 = +8"}),m.jsx("li",{children:"-5 -3 = -8"})]})]}),m.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 p-5 rounded-xl",children:[m.jsx("h4",{className:"font-bold text-red-800 dark:text-red-300 mb-2",children:"Zeinu Ezberdina"}),m.jsxs("p",{className:"text-sm mb-2",children:["Zenbakiak ",m.jsx("strong",{children:"KENDU"})," egiten dira eta balio absolutu handienaren zeinua jarri."]}),m.jsxs("ul",{className:"font-mono text-sm bg-white/50 dark:bg-black/20 p-2 rounded",children:[m.jsx("li",{children:"+5 -3 = +2 (5 handiago)"}),m.jsx("li",{children:"-5 +3 = -2 (5 handiago)"})]})]})]})]})]}),quiz:[{question:"Zer bihurtzen da '-(+5)' espresioa?",options:["+5","-5","5 (zeinu gabe)"],correctIdx:1},{question:"Zeinu berdineko bi zenbaki operatzeko...",options:["Batu eta zeinua mantendu","Kendu eta handienaren zeinua jarri","Biderkatu"],correctIdx:0},{question:"Zenbat da -5 + 2?",options:["-7","+3","-3"],correctIdx:2}]},multiplication:{title:"3. Unitatea: Biderketa eta Zatiketa",nextLink:"/games?mode=multiplication&difficulty=easy",nextLabel:"Praktikatu: Biderketak",content:m.jsx("div",{className:"flex flex-col gap-8 text-slate-700 dark:text-slate-300 leading-relaxed animate-in fade-in slide-in-from-bottom-4 duration-500",children:m.jsxs("section",{className:"bg-purple-50 dark:bg-purple-900/10 p-6 rounded-2xl border border-purple-200 dark:border-purple-800",children:[m.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-purple-600",children:"close"}),"Zeinuen Legea"]}),m.jsxs("p",{className:"mb-4",children:["Biderketetan eta zatiketetan arau hau betetzen da ",m.jsx("strong",{children:"BETI"}),":"]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-xl flex flex-col items-center justify-center text-center",children:[m.jsx("span",{className:"text-xl font-black text-green-600 mb-1",children:"+  +"}),m.jsx("span",{className:"text-2xl font-black text-green-700",children:"= +"})]}),m.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 p-4 rounded-xl flex flex-col items-center justify-center text-center",children:[m.jsx("span",{className:"text-xl font-black text-red-600 mb-1",children:"+  -"}),m.jsx("span",{className:"text-2xl font-black text-red-700",children:"= -"})]}),m.jsxs("div",{className:"bg-red-100 dark:bg-red-900/30 p-4 rounded-xl flex flex-col items-center justify-center text-center",children:[m.jsx("span",{className:"text-xl font-black text-red-600 mb-1",children:"-  +"}),m.jsx("span",{className:"text-2xl font-black text-red-700",children:"= -"})]}),m.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-xl flex flex-col items-center justify-center text-center",children:[m.jsx("span",{className:"text-xl font-black text-green-600 mb-1",children:"-  -"}),m.jsx("span",{className:"text-2xl font-black text-green-700",children:"= +"})]})]}),m.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[m.jsx("h4",{className:"font-bold mb-2",children:"Aholkua:"}),m.jsx("p",{className:"text-sm",children:"Lagunaren araua erabil dezakezu:"}),m.jsxs("ul",{className:"text-sm list-disc pl-5 mt-1 space-y-1",children:[m.jsx("li",{children:"Nire lagunaren (+) laguna (+) = Nire laguna (+)"}),m.jsx("li",{children:"Nire etsaien (-) etsaia (-) = Nire laguna (+)"})]})]})]})}),quiz:[{question:"Zer zeinu dauka 'minus bider minus' eragiketak?",options:["Positiboa (+)","Negatiboa (-)","Zero"],correctIdx:0},{question:"Zer zeinu dauka 'positibo zati negatibo' eragiketak?",options:["Positiboa (+)","Negatiboa (-)","Depende zenbakiaz"],correctIdx:1},{question:"Zenbat da (-2)  (-3)?",options:["-6","+5","+6"],correctIdx:2}]},powers:{title:"4. Unitatea: Berreketak eta Erroketak",nextLink:"/games?mode=powers&difficulty=easy",nextLabel:"Praktikatu: Berreketak",content:m.jsxs("div",{className:"flex flex-col gap-8 text-slate-700 dark:text-slate-300 leading-relaxed animate-in fade-in slide-in-from-bottom-4 duration-500",children:[m.jsxs("section",{className:"bg-indigo-50 dark:bg-indigo-900/10 p-6 rounded-2xl border border-indigo-200 dark:border-indigo-800",children:[m.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-indigo-600",children:"functions"}),"Berreketen Propietateak"]}),m.jsx("p",{className:"mb-6 text-sm",children:"Hiru arau nagusi hauek buruz jakin behar dituzu eragiketak egiteko:"}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 p-4 rounded-xl border-l-4 border-green-500 shadow-sm",children:[m.jsx("div",{className:"size-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 font-bold text-lg",children:""}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Biderketa (Oinarri berdina)"}),m.jsxs("p",{className:"text-xs text-slate-500 mb-1",children:["Berretzaileak ",m.jsx("strong",{children:"BATU"})," egiten dira."]}),m.jsxs("code",{className:"bg-slate-100 dark:bg-slate-900 px-2 py-1 rounded text-sm font-mono text-indigo-600",children:["a",m.jsx("sup",{children:"n"}),"  a",m.jsx("sup",{children:"m"})," = a",m.jsx("sup",{children:"n+m"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 p-4 rounded-xl border-l-4 border-red-500 shadow-sm",children:[m.jsx("div",{className:"size-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 font-bold text-lg",children:":"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Zatiketa (Oinarri berdina)"}),m.jsxs("p",{className:"text-xs text-slate-500 mb-1",children:["Berretzaileak ",m.jsx("strong",{children:"KENDU"})," egiten dira."]}),m.jsxs("code",{className:"bg-slate-100 dark:bg-slate-900 px-2 py-1 rounded text-sm font-mono text-indigo-600",children:["a",m.jsx("sup",{children:"n"})," : a",m.jsx("sup",{children:"m"})," = a",m.jsx("sup",{children:"n-m"})]})]})]}),m.jsxs("div",{className:"flex items-center gap-4 bg-white dark:bg-slate-800 p-4 rounded-xl border-l-4 border-blue-500 shadow-sm",children:[m.jsx("div",{className:"size-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 font-bold text-lg",children:"()"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"Berreketaren Berreketa"}),m.jsxs("p",{className:"text-xs text-slate-500 mb-1",children:["Berretzaileak ",m.jsx("strong",{children:"BIDERKATU"})," egiten dira."]}),m.jsxs("code",{className:"bg-slate-100 dark:bg-slate-900 px-2 py-1 rounded text-sm font-mono text-indigo-600",children:["(a",m.jsx("sup",{children:"n"}),")",m.jsx("sup",{children:"m"})," = a",m.jsx("sup",{children:"nm"})]})]})]})]})]}),m.jsxs("section",{className:"bg-surface-light dark:bg-slate-900 p-6 rounded-2xl border border-slate-200 dark:border-slate-700",children:[m.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"exposure"}),"Zeinuen Araua (Oinarri Negatiboa)"]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white/50 dark:bg-black/20",children:[m.jsx("p",{className:"font-bold text-sm mb-1",children:"Berretzaile BIKOITIA (2, 4...)"}),m.jsxs("p",{className:"text-sm",children:["Emaitza ",m.jsx("span",{className:"text-green-600 font-bold",children:"POSITIBOA (+)"}),"."]}),m.jsxs("p",{className:"font-mono text-xs mt-1 text-slate-500",children:["(-3)",m.jsx("sup",{children:"2"})," = +9"]})]}),m.jsxs("div",{className:"p-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white/50 dark:bg-black/20",children:[m.jsx("p",{className:"font-bold text-sm mb-1",children:"Berretzaile BAKOITIA (3, 5...)"}),m.jsx("p",{className:"text-sm",children:"Oinarriaren zeinua mantendu."}),m.jsxs("p",{className:"font-mono text-xs mt-1 text-slate-500",children:["(-2)",m.jsx("sup",{children:"3"})," = -8"]})]})]})]})]}),quiz:[{question:"Zer egiten da berretzaileekin oinarri berdineko biderketan?",options:["Batu","Biderkatu","Kendu"],correctIdx:0},{question:"Zein da (-2) ber 2 eragiketaren zeinua?",options:["Negatiboa (bakoitia delako)","Positiboa (bikoitia delako)","Zero"],correctIdx:1},{question:"Nola sinplifikatzen da (a^2)^3?",options:["a^5","a^6","a^8"],correctIdx:1}]},advanced:{title:"5. Unitatea: Konbinatuak (PEMDAS)",nextLink:"/games?mode=combined&difficulty=easy",nextLabel:"Praktikatu: Konbinatuak",content:m.jsxs("div",{className:"flex flex-col gap-8 text-slate-700 dark:text-slate-300 leading-relaxed animate-in fade-in slide-in-from-bottom-4 duration-500",children:[m.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-2xl border border-orange-200 dark:border-orange-800",children:[m.jsx("h3",{className:"text-xl font-black text-orange-700 dark:text-orange-300 mb-2",children:"Eragiketen Hierarkia"}),m.jsx("p",{children:"Dena nahastuta dagoenean, ordena hau jarraitu behar da derrigorrez:"})]}),m.jsxs("section",{className:"flex flex-col items-center w-full max-w-lg mx-auto relative",children:[m.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 h-full w-1 bg-slate-200 dark:bg-slate-700 -z-10"}),m.jsxs("div",{className:"w-full bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md border-l-8 border-purple-500 mb-4 transform hover:scale-105 transition-transform z-10 relative",children:[m.jsx("div",{className:"absolute -left-12 top-1/2 -translate-y-1/2 bg-purple-500 text-white size-8 rounded-full flex items-center justify-center font-bold shadow-lg",children:"1"}),m.jsx("div",{className:"flex justify-between items-center",children:m.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Parentesiak ( ) [ ]"})})]}),m.jsxs("div",{className:"w-[95%] bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md border-l-8 border-indigo-500 mb-4 transform hover:scale-105 transition-transform z-10 relative",children:[m.jsx("div",{className:"absolute -left-12 top-1/2 -translate-y-1/2 bg-indigo-500 text-white size-8 rounded-full flex items-center justify-center font-bold shadow-lg",children:"2"}),m.jsx("div",{className:"flex justify-between items-center",children:m.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Berreketak eta Erroak"})})]}),m.jsxs("div",{className:"w-[90%] bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md border-l-8 border-blue-500 mb-4 transform hover:scale-105 transition-transform z-10 relative",children:[m.jsx("div",{className:"absolute -left-12 top-1/2 -translate-y-1/2 bg-blue-500 text-white size-8 rounded-full flex items-center justify-center font-bold shadow-lg",children:"3"}),m.jsx("div",{className:"flex justify-between items-center",children:m.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Biderketa eta Zatiketa"})})]}),m.jsxs("div",{className:"w-[80%] bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md border-l-8 border-green-500 mb-4 transform hover:scale-105 transition-transform z-10 relative",children:[m.jsx("div",{className:"absolute -left-12 top-1/2 -translate-y-1/2 bg-green-500 text-white size-8 rounded-full flex items-center justify-center font-bold shadow-lg",children:"4"}),m.jsx("div",{className:"flex justify-between items-center",children:m.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:"Batuketa eta Kenketa"})})]})]})]}),quiz:[{question:"Zer ebatzi behar da lehenengo?",options:["Biderketak","Parentesiak","Berreketak"],correctIdx:1},{question:"Parentesien ondoren, zer dator?",options:["Batuketak","Biderketak","Berreketak eta Erroak"],correctIdx:2},{question:"Zenbat da 2 + 3  4?",options:["20","14","10"],correctIdx:1}]}},i4=()=>{const{topicId:a}=LT(),{user:e,addXp:n}=aa(),{addToast:i}=ju(),l=a||"intro",u=`theory_${l}`,d=Nv[l]||Nv.intro,[p,y]=L.useState(new Array(3).fill(-1)),[g,x]=L.useState(!1),[E,A]=L.useState(!1),D=k=>e&&e.gameXp[k]||0,F=D("ordering_hard")<rt.ordering_hard,U=!(D("addition_hard")>=rt.addition_hard||D("subtraction_hard")>=rt.subtraction_hard),ae=!(D("multiplication_hard")>=rt.multiplication_hard||D("division_hard")>=rt.division_hard),me=!(D("powers_hard")>=rt.powers_hard||D("roots_hard")>=rt.roots_hard);if(a==="operations"&&F)return m.jsx(bl,{to:"/topics",replace:!0});if(a==="multiplication"&&U)return m.jsx(bl,{to:"/topics",replace:!0});if(a==="powers"&&ae)return m.jsx(bl,{to:"/topics",replace:!0});if(a==="advanced"&&me)return m.jsx(bl,{to:"/topics",replace:!0});L.useEffect(()=>{e&&e.completedLessons.includes(u)?(A(!0),y(d.quiz.map(k=>k.correctIdx)),x(!0)):(y(new Array(3).fill(-1)),x(!1),A(!1))},[u,e,d.quiz]);const Ne=(k,S)=>{if(E)return;const N=[...p];N[k]=S,y(N),x(!1)},Se=async()=>{if(p.some(S=>S===-1)){i("info","Erantzun galdera guztiak mesedez.");return}x(!0),p.every((S,N)=>S===d.quiz[N].correctIdx)?(Tt.win(),A(!0),e&&!e.completedLessons.includes(u)&&(await n(50,u)>0?i("xp","+50 XP Teoria ikasteagatik!"):i("success","Teoria osatuta! Orain jolastu dezakezu."))):(Tt.wrong(),i("error","Erantzun okerrak daude. Berrikusi teoria eta saiatu berriro."))};return m.jsx("main",{className:"flex-1 px-4 md:px-10 lg:px-40 py-10 flex justify-center",children:m.jsxs("div",{className:"max-w-[900px] w-full flex flex-col gap-8",children:[m.jsxs(Ye,{to:"/topics",className:"flex items-center gap-2 text-slate-500 hover:text-primary transition-colors font-bold text-sm",children:[m.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_back"}),"Atzera"]}),m.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 md:p-12 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8 border-b border-slate-100 dark:border-slate-700 pb-6",children:[m.jsx("div",{className:"size-14 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center shadow-lg shadow-blue-500/30",children:m.jsx("span",{className:"material-symbols-outlined text-3xl",children:"menu_book"})}),m.jsxs("div",{children:[m.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:a==="intro"?"1. Unitatea":a==="operations"?"2. Unitatea":a==="multiplication"?"3. Unitatea":a==="powers"?"4. Unitatea":"5. Unitatea"}),m.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 dark:text-white leading-tight",children:d.title})]})]}),d.content,m.jsxs("div",{className:"mt-12 pt-8 border-t-2 border-slate-100 dark:border-slate-700",children:[m.jsxs("div",{className:"mb-6",children:[m.jsxs("h3",{className:"text-xl font-black text-slate-900 dark:text-white flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-primary",children:"quiz"}),"Egiaztatu zure ezagutza"]}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Erantzun galdera hauek zuzen jokoa eta XP puntuak desblokeatzeko."})]}),m.jsx("div",{className:"flex flex-col gap-6",children:d.quiz.map((k,S)=>{const N=g&&p[S]===k.correctIdx,j=g&&p[S]!==k.correctIdx;return m.jsxs("div",{className:`p-5 rounded-xl border-2 transition-colors ${N?"border-green-500 bg-green-50 dark:bg-green-900/10":j?"border-red-500 bg-red-50 dark:bg-red-900/10":"border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50"}`,children:[m.jsxs("p",{className:"font-bold text-slate-900 dark:text-white mb-3",children:[S+1,". ",k.question]}),m.jsx("div",{className:"flex flex-col gap-2",children:k.options.map((I,V)=>m.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors hover:bg-white dark:hover:bg-slate-800 ${p[S]===V?"bg-white dark:bg-slate-800 shadow-sm ring-2 ring-primary":""}`,children:[m.jsx("input",{type:"radio",name:`q-${S}`,className:"size-4 text-primary focus:ring-primary",checked:p[S]===V,onChange:()=>Ne(S,V),disabled:E}),m.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:I})]},V))}),j&&m.jsx("p",{className:"text-xs font-bold text-red-500 mt-2",children:"Erantzun okerra. Saiatu berriro."})]},S)})}),m.jsxs("div",{className:"mt-8 flex flex-col md:flex-row gap-4 items-center justify-between",children:[E?m.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 font-bold bg-green-100 dark:bg-green-900/30 px-4 py-2 rounded-lg",children:[m.jsx("span",{className:"material-symbols-outlined",children:"check_circle"}),"Teoria menperatuta!"]}):m.jsx("button",{onClick:Se,className:"w-full md:w-auto px-8 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold rounded-xl shadow-lg hover:scale-105 transition-transform",children:"Egiaztatu Erantzunak"}),m.jsxs(Ye,{to:d.nextLink,onClick:k=>!E&&k.preventDefault(),className:`w-full md:w-auto flex items-center justify-center gap-3 px-8 py-4 rounded-xl font-bold shadow-lg transition-all 
                        ${E?"bg-primary hover:bg-blue-600 text-white hover:-translate-y-1 cursor-pointer":"bg-slate-200 dark:bg-slate-700 text-slate-400 cursor-not-allowed opacity-70"}`,children:[m.jsx("span",{children:d.nextLabel}),m.jsx("span",{className:"material-symbols-outlined",children:E?"sports_esports":"lock"})]})]})]})]})]})})},s4=()=>{const a=L.useRef(null);return L.useEffect(()=>{const e=a.current;if(!e)return;const n=e.getContext("2d");if(!n)return;e.width=window.innerWidth,e.height=window.innerHeight;const i=[],l=["#136dec","#fbbf24","#10b981","#ef4444","#8b5cf6"];for(let d=0;d<150;d++)i.push({x:e.width/2,y:e.height/2,vx:(Math.random()-.5)*20,vy:(Math.random()-.5)*20-5,color:l[Math.floor(Math.random()*l.length)],size:Math.random()*8+4,life:100});const u=()=>{if(!n||!e)return;n.clearRect(0,0,e.width,e.height);let d=!1;i.forEach(p=>{p.life>0&&(d=!0,p.x+=p.vx,p.y+=p.vy,p.vy+=.5,p.life--,n.fillStyle=p.color,n.fillRect(p.x,p.y,p.size,p.size))}),d&&requestAnimationFrame(u)};u()},[]),m.jsx("canvas",{ref:a,className:"fixed inset-0 pointer-events-none z-50"})},l4=({text:a})=>{if(!a.includes("^")&&!a.includes(""))return m.jsx("div",{className:"flex items-center justify-center flex-wrap gap-1",children:a.split(" ").map((n,i)=>m.jsx("span",{className:n==="?"?"text-slate-400 animate-pulse":["+","-","","","(",")",":",""].includes(n)?"text-slate-400 mx-1":"text-primary",children:n},i))});const e=a.split(" ");return m.jsx("div",{className:"flex items-center justify-center flex-wrap gap-2 text-4xl md:text-5xl lg:text-6xl font-black text-slate-900 dark:text-white font-display tracking-tight",children:e.map((n,i)=>{if(n==="="||n==="?"||n===""||n===":")return m.jsx("span",{className:"text-slate-400 mx-1",children:n},i);const l=n.split(/(\^)/);return m.jsx("div",{className:"flex items-start text-primary",children:l.map((u,d)=>u==="^"?null:d>0&&l[d-1]==="^"?m.jsx("sup",{className:"text-2xl md:text-3xl text-primary/80 mt-[-0.5em]",children:u.replace(/[\(\)]/g,"")},d):m.jsx("span",{children:u},d))},i)})})},o4=({text:a,type:e})=>{if(a.startsWith(""))return m.jsxs("div",{className:"flex items-center gap-1 text-5xl md:text-6xl font-black text-primary",children:[m.jsx("span",{className:"text-slate-400",children:""}),m.jsx("span",{children:a.replace("","").replace("= ?","")}),m.jsx("span",{className:"text-slate-400 ml-4",children:"= ?"})]});if(a.includes("^")){const n=a.split(" = ?")[0],i=(u,d)=>{if(u.includes(")^")){const[p,y]=u.split(")^"),g=p.replace("(",""),[x,E]=g.split("^");return m.jsxs("div",{className:"flex items-start",children:[m.jsx("span",{className:"text-slate-400 text-4xl md:text-5xl self-center",children:"("}),m.jsx("span",{className:"text-primary",children:x}),m.jsx("sup",{className:"text-2xl md:text-3xl text-primary/80 mt-1",children:E}),m.jsx("span",{className:"text-slate-400 text-4xl md:text-5xl self-center",children:")"}),m.jsx("sup",{className:"text-2xl md:text-3xl text-primary/80 mt-1",children:y})]},d)}if(u.includes("^")){const[p,y]=u.split("^");return m.jsxs("div",{className:"flex items-start",children:[m.jsx("span",{className:"text-primary",children:p}),m.jsx("sup",{className:"text-2xl md:text-3xl text-primary/80 mt-1",children:y})]},d)}return m.jsx("span",{children:u},d)},l=n.split(" ");return m.jsxs("div",{className:"flex items-center justify-center flex-wrap gap-2 text-5xl md:text-6xl font-black",children:[l.map((u,d)=>["",":"].includes(u)?m.jsx("span",{className:"text-slate-400 mx-2",children:u},d):i(u,d)),m.jsx("span",{className:"text-slate-400 ml-2",children:"= ?"})]})}return m.jsx(l4,{text:a})},u4=()=>{const{user:a,addXp:e}=aa(),{addToast:n}=ju(),[i]=kA(),l=Es(),[u,d]=L.useState("ordering"),[p,y]=L.useState("easy"),[g,x]=L.useState(null),[E,A]=L.useState(null),[D,F]=L.useState(1),[$,U]=L.useState(0),[ne,ae]=L.useState(0),[te,me]=L.useState(""),[Ne,Se]=L.useState(!1),[k,S]=L.useState(null),N=L.useRef(null),j=L.useRef(null),[I,V]=L.useState(0),[R,it]=L.useState({sequence:[],currentStep:0,completedIds:[]}),ze=re=>a?a.completedLessons.includes(re):!1,X=re=>a&&a.gameXp[re]||0,ie=X("ordering_hard")>=rt.ordering_hard,pe=X("addition_hard")>=rt.addition_hard||X("subtraction_hard")>=rt.subtraction_hard,Pe=X("multiplication_hard")>=rt.multiplication_hard||X("division_hard")>=rt.division_hard,qe=X("powers_hard")>=rt.powers_hard||X("roots_hard")>=rt.roots_hard,O=a?a.level>=5:!1,J=re=>{switch(re){case"ordering":return"theory_intro";case"addition":case"subtraction":return"theory_operations";case"multiplication":case"division":return"theory_multiplication";case"powers":case"roots":return"theory_powers";case"combined":return"theory_advanced";default:return null}},le=(re,ue)=>{if(ue==="easy")return!1;const Te=rt[`${re}_easy`]||100;if(ue==="medium")return X(`${re}_easy`)<Te;const De=rt[`${re}_medium`]||150;return ue==="hard"?X(`${re}_medium`)<De:!0};L.useEffect(()=>{let re=i.get("mode");const ue=i.get("difficulty");re==="mixed"&&!O&&(re="ordering"),re==="combined"&&!qe&&(re="ordering"),(re==="powers"||re==="roots")&&!Pe&&(re="ordering"),(re==="multiplication"||re==="division")&&!pe&&(re="ordering"),(re==="addition"||re==="subtraction")&&!ie&&(re="ordering");const Te=J(re||"ordering");if(Te&&!ze(Te)){n("error","Joko hau desblokeatzeko Teoria irakurri eta testa gainditu behar duzu!"),l("/topics");return}re||(re="ordering"),d(re);let De=ue||"easy";return le(re,De)&&(De="easy"),y(De),lr(re,De),()=>{N.current&&clearInterval(N.current),j.current&&clearTimeout(j.current)}},[i,O,qe,ie,pe,Pe]),L.useEffect(()=>{if(p==="hard"&&!Ne&&(!E||(g==null?void 0:g.type)==="ordering")){N.current&&clearInterval(N.current);const ue=u==="combined"||u==="mixed"||(g==null?void 0:g.type)==="ordering"?45:30;((g==null?void 0:g.type)!=="ordering"||R.currentStep===0)&&S(ue),N.current=window.setInterval(()=>{S(Te=>Te!==null&&Te>0?Te-1:(de(),0))},1e3)}else(g==null?void 0:g.type)!=="ordering"&&(N.current&&clearInterval(N.current),S(null));return()=>{N.current&&clearInterval(N.current)}},[D,p,Ne,u,g]);const de=()=>{N.current&&clearInterval(N.current),Tt.wrong(),wn(),ae(0),(g==null?void 0:g.type)!=="ordering"?(A({val:"Denbora!",isCorrect:!1}),me("Denbora agortu da. Azkarrago hurrengoan!")):(me("Denbora agortu da! Saiatu azkarrago."),A({val:"Denbora!",isCorrect:!1})),j.current=window.setTimeout(()=>{sa()},2e3)},ce=(re,ue)=>{const Te=Math.floor(Math.random()*(ue-re+1))+re;return Te===0?0:Te},ke=()=>`${u}_${p}`,He=()=>rt[ke()]||100,Ot=()=>(a==null?void 0:a.gameXp[ke()])||0,ft=re=>{let ue=re==="easy"?4:5,Te=re==="easy"?10:re==="medium"?25:100;const De=new Set;for(;De.size<ue;){let nt=ce(-Te,Te);nt!==0&&De.add(nt)}const je=Array.from(De).sort((nt,vt)=>nt-vt),Ae=Array.from(De).sort(()=>Math.random()-.5).map(nt=>({val:nt.toString(),isCorrect:!0,id:nt}));it({sequence:je,currentStep:0,completedIds:[]}),x({text:"Ordenatu zenbakiak TXIKIENETIK HANDIERA",options:Ae,type:"ordering",orderingSequence:je}),me("Gogoratu: Zenbaki negatiboetan, zenbat eta urrunago zerotik, orduan eta txikiagoa.")},Ar=re=>{const ue=re==="hard"?ce(1,4):ce(1,2);let Te=re==="easy"?5:10,De=ce(-Te,Te),je=ce(-Te,Te),Ae=ce(-Te,Te);De===0&&(De=2),je===0&&(je=3),Ae===0&&(Ae=-2);let nt="",vt=0,an=0;ue===1?(nt=`${De} + ${je<0?`(${je})`:je}  ${Ae<0?`(${Ae})`:Ae}`,vt=De+je*Ae,an=(De+je)*Ae):ue===2?(nt=`(${De} ${je<0?"-":"+"} ${Math.abs(je)})  ${Ae<0?`(${Ae})`:Ae}`,vt=(De+je)*Ae,an=De+je*Ae):ue===3?(Ae=Ae===0?2:Ae,je=Ae*ce(1,5)*(Math.random()>.5?1:-1),nt=`${De} - ${je<0?`(${je})`:je} : ${Ae<0?`(${Ae})`:Ae}`,vt=De-je/Ae,an=(De-je)/Ae):(nt=`${De<0?`(${De})`:De}  ${je<0?`(${je})`:je} - ${Ae<0?`(${Ae})`:Ae}`,vt=De*je-Ae,an=De*(je-Ae));let xt=-vt,vn=vt+ce(1,5)*(Math.random()>.5?1:-1);const ve=new Set([vt,an,xt,vn]);for(;ve.size<4;)ve.add(ce(-50,50));const Oe=Array.from(ve).sort(()=>Math.random()-.5).map(ge=>({val:`${ge}`,isCorrect:ge===vt}));x({text:nt+" = ?",options:Oe,type:"quiz"}),me("Hierarkia (PEMDAS): Parentesiak lehenengo, gero Berreketak/Erroak, gero Biderketa/Zatiketa, azkenik Batuketa/Kenketa.")},lr=(re,ue)=>{if(j.current&&clearTimeout(j.current),A(null),me(""),it({sequence:[],currentStep:0,completedIds:[]}),re==="ordering"){ft(ue);return}if(re==="combined"){Ar(ue);return}let Te=re;if(re==="mixed"){const ve=Math.random();if(ve<.15){ft(ue);return}if(ve<.35){Ar(ue);return}Te=["addition","subtraction","multiplication","division","powers","roots"][ce(0,5)]}let De=ue==="easy"?9:ue==="medium"?20:50,je=ce(-De,De),Ae=ce(-De,De),nt="",vt="",an="";const xt=new Set;if(Te==="powers"){const ve=ce(1,3);let Oe=ue==="easy"?ce(2,9):ce(2,15),ge=ce(2,5),pt=ce(2,5),Nt=0,Yt=0,kt=0,sn=0;if(ve===1)nt="",an=`${Oe}^${ge}  ${Oe}^${pt} = ?`,Nt=ge+pt,Yt=ge*pt,kt=Math.abs(ge-pt),sn=Nt+1,me(`Oinarri berdineko biderketan, berretzaileak BATU egiten dira (${ge} + ${pt} = ${Nt}).`);else if(ve===2){if(pt>=ge){let It=ge;ge=pt+ce(1,3),pt=It}nt=":",an=`${Oe}^${ge} : ${Oe}^${pt} = ?`,Nt=ge-pt,Yt=ge+pt,kt=Math.floor(ge/pt),sn=Nt+2,me(`Oinarri berdineko zatiketan, berretzaileak KENDU egiten dira (${ge} - ${pt} = ${Nt}).`)}else nt="()",an=`(${Oe}^${ge})^${pt} = ?`,Nt=ge*pt,Yt=ge+pt,kt=Math.pow(ge,pt),sn=Nt-1,me(`Berreketaren berreketan, berretzaileak BIDERKATU egiten dira (${ge}  ${pt} = ${Nt}).`);for(vt=`${Oe}^${Nt}`,xt.add(vt),xt.add(`${Oe}^${Yt}`),kt!==Nt&&kt!==Yt&&xt.add(`${Oe}^${kt}`),xt.add(`${Oe}^${sn}`);xt.size<4;)xt.add(`${Oe}^${Nt+ce(1,5)*(Math.random()>.5?1:-1)}`)}else if(Te==="roots"){let ve=ue==="easy"?ce(1,10):ce(1,15);ve===0&&(ve=2),je=ve*ve;let Oe=ve;an=`${je} = ?`,vt=Oe.toString(),xt.add(vt),xt.add((ve+1).toString()),xt.add((ve-1).toString()),xt.add(Math.floor(je/2).toString()),me(`Erantzuna: ${ve}, zeren ${ve} = ${je}.`)}else{let ve=je,Oe=Ae;if(Te==="division"){Ae===0&&(Ae=2);const kt=ce(-10,10);Oe=Ae,ve=(kt===0?2:kt)*Oe}let ge=0;switch(Te){case"addition":nt="+",ge=ve+Oe;break;case"subtraction":nt="-",ge=ve-Oe;break;case"multiplication":nt="",ge=ve*Oe;break;case"division":nt=":",ge=ve/Oe;break}an=`${ve<0?`(${ve})`:ve} ${nt} ${Oe<0?`(${Oe})`:Oe} = ?`,vt=ge>0?`+${ge}`:`${ge}`,xt.add(vt);const pt=Math.random()>.5?1:2,Nt=ge+(Math.random()>.5?pt:-pt);xt.add(Nt>0?`+${Nt}`:`${Nt}`);let Yt=0;for(nt==="+"?Yt=ve-Oe:nt==="-"||nt===""?Yt=ve+Oe:nt===":"&&(Yt=ve-Oe),Yt!==ge&&xt.add(Yt>0?`+${Yt}`:`${Yt}`),Math.random()<.2&&ge!==0&&xt.add(ge>0?`${-ge}`:`+${-ge}`);xt.size<4;){const kt=Math.max(5,Math.abs(ge)*.4),sn=ce(ge-kt,ge+kt);sn!==ge&&xt.add(sn>0?`+${sn}`:`${sn}`)}me(`Erantzuna: ${vt}.`)}const vn=Array.from(xt).sort(()=>Math.random()-.5).map(ve=>({val:ve,isCorrect:ve===vt}));x({text:an,options:vn,type:"quiz"})},Sr=re=>{const ue=p==="hard"?25:p==="medium"?15:10,Te=re*(p==="hard"?3:2);return ue+Te},or=async re=>{const ue=await e(re,ke());ue>0?(n("xp",`+${ue} XP`),V(Te=>Te+ue)):re>0?n("info","Zailtasun honetako XP muga lortu duzu! Saiatu hurrengoa."):ue<0&&(n("error",`-${Math.abs(ue)} XP (Penalizazioa)`),V(Te=>Te+ue))},wn=async()=>{const ue=Sr(ne)*1.5;await or(-ue)},Pi=re=>{if(!g||!g.orderingSequence)return;const ue=g.orderingSequence[R.currentStep],Te=parseInt(re.val);if(Te===ue){Tt.click();const De=[...R.completedIds,Te];if(De.length===g.orderingSequence.length){Tt.correct(),it(Ae=>({...Ae,completedIds:De})),A({val:"Zuzena!",isCorrect:!0});const je=Sr(ne);U(Ae=>Ae+je),ae(Ae=>Ae+1),or(je),j.current=window.setTimeout(()=>{sa()},1500)}else it(je=>({...je,currentStep:je.currentStep+1,completedIds:De}))}else Tt.wrong(),wn(),ae(0),n("error","Ordena okerra! Saiatu berriro.")},ia=re=>{if(!E){if((g==null?void 0:g.type)==="ordering"){Pi(re);return}if(A(re),N.current&&clearInterval(N.current),re.isCorrect){Tt.correct();const ue=Sr(ne);U(Te=>Te+ue),ae(Te=>Te+1),or(ue)}else Tt.wrong(),wn(),ae(0);j.current=window.setTimeout(()=>{sa()},1500)}},sa=()=>{Tt.click(),D<5?(F(re=>re+1),lr(u,p)):Li()},Li=async()=>{if(Se(!0),Tt.win(),$>=(p==="hard"?50:30)){const re=p==="hard"?50:p==="medium"?30:10;await or(re),n("success",`Jokoa amaituta! Bonus: ${re} XP`)}else n("success","Jokoa amaituta!")},Ct=()=>{Tt.click(),Se(!1),F(1),U(0),ae(0),V(0),lr(u,p)};if(Ne){const re=$>(p==="hard"?100:50)?3:$>(p==="hard"?50:30)?2:1;return m.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[re===3&&m.jsx(s4,{}),m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-8 md:p-12 text-center max-w-md w-full border border-slate-200 dark:border-slate-700 animate-in zoom-in-95 duration-300 relative z-10",children:[m.jsx("div",{className:"mb-6 flex justify-center gap-2",children:[1,2,3].map(ue=>m.jsx("span",{className:`material-symbols-outlined text-6xl ${ue<=re?"text-yellow-400 fill-current animate-bounce":"text-slate-200 dark:text-slate-700"}`,style:{animationDelay:`${ue*100}ms`},children:"star"},ue))}),m.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-2",children:re===3?"Bikain!":re===2?"Oso Ondo!":"Ondo!"}),m.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:[$," puntu lortu dituzu.",I!==0&&m.jsxs("span",{className:`block mt-2 font-bold ${I>0?"text-yellow-500":"text-red-500"}`,children:[I>0?`+${I}`:I," XP saio honetan"]}),I===0&&m.jsx("span",{className:"block mt-2 text-xs text-slate-400 uppercase font-bold",children:"XP Muga Lortuta"})]}),m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("button",{onClick:Ct,className:"w-full py-3 rounded-xl bg-primary hover:bg-blue-600 text-white font-bold flex items-center justify-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined",children:"replay"}),"Jolastu Berriro"]}),m.jsx(Ye,{to:"/topics",className:"w-full py-3 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 font-bold",children:"Itzuli Gaietara"})]})]})]})}const St=He(),Gn=Ot(),Ss=Gn>=St;return m.jsx("main",{className:"layout-container flex h-full grow flex-col",children:m.jsx("div",{className:"w-full flex flex-1 justify-center py-5 px-4 md:px-8",children:m.jsxs("div",{className:"layout-content-container flex flex-col max-w-[1200px] flex-1 gap-8",children:[m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsxs("div",{className:"flex flex-col gap-1 rounded-xl p-4 bg-white dark:bg-[#1a2634] shadow-sm border border-slate-100 dark:border-slate-800 relative overflow-hidden",children:[Ss&&m.jsx("div",{className:"absolute inset-0 bg-yellow-500/10 flex items-center justify-center font-black text-yellow-600 dark:text-yellow-400 opacity-20 -rotate-12 text-3xl",children:"MAX"}),m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"material-symbols-outlined text-yellow-500",children:"stars"}),m.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-medium uppercase tracking-wider",children:["XP (",p,")"]})]}),m.jsxs("div",{className:"flex items-end gap-2",children:[m.jsx("p",{className:"text-slate-900 dark:text-white text-2xl font-bold",children:Gn}),m.jsxs("p",{className:"text-slate-400 text-sm font-medium mb-1",children:["/ ",St]})]}),m.jsx("div",{className:"w-full h-1 bg-slate-100 dark:bg-slate-700 rounded-full mt-1",children:m.jsx("div",{className:`h-full rounded-full transition-all ${Ss?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${Math.min(100,Gn/St*100)}%`}})})]}),m.jsxs("div",{className:"flex flex-col gap-1 rounded-xl p-4 bg-white dark:bg-[#1a2634] shadow-sm border border-slate-100 dark:border-slate-800",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"material-symbols-outlined text-primary",children:"school"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-medium uppercase tracking-wider",children:"Maila"})]}),m.jsx("p",{className:"text-slate-900 dark:text-white text-2xl font-bold",children:a?a.level:1})]}),m.jsxs("div",{className:"flex flex-col gap-1 rounded-xl p-4 bg-white dark:bg-[#1a2634] shadow-sm border border-slate-100 dark:border-slate-800",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"material-symbols-outlined text-orange-500",children:"local_fire_department"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-medium uppercase tracking-wider",children:"Bolada"})]}),m.jsx("p",{className:"text-slate-900 dark:text-white text-2xl font-bold",children:ne})]}),m.jsxs("div",{className:"flex flex-col gap-1 rounded-xl p-4 bg-white dark:bg-[#1a2634] shadow-sm border border-slate-100 dark:border-slate-800",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"material-symbols-outlined text-blue-400",children:"score"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-medium uppercase tracking-wider",children:"Puntuazioa"})]}),m.jsx("p",{className:"text-slate-900 dark:text-white text-2xl font-bold",children:$})]})]}),m.jsxs("div",{className:"grid lg:grid-cols-12 gap-8 items-start",children:[m.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6 order-2 lg:order-1",children:[m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"flex-1 bg-white dark:bg-[#1a2634] rounded-xl p-4 shadow-sm border border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"tune"}),m.jsx("p",{className:"text-slate-900 dark:text-white text-sm font-bold",children:"Zailtasuna"})]}),m.jsx("div",{className:"flex gap-1",children:["easy","medium","hard"].map(re=>{const ue=le(u,re);return m.jsxs("button",{disabled:ue,onClick:()=>{Tt.click(),y(re),lr(u,re),F(1),U(0),V(0)},className:`px-3 py-1 text-xs font-bold rounded-full capitalize border flex items-center gap-1 transition-all
                                ${p===re?"bg-primary text-white border-primary":ue?"bg-slate-100 dark:bg-slate-800 text-slate-400 border-transparent cursor-not-allowed opacity-70":"bg-transparent text-slate-500 border-slate-200 dark:border-slate-700 hover:border-primary/50"}`,children:[ue&&m.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"lock"}),re]},re)})})]}),k!==null&&m.jsxs("div",{className:`w-20 bg-white dark:bg-[#1a2634] rounded-xl p-2 shadow-sm border flex items-center justify-center font-mono text-xl font-bold ${k<10?"text-red-500 border-red-500 animate-pulse":"text-slate-900 dark:text-white border-slate-200 dark:border-slate-800"}`,children:[k,"s"]})]}),m.jsxs("div",{className:"flex flex-col bg-white dark:bg-[#1a2634] rounded-2xl shadow-md border border-slate-100 dark:border-slate-800 overflow-hidden relative",children:[m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/30",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-slate-400 text-sm",children:"quiz"}),m.jsxs("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Galdera ",D,"/5"]})]}),m.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((re,ue)=>m.jsx("div",{className:`h-1.5 w-6 rounded-full ${ue<D-1?"bg-green-500":ue===D-1?"bg-blue-500 animate-pulse":"bg-slate-200 dark:bg-slate-700"}`},ue))})]}),m.jsx("div",{className:"p-8 md:p-12 flex flex-col items-center justify-center gap-8 min-h-[400px]",children:g&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"text-center w-full",children:[m.jsx("p",{className:"text-slate-400 text-sm font-medium mb-4 uppercase tracking-wider",children:g.type==="ordering"?"Ordenatu Zenbakiak":u==="combined"?"Kalkulatu (Kontuz Hierarkiarekin!)":u==="powers"?"Sinplifikatu":"Kalkulatu emaitza"}),g.type!=="ordering"?m.jsx(o4,{text:g.text,type:g.type}):m.jsx("div",{className:"flex flex-col items-center gap-6 w-full",children:m.jsxs("div",{className:"flex gap-2 items-center justify-center flex-wrap min-h-[60px] p-4 bg-slate-100 dark:bg-slate-900 rounded-xl w-full",children:[R.completedIds.map(re=>m.jsx("div",{className:"size-12 rounded-lg bg-green-500 text-white flex items-center justify-center font-bold text-lg animate-in zoom-in",children:re},re)),R.completedIds.length===0&&m.jsx("span",{className:"text-slate-400 italic",children:"Hautatu zenbaki txikiena..."})]})})]}),m.jsx("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md mt-4",children:g.options.map((re,ue)=>g.type==="ordering"&&R.completedIds.includes(re.id)?m.jsx("div",{className:"h-[76px]"},ue):m.jsx("button",{onClick:()=>ia(re),disabled:!!E&&g.type!=="ordering",className:`group relative flex items-center justify-center py-6 px-4 rounded-xl border-2 transition-all 
                                    ${E===re&&g.type!=="ordering"?re.isCorrect?"border-green-500 bg-green-500/10":"border-red-500 bg-red-500/10":"border-slate-200 dark:border-slate-700 hover:border-primary hover:bg-primary/5 active:bg-primary/10"}`,children:m.jsx("div",{className:`text-2xl font-bold transition-colors ${E===re&&g.type!=="ordering"?re.isCorrect?"text-green-600":"text-red-600":"text-slate-700 dark:text-slate-200 group-hover:text-primary"}`,children:re.val.includes("^")?m.jsxs("div",{className:"flex items-start",children:[m.jsx("span",{children:re.val.split("^")[0]}),m.jsx("sup",{className:"text-sm mt-1",children:re.val.split("^")[1]})]}):re.val})},ue))})]})}),E&&m.jsxs("div",{className:`border-t p-4 md:px-8 md:py-6 flex flex-col md:flex-row items-center justify-between gap-4 animate-in slide-in-from-bottom-2 fade-in duration-300 ${E.isCorrect||(g==null?void 0:g.type)==="ordering"?"bg-green-50 dark:bg-green-900/20 border-green-100 dark:border-green-800/30":"bg-red-50 dark:bg-red-900/20 border-red-100 dark:border-red-800/30"}`,children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:`size-10 rounded-full flex items-center justify-center ${E.isCorrect||(g==null?void 0:g.type)==="ordering"?"bg-green-100 dark:bg-green-800 text-green-600 dark:text-green-300":"bg-red-100 dark:bg-red-800 text-red-600 dark:text-red-300"}`,children:m.jsx("span",{className:"material-symbols-outlined",children:E.isCorrect||(g==null?void 0:g.type)==="ordering"?"celebration":"help"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:`font-bold text-lg leading-tight ${E.isCorrect||(g==null?void 0:g.type)==="ordering"?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"}`,children:E.isCorrect||(g==null?void 0:g.type)==="ordering"?(g==null?void 0:g.type)==="ordering"?"Ondo ordenatuta!":"Primeran!":"Saiatu berriro!"}),(g==null?void 0:g.type)!=="ordering"&&m.jsx("p",{className:`${E.isCorrect?"text-green-600 dark:text-green-500":"text-red-600 dark:text-red-500"} text-sm`,children:E.isCorrect?"Erantzun zuzena.":te})]})]}),m.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold opacity-60 text-slate-600 dark:text-slate-300",children:["Hurrengoa kargatzen...",m.jsx("span",{className:"material-symbols-outlined animate-spin text-sm",children:"progress_activity"})]})]})]})]}),m.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6 order-1 lg:order-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h3",{className:"text-slate-900 dark:text-white font-bold text-lg",children:"Joko Moduak"}),m.jsx(Ye,{className:"text-primary text-sm font-medium hover:underline",to:"/topics",children:"Teoria"})]}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[m.jsxs("button",{disabled:!O,onClick:()=>{O&&(Tt.click(),d("mixed"),y("easy"),F(1),U(0),V(0))},className:`relative p-5 rounded-2xl border-2 shadow-sm flex flex-col items-center gap-3 transition-all text-center group ${O?u==="mixed"?"bg-primary border-primary text-white shadow-lg shadow-primary/20":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:border-primary/50":"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 opacity-60 cursor-not-allowed"}`,children:[!O&&m.jsx("div",{className:"absolute top-2 right-2 text-slate-400",children:m.jsx("span",{className:"material-symbols-outlined",children:"lock"})}),m.jsx("div",{className:`size-14 rounded-full flex items-center justify-center border-4 border-white/20 shrink-0 ${u==="mixed"?"bg-white/20 text-white":"bg-blue-100 dark:bg-blue-900/30 text-blue-600"}`,children:m.jsx("span",{className:"material-symbols-outlined text-3xl",children:"shuffle"})}),m.jsxs("div",{children:[m.jsx("h4",{className:`font-black text-xl leading-none ${u==="mixed"?"text-white":"text-slate-900 dark:text-white"}`,children:"Nahastuta"}),m.jsx("p",{className:`text-xs mt-1 font-bold uppercase tracking-wide opacity-80 ${u==="mixed"?"text-blue-100":"text-slate-500"}`,children:"Azterketa Orokorra"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("button",{disabled:!ze("theory_intro"),onClick:()=>{ze("theory_intro")&&(Tt.click(),d("ordering"),y("easy"),F(1),U(0),V(0))},className:`p-4 rounded-xl border shadow-sm flex flex-col items-center gap-2 transition-all ${ze("theory_intro")?u==="ordering"?"bg-amber-500 border-amber-500 text-white shadow-lg shadow-amber-500/20 ring-2 ring-amber-500 ring-offset-2 dark:ring-offset-[#101822]":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:bg-amber-50 dark:hover:bg-amber-900/10 hover:border-amber-500/50":"opacity-50 grayscale cursor-not-allowed"}`,children:[m.jsx("div",{className:`size-10 rounded-full flex items-center justify-center border-2 border-white/20 ${u==="ordering"?"bg-white/20 text-white":"bg-amber-100 dark:bg-amber-900/30 text-amber-600"}`,children:m.jsx("span",{className:"material-symbols-outlined",children:"sort"})}),m.jsx("span",{className:`text-sm font-bold ${u==="ordering"?"text-white":"text-slate-700 dark:text-slate-300"}`,children:"Ordena"})]}),m.jsxs("button",{disabled:!qe||!ze("theory_advanced"),onClick:()=>{qe&&ze("theory_advanced")&&(Tt.click(),d("combined"),y("easy"),F(1),U(0),V(0))},className:`p-4 rounded-xl border shadow-sm flex flex-col items-center gap-2 transition-all ${!qe||!ze("theory_advanced")?"bg-slate-50 dark:bg-slate-800 opacity-50 cursor-not-allowed border-slate-200":u==="combined"?"bg-purple-600 border-purple-600 text-white shadow-lg shadow-purple-600/20 ring-2 ring-purple-600 ring-offset-2 dark:ring-offset-[#101822]":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:bg-purple-50 dark:hover:bg-purple-900/10 hover:border-purple-600/50"}`,children:[m.jsx("div",{className:`size-10 rounded-full flex items-center justify-center border-2 border-white/20 ${u==="combined"?"bg-white/20 text-white":"bg-purple-100 dark:bg-purple-900/30 text-purple-600"}`,children:m.jsx("span",{className:"material-symbols-outlined",children:"function"})}),m.jsx("span",{className:`text-sm font-bold ${u==="combined"?"text-white":"text-slate-700 dark:text-slate-300"}`,children:"Konbinatuak"}),(!qe||!ze("theory_advanced"))&&m.jsx("span",{className:"material-symbols-outlined text-xs absolute top-2 right-2 text-slate-400",children:"lock"})]})]})]}),m.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-2"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 px-1",children:"2. Unitatea"}),m.jsxs("div",{className:`grid grid-cols-2 gap-3 mb-4 ${!ie||!ze("theory_operations")?"opacity-50 pointer-events-none":""}`,children:[m.jsxs("button",{disabled:!ie,onClick:()=>{d("addition"),y("easy"),F(1),U(0),V(0)},className:`p-3 rounded-xl border transition-all flex items-center gap-3 ${u==="addition"?"bg-green-600 border-green-600 text-white shadow-md":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:bg-green-50 dark:hover:bg-green-900/10"}`,children:[m.jsx("div",{className:"size-8 rounded bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 flex items-center justify-center font-black text-lg",children:"+"}),m.jsx("span",{className:`text-sm font-bold ${u==="addition"?"text-white":"text-slate-700 dark:text-slate-200"}`,children:"Batuketa"}),(!ie||!ze("theory_operations"))&&m.jsx("span",{className:"material-symbols-outlined text-xs ml-auto",children:"lock"})]}),m.jsxs("button",{disabled:!ie,onClick:()=>{d("subtraction"),y("easy"),F(1),U(0),V(0)},className:`p-3 rounded-xl border transition-all flex items-center gap-3 ${u==="subtraction"?"bg-red-500 border-red-500 text-white shadow-md":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:bg-red-50 dark:hover:bg-red-900/10"}`,children:[m.jsx("div",{className:"size-8 rounded bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 flex items-center justify-center font-black text-lg",children:"-"}),m.jsx("span",{className:`text-sm font-bold ${u==="subtraction"?"text-white":"text-slate-700 dark:text-slate-200"}`,children:"Kenketa"}),(!ie||!ze("theory_operations"))&&m.jsx("span",{className:"material-symbols-outlined text-xs ml-auto",children:"lock"})]})]}),m.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 px-1",children:"3. Unitatea"}),m.jsxs("div",{className:`grid grid-cols-2 gap-3 mb-4 ${!pe||!ze("theory_multiplication")?"opacity-50 pointer-events-none":""}`,children:[m.jsxs("button",{disabled:!pe,onClick:()=>{d("multiplication"),y("easy"),F(1),U(0),V(0)},className:`p-3 rounded-xl border transition-all flex items-center gap-3 ${u==="multiplication"?"bg-orange-500 border-orange-500 text-white shadow-md":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:bg-orange-50 dark:hover:bg-orange-900/10"}`,children:[m.jsx("div",{className:"size-8 rounded bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 flex items-center justify-center font-black text-lg",children:""}),m.jsx("span",{className:`text-sm font-bold ${u==="multiplication"?"text-white":"text-slate-700 dark:text-slate-200"}`,children:"Biderketa"}),(!pe||!ze("theory_multiplication"))&&m.jsx("span",{className:"material-symbols-outlined text-xs ml-auto",children:"lock"})]}),m.jsxs("button",{disabled:!pe,onClick:()=>{d("division"),y("easy"),F(1),U(0),V(0)},className:`p-3 rounded-xl border transition-all flex items-center gap-3 ${u==="division"?"bg-teal-500 border-teal-500 text-white shadow-md":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:bg-teal-50 dark:hover:bg-teal-900/10"}`,children:[m.jsx("div",{className:"size-8 rounded bg-teal-100 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 flex items-center justify-center font-black text-lg",children:":"}),m.jsx("span",{className:`text-sm font-bold ${u==="division"?"text-white":"text-slate-700 dark:text-slate-200"}`,children:"Zatiketa"}),(!pe||!ze("theory_multiplication"))&&m.jsx("span",{className:"material-symbols-outlined text-xs ml-auto",children:"lock"})]})]}),m.jsx("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 px-1",children:"4. Unitatea"}),m.jsxs("div",{className:`grid grid-cols-2 gap-3 ${!Pe||!ze("theory_powers")?"opacity-50 pointer-events-none":""}`,children:[m.jsxs("button",{disabled:!Pe,onClick:()=>{d("powers"),y("easy"),F(1),U(0),V(0)},className:`p-3 rounded-xl border transition-all flex items-center gap-3 ${u==="powers"?"bg-indigo-500 border-indigo-500 text-white shadow-md":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:bg-indigo-50 dark:hover:bg-indigo-900/10"}`,children:[m.jsx("div",{className:"size-8 rounded bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 flex items-center justify-center font-black text-xs",children:"x"}),m.jsx("span",{className:`text-sm font-bold ${u==="powers"?"text-white":"text-slate-700 dark:text-slate-200"}`,children:"Berreketak"}),(!Pe||!ze("theory_powers"))&&m.jsx("span",{className:"material-symbols-outlined text-xs ml-auto",children:"lock"})]}),m.jsxs("button",{disabled:!Pe,onClick:()=>{d("roots"),y("easy"),F(1),U(0),V(0)},className:`p-3 rounded-xl border transition-all flex items-center gap-3 ${u==="roots"?"bg-teal-600 border-teal-600 text-white shadow-md":"bg-white dark:bg-[#1a2634] border-slate-200 dark:border-slate-700 hover:bg-teal-50 dark:hover:bg-teal-900/10"}`,children:[m.jsx("div",{className:"size-8 rounded bg-teal-100 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 flex items-center justify-center font-black text-lg",children:""}),m.jsx("span",{className:`text-sm font-bold ${u==="roots"?"text-white":"text-slate-700 dark:text-slate-200"}`,children:"Erroketak"}),(!Pe||!ze("theory_powers"))&&m.jsx("span",{className:"material-symbols-outlined text-xs ml-auto",children:"lock"})]})]})]})]})]})]})]})})})},c4=()=>{var d;const{user:a}=aa(),[e,n]=L.useState([]);if(L.useEffect(()=>{(async()=>{const y=await bu.getLeaderboard();n(y)})()},[a==null?void 0:a.xp]),!a)return m.jsx(bl,{to:"/login",replace:!0});const i=Math.min(100,Math.floor(a.xp/9e3*100)),l=p=>p==="theory_intro"?"Teoria: Oinarriak":p==="theory_operations"?"Teoria: Batuketa/Kenketa":p==="theory_multiplication"?"Teoria: Biderketa/Zatiketa":p==="theory_powers"?"Teoria: Berreketak":p==="theory_advanced"?"Teoria: Konbinatuak":{ordering_easy:"Ordena (Erraza)",ordering_medium:"Ordena (Ertaina)",ordering_hard:"Ordena (Zaila)",combined_easy:"Konbinatuak (Erraza)",combined_medium:"Konbinatuak (Ertaina)",combined_hard:"Konbinatuak (Zaila)",mixed_easy:"Nahastuta (Erraza)",mixed_medium:"Nahastuta (Ertaina)",mixed_hard:"Nahastuta (Zaila)",addition_easy:"Batuketa (Erraza)",addition_medium:"Batuketa (Ertaina)",addition_hard:"Batuketa (Zaila)",subtraction_easy:"Kenketa (Erraza)",subtraction_medium:"Kenketa (Ertaina)",subtraction_hard:"Kenketa (Zaila)",multiplication_easy:"Biderketa (Erraza)",multiplication_medium:"Biderketa (Ertaina)",multiplication_hard:"Biderketa (Zaila)",division_easy:"Zatiketa (Erraza)",division_medium:"Zatiketa (Ertaina)",division_hard:"Zatiketa (Zaila)",powers_easy:"Berreketak (Erraza)",powers_medium:"Berreketak (Ertaina)",powers_hard:"Berreketak (Zaila)",roots_easy:"Erroketak (Erraza)",roots_medium:"Erroketak (Ertaina)",roots_hard:"Erroketak (Zaila)"}[p]||p,u=Object.entries(rt).reduce((p,[y,g])=>{let x="other";return y.includes("theory")?x="Teoria":y.includes("ordering")?x="Ordena":y.includes("combined")?x="Konbinatuak":y.includes("mixed")?x="Nahastuta":y.includes("addition")||y.includes("subtraction")?x="Batuketa eta Kenketa":y.includes("multiplication")||y.includes("division")?x="Biderketa eta Zatiketa":y.includes("powers")||y.includes("roots")?x="Berreketak eta Erroketak":x="Oinarrizkoak",p[x]||(p[x]=[]),p[x].push({key:y,limit:g,current:a.gameXp[y]||0}),p},{});return m.jsx("main",{className:"flex-1 px-4 md:px-10 lg:px-40 py-8",children:m.jsxs("div",{className:"mx-auto max-w-[1100px] flex flex-col gap-8",children:[m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("h1",{className:"text-slate-900 dark:text-white text-3xl md:text-4xl font-black leading-tight tracking-[-0.033em]",children:["Kaixo, ",a.displayName.split(" ")[0],"!"]}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base font-normal leading-normal",children:"Hemen duzu zure zenbaki osoen abenturaren laburpena."})]}),m.jsxs(Ye,{to:"/games",className:"w-full md:w-auto flex items-center justify-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-blue-600 transition-all shadow-lg shadow-blue-500/20",children:[m.jsx("span",{className:"material-symbols-outlined",children:"play_circle"}),m.jsx("span",{children:"Jarraitu jolasten"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-5 items-center text-center shadow-sm",children:[m.jsx("div",{className:"size-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center text-amber-600 dark:text-amber-400 mb-1",children:m.jsx("span",{className:"material-symbols-outlined",children:"bolt"})}),m.jsxs("p",{className:"text-slate-900 dark:text-white tracking-tight text-3xl font-bold leading-tight",children:[a.xp," XP"]}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:"Puntuazioa"})]}),m.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-5 items-center text-center shadow-sm",children:[m.jsx("div",{className:"size-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-primary mb-1",children:m.jsx("span",{className:"material-symbols-outlined",children:"donut_large"})}),m.jsxs("p",{className:"text-slate-900 dark:text-white tracking-tight text-3xl font-bold leading-tight",children:["%",i]}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:"Ikastaroa osatuta"})]}),m.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-5 items-center text-center shadow-sm",children:[m.jsx("div",{className:"size-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400 mb-1",children:m.jsx("span",{className:"material-symbols-outlined",children:"emoji_events"})}),m.jsxs("p",{className:"text-slate-900 dark:text-white tracking-tight text-3xl font-bold leading-tight",children:[((d=a.unlockedAchievements)==null?void 0:d.length)||0,"/",ip.length]}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:"Lorpenak"})]})]}),m.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 border border-slate-200 dark:border-slate-700 shadow-sm",children:m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsxs("div",{className:"flex gap-6 justify-between items-end",children:[m.jsx("p",{className:"text-slate-900 dark:text-white text-base font-bold leading-normal",children:"Ikastaroaren Aurrerapen Orokorra"}),m.jsxs("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded text-xs font-bold",children:["%",i]})]}),m.jsx("div",{className:"w-full rounded-full bg-slate-100 dark:bg-slate-700 h-3 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full bg-primary transition-all duration-500 ease-out",style:{width:`${i}%`}})}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-normal leading-normal",children:i<30?"Hasiera ona! Jarraitu ikasten.":i<70?"Oso ondo zoaz! Berreketak menperatzea falta zaizu.":"Ia amaitu duzu! Txapelduna zara."})]})}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-8",children:[m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx("h2",{className:"text-slate-900 dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em]",children:"Dominak eta Lorpenak"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:ip.map(p=>{var g;const y=(g=a.unlockedAchievements)==null?void 0:g.includes(p.id);return m.jsxs("div",{className:`flex gap-4 p-4 rounded-xl border transition-all ${y?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 shadow-sm":"bg-slate-50 dark:bg-slate-900 border-slate-100 dark:border-slate-800 opacity-60 grayscale"}`,children:[m.jsx("div",{className:`size-12 rounded-full flex items-center justify-center shrink-0 ${y?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":"bg-slate-200 dark:bg-slate-700 text-slate-400"}`,children:m.jsx("span",{className:"material-symbols-outlined",children:p.icon})}),m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx("h4",{className:`font-bold ${y?"text-slate-900 dark:text-white":"text-slate-500"}`,children:p.title}),m.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-tight",children:p.description}),y&&m.jsxs("span",{className:"text-[10px] font-bold text-green-600 dark:text-green-400 mt-1",children:["+",p.xpReward," XP Lortuta"]})]})]},p.id)})})]}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx("h2",{className:"text-slate-900 dark:text-white text-[22px] font-bold leading-tight tracking-[-0.015em]",children:"Jokoen Xehetasunak"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:Object.entries(u).map(([p,y])=>m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-5 border border-slate-200 dark:border-slate-700 shadow-sm",children:[m.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:p}),m.jsx("div",{className:"flex flex-col gap-4",children:y.map(g=>m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsxs("div",{className:"flex justify-between text-xs font-medium",children:[m.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:l(g.key)}),m.jsxs("span",{className:`${g.current>=g.limit?"text-green-500 font-bold":"text-slate-400"}`,children:[g.current," / ",g.limit," XP"]})]}),m.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 h-2 rounded-full overflow-hidden",children:m.jsx("div",{className:`h-full rounded-full transition-all ${g.current>=g.limit?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(100,g.current/g.limit*100)}%`}})})]},g.key))})]},p))})]})]}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-5 flex flex-col gap-4",children:[m.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"Zure Maila"}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"size-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-2xl font-black text-primary border-4 border-primary/20",children:a.level}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("p",{className:"text-slate-900 dark:text-white font-bold mb-1",children:["Ikaslea (Lvl ",a.level,")"]}),m.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Hurrengo mailara: ",500-a.xp%500," XP"]}),m.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-700 rounded-full h-2 mt-2",children:m.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${a.xp%500/5}%`}})})]})]})]}),m.jsxs("div",{className:"rounded-xl bg-gradient-to-b from-slate-900 to-slate-800 dark:from-slate-800 dark:to-slate-900 p-5 text-white flex flex-col gap-4 shadow-lg",children:[m.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700 pb-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined text-yellow-400",children:"trophy"}),m.jsx("h3",{className:"font-bold text-lg",children:"Sailkapena"})]}),m.jsx("span",{className:"text-xs bg-white/10 px-2 py-1 rounded",children:"Aste hau"})]}),m.jsx("div",{className:"flex flex-col gap-2",children:e.map((p,y)=>m.jsxs("div",{className:`flex items-center justify-between p-2 rounded-lg ${p.uid===a.uid?"bg-primary/20 border border-primary/50":"hover:bg-white/5"}`,children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{className:`text-sm font-bold w-4 ${y===0?"text-yellow-400":y===1?"text-slate-300":y===2?"text-amber-600":"text-slate-500"}`,children:y+1}),m.jsx("div",{className:"size-8 rounded-full bg-slate-700 bg-cover bg-center",style:{backgroundImage:`url("${p.photoURL}")`}}),m.jsxs("span",{className:`text-sm font-medium ${p.uid===a.uid?"text-white font-bold":"text-slate-300"}`,children:[p.displayName," ",p.uid===a.uid&&"(Zu)"]})]}),m.jsx("span",{className:"text-sm font-bold text-white",children:p.xp})]},p.uid))})]})]})]})]})})},d4=()=>{const[a,e]=L.useState(""),[n,i]=L.useState(""),[l,u]=L.useState(""),{login:d,loginAsGuest:p}=aa(),y=Es(),g=async E=>{E.preventDefault(),u("");try{await d(a,n),y("/progress")}catch{u("Errorea saioa hastean. Egiaztatu datuak.")}},x=async()=>{try{await p(),y("/progress")}catch{u("Arazo bat egon da gonbidatu gisa sartzean.")}};return m.jsx("main",{className:"flex-1 flex flex-col items-center justify-center py-10 px-4",children:m.jsxs("div",{className:"w-full max-w-md p-8 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[m.jsx("h1",{className:"text-3xl font-black text-center text-slate-900 dark:text-white mb-2",children:"Ongi Etorri!"}),m.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 mb-8",children:"Sartu zure kontuan jolasten jarraitzeko."}),l&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg",children:l}),m.jsxs("form",{onSubmit:g,className:"flex flex-col gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Emaila"}),m.jsx("input",{type:"email",required:!0,value:a,onChange:E=>e(E.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all",placeholder:"zure@emaila.com"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Pasahitza"}),m.jsx("input",{type:"password",required:!0,value:n,onChange:E=>i(E.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all",placeholder:""})]}),m.jsx("button",{type:"submit",className:"mt-2 w-full py-3.5 rounded-xl bg-primary hover:bg-blue-600 text-white font-bold shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-0.5",children:"Hasi Saioa"})]}),m.jsxs("div",{className:"flex items-center gap-4 my-6",children:[m.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"}),m.jsx("span",{className:"text-slate-400 text-xs uppercase font-bold",children:"edo"}),m.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"})]}),m.jsxs("button",{onClick:x,className:"w-full py-3.5 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-white font-bold transition-all border border-slate-200 dark:border-slate-600 flex items-center justify-center gap-2",children:[m.jsx("span",{className:"material-symbols-outlined",children:"person"}),"Jarraitu Gonbidatu gisa"]}),m.jsxs("p",{className:"mt-6 text-center text-sm text-slate-600 dark:text-slate-400",children:["Ez daukazu konturik? ",m.jsx(Ye,{to:"/register",className:"text-primary font-bold hover:underline",children:"Erregistratu hemen"})]})]})})},h4=()=>{const[a,e]=L.useState(""),[n,i]=L.useState(""),[l,u]=L.useState(""),[d,p]=L.useState(""),{register:y}=aa(),g=Es(),x=async E=>{E.preventDefault(),p("");try{await y(n,l,a),g("/progress")}catch{p("Errorea erregistratzean. Saiatu berriro.")}};return m.jsx("main",{className:"flex-1 flex flex-col items-center justify-center py-10 px-4",children:m.jsxs("div",{className:"w-full max-w-md p-8 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[m.jsx("h1",{className:"text-3xl font-black text-center text-slate-900 dark:text-white mb-2",children:"Sortu Kontua"}),m.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 mb-8",children:"Bat egin Zenbaki Osoen Abenturarekin!"}),d&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg",children:d}),m.jsxs("form",{onSubmit:x,className:"flex flex-col gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Izena"}),m.jsx("input",{type:"text",required:!0,value:a,onChange:E=>e(E.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all",placeholder:"Jon Agirre"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Emaila"}),m.jsx("input",{type:"email",required:!0,value:n,onChange:E=>i(E.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all",placeholder:"zure@emaila.com"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1",children:"Pasahitza"}),m.jsx("input",{type:"password",required:!0,value:l,onChange:E=>u(E.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all",placeholder:""})]}),m.jsx("button",{type:"submit",className:"mt-2 w-full py-3.5 rounded-xl bg-primary hover:bg-blue-600 text-white font-bold shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-0.5",children:"Erregistratu"})]}),m.jsxs("p",{className:"mt-6 text-center text-sm text-slate-600 dark:text-slate-400",children:["Dagoeneko kontua daukazu? ",m.jsx(Ye,{to:"/login",className:"text-primary font-bold hover:underline",children:"Hasi Saioa"})]})]})})},kv=["https://ui-avatars.com/api/?name=User&background=136dec&color=fff","https://ui-avatars.com/api/?name=User&background=0d9488&color=fff","https://ui-avatars.com/api/?name=User&background=7c3aed&color=fff","https://ui-avatars.com/api/?name=User&background=db2777&color=fff","https://ui-avatars.com/api/?name=User&background=ea580c&color=fff"],f4=()=>{const{user:a,login:e}=aa(),[n,i]=L.useState((a==null?void 0:a.displayName)||""),[l,u]=L.useState((a==null?void 0:a.photoURL)||kv[0]),[d,p]=L.useState(!1),[y,g]=L.useState("");if(!a)return m.jsx("p",{className:"text-center p-10",children:"Saioa hasi behar duzu."});const x=async E=>{E.preventDefault(),p(!0),g(""),Tt.click();try{await bu.updateProfile(a.uid,{displayName:n,photoURL:l}),g("Aldaketak ondo gorde dira!"),Tt.correct(),setTimeout(()=>window.location.reload(),1e3)}catch{g("Errorea gertatu da."),Tt.wrong()}finally{p(!1)}};return m.jsx("main",{className:"flex-1 flex flex-col items-center py-10 px-4",children:m.jsxs("div",{className:"w-full max-w-lg p-8 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700",children:[m.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white mb-6 border-b border-slate-100 dark:border-slate-700 pb-4",children:"Nire Profila"}),y&&m.jsx("div",{className:"mb-6 p-4 rounded-xl bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 font-bold text-center",children:y}),m.jsxs("form",{onSubmit:x,className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Avatarra Aukeratu"}),m.jsx("div",{className:"flex gap-3 justify-center flex-wrap",children:kv.map((E,A)=>m.jsx("button",{type:"button",onClick:()=>{u(E),Tt.click()},className:`size-14 rounded-full border-4 transition-transform hover:scale-110 ${l===E?"border-primary":"border-transparent"}`,style:{backgroundImage:`url("${E}")`,backgroundSize:"cover"}},A))})]}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Erabiltzaile Izena"}),m.jsx("input",{type:"text",value:n,onChange:E=>i(E.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"})]}),m.jsxs("div",{className:"flex flex-col gap-2 opacity-60",children:[m.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Emaila (Ezin da aldatu)"}),m.jsx("input",{type:"email",value:a.email,disabled:!0,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-100 dark:bg-slate-800 text-slate-500 cursor-not-allowed"})]}),m.jsx("button",{type:"submit",disabled:d,className:"mt-4 w-full py-4 rounded-xl bg-primary hover:bg-blue-600 text-white font-bold shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Gordetzen...":"Gorde Aldaketak"})]})]})})},m4=()=>{const{user:a}=aa(),{addToast:e}=ju(),[n,i]=L.useState([]),[l,u]=L.useState(!0),[d,p]=L.useState(null);L.useEffect(()=>{y()},[a]);const y=async()=>{if(a!=null&&a.isAdmin){const x=await bu.getAllUsers();i(x),u(!1)}},g=async x=>{try{await bu.kickUser(x),e("success","Erabiltzailea kanporatua izan da."),p(null),y()}catch{e("error","Arazoa egon da erabiltzailea kanporatzean.")}};return!a||!a.isAdmin?m.jsx(bl,{to:"/",replace:!0}):m.jsxs("main",{className:"flex-1 p-6 md:p-10 flex flex-col items-center",children:[m.jsxs("div",{className:"w-full max-w-6xl",children:[m.jsxs("h1",{className:"text-3xl font-black text-slate-900 dark:text-white mb-8 border-b border-slate-200 dark:border-slate-700 pb-4 flex items-center gap-3",children:[m.jsx("span",{className:"material-symbols-outlined text-4xl text-red-500",children:"admin_panel_settings"}),"Administrazio Panela"]}),l?m.jsx("p",{className:"text-center",children:"Kargatzen..."}):m.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden border border-slate-200 dark:border-slate-700",children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-left border-collapse",children:[m.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-4 text-sm font-bold text-slate-500 uppercase",children:"Erabiltzailea"}),m.jsx("th",{className:"p-4 text-sm font-bold text-slate-500 uppercase",children:"Emaila"}),m.jsx("th",{className:"p-4 text-sm font-bold text-slate-500 uppercase text-center",children:"XP"}),m.jsx("th",{className:"p-4 text-sm font-bold text-slate-500 uppercase text-center",children:"Maila"}),m.jsx("th",{className:"p-4 text-sm font-bold text-slate-500 uppercase text-center",children:"Azken Saioa"}),m.jsx("th",{className:"p-4 text-sm font-bold text-slate-500 uppercase text-right",children:"Ekintzak"})]})}),m.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:n.map(x=>m.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[m.jsxs("td",{className:"p-4 flex items-center gap-3",children:[m.jsx("div",{className:"size-10 rounded-full bg-cover bg-center bg-slate-200",style:{backgroundImage:`url("${x.photoURL}")`}}),m.jsxs("span",{className:"font-bold text-slate-900 dark:text-white",children:[x.displayName,x.isAdmin&&m.jsx("span",{className:"ml-2 bg-red-100 text-red-600 text-[10px] px-2 py-0.5 rounded-full uppercase font-black",children:"Admin"})]})]}),m.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-400 font-mono text-sm",children:x.email}),m.jsx("td",{className:"p-4 text-center font-bold text-primary",children:x.xp}),m.jsx("td",{className:"p-4 text-center",children:m.jsx("span",{className:"bg-slate-100 dark:bg-slate-700 px-3 py-1 rounded-full text-xs font-bold",children:x.level})}),m.jsx("td",{className:"p-4 text-center text-sm text-slate-500",children:new Date(x.lastLoginDate).toLocaleDateString()}),m.jsx("td",{className:"p-4 text-right",children:!x.isAdmin&&m.jsx("button",{onClick:()=>p(x.uid),className:"text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 p-2 rounded-lg transition-colors",title:"Kanporatu",children:m.jsx("span",{className:"material-symbols-outlined",children:"person_remove"})})})]},x.uid))})]})})})]}),d&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-sm w-full p-6 border border-slate-200 dark:border-slate-700",children:[m.jsx("div",{className:"size-12 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 flex items-center justify-center mb-4",children:m.jsx("span",{className:"material-symbols-outlined text-2xl",children:"warning"})}),m.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Ziur zaude?"}),m.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Ekintza honek erabiltzailea eta bere datu guztiak ezabatuko ditu. Ezin da desegin."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 rounded-xl bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:"Ezeztatu"}),m.jsx("button",{onClick:()=>g(d),className:"flex-1 py-3 rounded-xl bg-red-600 text-white font-bold hover:bg-red-700 transition-colors shadow-lg shadow-red-500/20",children:"Kanporatu"})]})]})})]})},p4=()=>m.jsx(ZI,{children:m.jsx(WI,{children:m.jsx(wA,{children:m.jsxs("div",{className:"relative flex h-auto min-h-screen w-full flex-col overflow-x-hidden bg-background-light dark:bg-background-dark text-slate-900 dark:text-slate-100 transition-colors duration-200 font-body",children:[m.jsx(e4,{}),m.jsxs(WT,{children:[m.jsx(Xr,{path:"/",element:m.jsx(r4,{})}),m.jsx(Xr,{path:"/topics",element:m.jsx(a4,{})}),m.jsx(Xr,{path:"/theory/:topicId",element:m.jsx(i4,{})}),m.jsx(Xr,{path:"/games",element:m.jsx(u4,{})}),m.jsx(Xr,{path:"/progress",element:m.jsx(c4,{})}),m.jsx(Xr,{path:"/login",element:m.jsx(d4,{})}),m.jsx(Xr,{path:"/register",element:m.jsx(h4,{})}),m.jsx(Xr,{path:"/profile",element:m.jsx(f4,{})}),m.jsx(Xr,{path:"/admin",element:m.jsx(m4,{})})]}),m.jsx(t4,{}),m.jsx(n4,{})]})})})}),b1=document.getElementById("root");if(!b1)throw new Error("Could not find root element to mount to");const g4=sT.createRoot(b1);g4.render(m.jsx(Jw.StrictMode,{children:m.jsx(p4,{})}));
